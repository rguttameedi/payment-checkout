import{r as e,c as t,g as a,h as n}from"./p-hYWQIH0y.js";import{E as o,g as s,M as i}from"./p-B6Hq8G5w.js";const r=".date-picker-wrapper{position:relative;display:inline-block;width:100%;box-sizing:border-box}.date-picker-wrapper input{width:100%;padding-right:40px;box-sizing:border-box}.date-picker-icon{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none !important;border:none;cursor:pointer;padding:5px;display:flex;align-items:center;justify-content:center;color:#666;width:auto !important;height:auto !important;min-width:auto !important}.date-picker-icon:hover{color:#333;background:none !important;transform:translateY(-50%)}.date-picker-icon:focus{outline:none;background:none !important}.date-picker-icon:active{background:none !important;transform:translateY(-50%)}.date-picker-dropdown{position:absolute;bottom:100%;left:0;margin-bottom:4px;background:white;border:1px solid #ddd;border-radius:4px;box-shadow:0 -4px 6px rgba(0, 0, 0, 0.1);z-index:1000;width:320px !important;min-width:320px !important;max-width:320px !important;max-height:400px;overflow:hidden;box-sizing:border-box}.date-picker-header{padding:12px;border-bottom:1px solid #eee;background-color:#f8f9fa;width:100%;box-sizing:border-box}.date-picker-selectors{display:flex;gap:8px;align-items:center;justify-content:center;width:100%;box-sizing:border-box}.date-picker-month-select{flex:1;min-width:120px;max-width:180px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:14px;background-color:white;cursor:pointer;box-sizing:border-box}.date-picker-month-select:hover{background-color:#f5f5f5}.date-picker-month-select:focus{outline:2px solid #007bff;outline-offset:2px}.date-picker-year-button{padding:6px 12px;border:1px solid #ddd;border-radius:4px;background-color:white;cursor:pointer;font-size:14px;white-space:nowrap}.date-picker-year-button:hover{background-color:#f5f5f5}.date-picker-year-button:focus{outline:2px solid #007bff;outline-offset:2px}.year-picker-navigation{display:flex;justify-content:space-between;align-items:center;gap:8px;width:100%}.year-nav-button{width:40px;height:40px;flex-shrink:0;padding:8px;border:1px solid #ddd;border-radius:4px;background-color:white;cursor:pointer;font-size:20px;display:flex;align-items:center;justify-content:center}.year-nav-button:hover:not(:disabled){background-color:#f5f5f5}.year-nav-button:disabled{opacity:0.5;cursor:not-allowed}.year-nav-button:active:not(:disabled){background-color:#e9ecef}.year-nav-button:focus{outline:2px solid #007bff;outline-offset:2px}.year-range-button{flex:1;height:40px;padding:8px 12px;border:1px solid #ddd;border-radius:4px;background-color:white;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center}.year-range-button:hover{background-color:#f5f5f5}.year-range-button:active{background-color:#e9ecef}.date-picker-calendar-wrapper{max-height:280px;overflow-y:auto;overflow-x:hidden;width:100%;box-sizing:border-box}.date-picker-calendar{width:100%;border-collapse:collapse;table-layout:fixed}.date-picker-calendar thead th{padding:8px;text-align:center;font-weight:600;color:#666;font-size:12px;border-bottom:1px solid #eee}.date-picker-calendar tbody td{padding:2px;text-align:center}.date-picker-day{width:100%;padding:8px;border:none;background:none;cursor:pointer;border-radius:4px;font-size:14px;transition:background-color 0.2s}.date-picker-day:hover{background-color:#e9ecef}.date-picker-day.selected{background-color:#007bff;color:white}.date-picker-day.selected:hover{background-color:#0056b3}.date-picker-day.today{border:2px solid #007bff;font-weight:bold}.year-picker-grid{display:grid;grid-template-columns:repeat(3, 1fr);gap:8px;padding:12px;max-height:320px;overflow-y:auto;width:100%;box-sizing:border-box}.year-picker-item{padding:12px;border:1px solid #ddd;border-radius:4px;background-color:white;cursor:pointer;font-size:14px;transition:background-color 0.2s}.year-picker-item:hover{background-color:#e9ecef}.year-picker-item.selected{background-color:#007bff;color:white;border-color:#007bff}.year-picker-item.selected:hover{background-color:#0056b3}.year-picker-item.today{border:2px solid #007bff;font-weight:bold}";const c=class{constructor(a){e(this,a);this.dateChange=t(this,"dateChange")}get el(){return a(this)}value="";placeholder="MM/DD/YYYY";inputId="date-input";minAge;dateChange;inputValue="";isDatePickerOpen=false;selectedDate=null;isYearPickerOpen=false;isSelectingMonth=false;isSelectingYear=false;yearRangeStart=1900;_isOpeningYearPicker=false;_isOpeningMonthSelect=false;valueChanged(e){this.inputValue=e;if(e&&e.length===10){const t=e.split("/");if(t.length===3){const e=parseInt(t[0],10)-1;const a=parseInt(t[1],10);const n=parseInt(t[2],10);if(n>=1900&&n<=2099){const t=new Date(n,e,a);if(t.getMonth()===e&&t.getDate()===a&&t.getFullYear()===n){this.selectedDate=t}}}}else if(!e){this.selectedDate=null}}componentDidLoad(){this.inputValue=this.value;setTimeout((()=>{document.addEventListener("click",this.handleClickOutside,false)}),300)}disconnectedCallback(){document.removeEventListener("click",this.handleClickOutside,false)}handleClickOutside=e=>{if(!this.isDatePickerOpen)return;if(this._isOpeningYearPicker||this._isOpeningMonthSelect){return}if(this.isSelectingMonth||this.isSelectingYear){return}const t=e.target;const a=this.el.querySelector(".date-picker-wrapper");if(!a)return;if(a.contains(t)){return}if(t.classList.contains("year-picker-item")||t.classList.contains("year-range-button")||t.classList.contains("date-picker-year-button")||t.closest(".year-picker-grid")||t.closest(".year-range-button")||t.closest(".date-picker-year-button")){return}if(t.tagName==="SELECT"||t.tagName==="OPTION"||t.closest("select")){return}this.isDatePickerOpen=false;this.isYearPickerOpen=false};handleManualInput=e=>{const t=e.target;let a=t.value;let n=a.replace(/\D/g,"");let o=this.formatDateInput(n);t.value=o;this.inputValue=o;this.dateChange.emit(o);if(o.length===10){const e=this.parseAndValidateDate(o);if(e){this.selectedDate=e}}};formatDateInput(e){let t="";if(e.length>0){t=e.slice(0,2);if(e.length>=3){t+="/"+e.slice(2,4)}if(e.length>=5){t+="/"+e.slice(4,8)}}return t}parseAndValidateDate(e){const t=e.split("/");if(t.length!==3)return null;const a=parseInt(t[0],10)-1;const n=parseInt(t[1],10);const o=parseInt(t[2],10);if(a<0||a>11||n<1||n>31||o<1900||o>2099){return null}const s=new Date(o,a,n);if(s.getMonth()===a&&s.getDate()===n&&s.getFullYear()===o){return s}return null}toggleDatePicker=e=>{if(e){e.preventDefault();e.stopPropagation()}this.isDatePickerOpen=!this.isDatePickerOpen;if(this.isDatePickerOpen){setTimeout((()=>{const e=this.el.querySelector(".date-picker-dropdown");if(e){const t=e.getBoundingClientRect();const a=window.innerHeight;if(t.bottom>a){const n=a-t.top-20;e.style.maxHeight=`${n}px`;e.style.overflowY="auto"}}}),50)}};handleDateSelect=(e,t)=>{if(t){t.preventDefault();t.stopPropagation()}this.selectedDate=e;const a=String(e.getMonth()+1).padStart(2,"0");const n=String(e.getDate()).padStart(2,"0");const o=e.getFullYear();const s=`${a}/${n}/${o}`;this.dateChange.emit(s);this.isDatePickerOpen=false;this.isYearPickerOpen=false};toggleYearPicker=e=>{if(e){e.preventDefault();e.stopPropagation()}this._isOpeningYearPicker=true;this.isSelectingYear=true;this.isYearPickerOpen=!this.isYearPickerOpen;if(this.isYearPickerOpen){const e=this.selectedDate?this.selectedDate.getFullYear():(new Date).getFullYear()-(this.minAge||18);this.yearRangeStart=Math.floor((e-1900)/18)*18+1900}if(!this.isYearPickerOpen){setTimeout((()=>{this.isSelectingYear=false;this._isOpeningYearPicker=false}),300)}else{setTimeout((()=>{this._isOpeningYearPicker=false}),500)}};handleYearRangeChange=(e,t)=>{if(t){t.preventDefault();t.stopPropagation()}if(e==="prev"){const e=this.yearRangeStart-18;this.yearRangeStart=Math.max(1900,e)}else{const e=this.yearRangeStart+18;this.yearRangeStart=Math.min(2082,e)}};handleYearSelect=(e,t)=>{if(t){t.preventDefault();t.stopPropagation()}const a=this.selectedDate?this.selectedDate.getMonth():(new Date).getMonth();const n=new Date(e,a,1);this.selectedDate=n;this.isYearPickerOpen=false;setTimeout((()=>{this.isSelectingYear=false;this._isOpeningYearPicker=false}),300)};renderDatePicker(){if(!this.isDatePickerOpen)return null;const e=new Date;const t=this.selectedDate?this.selectedDate.getMonth():e.getMonth();const a=this.selectedDate?this.selectedDate.getFullYear():e.getFullYear()-(this.minAge||18);const o=["January","February","March","April","May","June","July","August","September","October","November","December"];const s=new Date(a,t+1,0).getDate();const i=new Date(a,t,1).getDay();const r=e=>{const t=e.target;const n=parseInt(t.value,10);const o=new Date(a,n,1);this.selectedDate=o;setTimeout((()=>{this.isSelectingMonth=false;this._isOpeningMonthSelect=false}),100)};const c=()=>{this._isOpeningMonthSelect=true;this.isSelectingMonth=true};const d=()=>{setTimeout((()=>{this.isSelectingMonth=false;this._isOpeningMonthSelect=false}),200)};const l=()=>{const o=[];for(let e=0;e<i;e++){o.push(n("td",null))}for(let i=1;i<=s;i++){const s=new Date(a,t,i);const r=this.selectedDate&&this.selectedDate.getDate()===i&&this.selectedDate.getMonth()===t&&this.selectedDate.getFullYear()===a;const c=e.getDate()===i&&e.getMonth()===t&&e.getFullYear()===a;o.push(n("td",null,n("button",{type:"button",class:`date-picker-day ${r?"selected":""} ${c?"today":""}`,onClick:e=>this.handleDateSelect(s,e)},i)))}const r=[];let c=[];o.forEach(((e,t)=>{c.push(e);if((t+1)%7===0||t===o.length-1){while(c.length<7){c.push(n("td",null))}r.push(n("tr",null,c));c=[]}}));return r};if(this.isYearPickerOpen){const t=[];const o=this.yearRangeStart;const s=Math.min(o+17,2099);const i=s-o+1;for(let e=0;e<i;e++){const a=o+e;if(a<=2099){t.push(a)}}const r=this.yearRangeStart<=1900;const c=this.yearRangeStart>=2082;return n("div",{class:"date-picker-dropdown"},n("div",{class:"date-picker-header"},n("div",{class:"year-picker-navigation"},n("button",{type:"button",class:"year-nav-button",onClick:e=>this.handleYearRangeChange("prev",e),disabled:r},"‹"),n("button",{type:"button",class:"year-range-button",onClick:e=>this.toggleYearPicker(e)},o," - ",Math.min(o+17,2099)),n("button",{type:"button",class:"year-nav-button",onClick:e=>this.handleYearRangeChange("next",e),disabled:c},"›"))),n("div",{class:"year-picker-grid"},t.map((t=>n("button",{type:"button",class:`year-picker-item ${t===a?"selected":""} ${t===e.getFullYear()?"today":""}`,onClick:e=>this.handleYearSelect(t,e)},t)))))}return n("div",{class:"date-picker-dropdown"},n("div",{class:"date-picker-header"},n("div",{class:"date-picker-selectors"},n("select",{class:"date-picker-month-select",onInput:r,onFocus:c,onBlur:d},o.map(((e,a)=>n("option",{value:a,selected:a===t},e)))),n("button",{type:"button",class:"date-picker-year-button",onClick:e=>this.toggleYearPicker(e)},a))),n("div",{class:"date-picker-calendar-wrapper"},n("table",{class:"date-picker-calendar"},n("thead",null,n("tr",null,n("th",null,"S"),n("th",null,"M"),n("th",null,"T"),n("th",null,"W"),n("th",null,"T"),n("th",null,"F"),n("th",null,"S"))),n("tbody",null,l()))))}render(){return n("div",{key:"c4b1b21d90cfc72c290ce3707ea895c096dbcc01",class:"date-picker-wrapper"},n("input",{key:"011b71482bab0caa4f6288065d5aadb3d15ede51",type:"text",id:this.inputId,placeholder:this.placeholder,value:this.inputValue,onInput:e=>this.handleManualInput(e),maxLength:10,autocomplete:"off"}),n("button",{key:"d319e7742e7f858fe827f0441b9883fe22ccda37",type:"button",class:"date-picker-icon",onClick:e=>this.toggleDatePicker(e)},n("svg",{key:"b94904dc9806e7a0a3297cd651ee1833c946a0b7",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},n("rect",{key:"1149c974465ae847af5a899120680234a1e412a8",x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),n("line",{key:"a63df1ebb600e1131eb8306667f971f4d2ef4cd3",x1:"16",y1:"2",x2:"16",y2:"6"}),n("line",{key:"dd12f59f2256f70a0a8bf812e740e48fb4b1832a",x1:"8",y1:"2",x2:"8",y2:"6"}),n("line",{key:"e8453051603ee64cc650eda6a9e77802d75c3d9a",x1:"3",y1:"10",x2:"21",y2:"10"}))),this.renderDatePicker())}static get watchers(){return{value:["valueChanged"]}}};c.style=r;const d=(e,t,...a)=>{if(e===o.LOCALDEVELOPMENT||e===o.STAGING){console.log(t,...a)}};async function l(e,t,a,n=o.PRODUCTION){const i=s(n);const r=`${i.BASE_URL}${i.RELATIVE_URLS.GET_MFA_STATUS}?mfaInquiryId=${encodeURIComponent(a)}`;d(n,"Get MFA Status Request Details:",{url:r,method:"GET",headers:{Authorization:`Bearer ${e.substring(0,5)}...${e.substring(e.length-5)}`,"X-SW-API-KEY":`${t.substring(0,5)}...${t.substring(t.length-5)}`}});try{const a=await fetch(r,{method:"GET",headers:{Authorization:`Bearer ${e}`,"X-SW-API-KEY":t}});d(n,"Get MFA Status Response Status:",a.status,a.statusText);const o=await a.json();d(n,"Get MFA Status Response Data:",o);if(o.status===400){d(n,"Validation Error Response:",o);return{success:false,message:"We couldn't process your request at the moment. Please try again later or use a different payment method."}}if(!a.ok){console.error("API Error Response:",{status:a.status,statusText:a.statusText,data:o});return{success:false,message:"We are unable to retrieve your MFA status at the moment. Please try again later"}}d(n,"MFA status fetched successfully:",o);return{success:true,data:o}}catch(e){console.error("Error fetching MFA status:",{error:e,message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:undefined});return{success:false,message:"Unexpected error. Please refresh or try again later."}}}async function h(e,t,a,n=o.PRODUCTION){const i=s(n);const r=`${i.BASE_URL}${i.RELATIVE_URLS.RESEND_MFA_LINK}`;d(n,"Resend MFA Link Request Details:",{url:r,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.substring(0,5)}...${e.substring(e.length-5)}`,"X-SW-API-KEY":`${t.substring(0,5)}...${t.substring(t.length-5)}`},body:JSON.stringify(a)});try{const o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,"X-SW-API-KEY":t},body:JSON.stringify(a)});d(n,"Resend MFA Link Response Status:",o.status,o.statusText);const s=await o.json();d(n,"Resend MFA Link Response Data:",s);if(s.status===400){d(n,"Validation Error Response:",s);return{success:false,message:"Unable to resend MFA link at the moment. Please try again later"}}if(!o.ok){console.error("API Error Response:",{status:o.status,statusText:o.statusText,data:s});return{success:false,message:"Failed to resend MFA link. Please refresh and try again"}}d(n,"The MFA link has been resent successfully:",s);return{success:true,data:s}}catch(e){console.error("Error resending MFA link:",{error:e,message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:undefined});return{success:false,message:"Unexpected error occurred while resending MFA link. Please try again later."}}}async function u(e,t,a,n=o.PRODUCTION){const i=s(n);const r=`${i.BASE_URL}${i.RELATIVE_URLS.SAVE_CARD_ON_MFA_SUCCESS}`;d(n,"Save Card On MFA Success Request Details:",{url:r,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.substring(0,5)}...${e.substring(e.length-5)}`,"X-SW-API-KEY":`${t.substring(0,5)}...${t.substring(t.length-5)}`},body:JSON.stringify(a)});try{const o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,"X-SW-API-KEY":t},body:JSON.stringify(a)});d(n,"Save Card On MFA Success Response Status:",o.status,o.statusText);const s=await o.json();d(n,"Save Card On MFA Success Response Data:",s);if(s.status===400){d(n,"Validation Error Response:",s);return{success:false,message:"We couldn't save your card details at the moment. Please try again later."}}if(!o.ok){console.error("API Error Response:",{status:o.status,statusText:o.statusText,data:s});return{success:false,message:"Failed to save card details. Please refresh and try again."}}d(n,"Save Card on MFA success executed successfully:",s);return{success:true,data:s}}catch(e){console.error("Error saving card on MFA success:",{error:e,message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:undefined});return{success:false,message:"Unexpected error occurred while saving card details. Please try again later."}}}async function p(e,t,a,n=o.PRODUCTION){const i=s(n);const r=`${i.BASE_URL}${i.RELATIVE_URLS.SAVE_BANK_ON_MFA_SUCCESS}`;d(n,"Save Bank On MFA Success Request Details:",{url:r,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.substring(0,5)}...${e.substring(e.length-5)}`,"X-SW-API-KEY":`${t.substring(0,5)}...${t.substring(t.length-5)}`},body:JSON.stringify(a)});try{const o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,"X-SW-API-KEY":t},body:JSON.stringify(a)});d(n,"Save Bank On MFA Success Response Status:",o.status,o.statusText);const s=await o.json();d(n,"Save Bank On MFA Success Response Data:",s);if(s.status===400){d(n,"Validation Error Response:",s);return{success:false,message:"We couldn't save your bank details at the moment. Please try again later."}}if(!o.ok){console.error("API Error Response:",{status:o.status,statusText:o.statusText,data:s});return{success:false,message:"Failed to save bank details. Please refresh and try again."}}d(n,"Save Bank on MFA success executed successfully:",s);return{success:true,data:s}}catch(e){console.error("Error saving bank on MFA success:",{error:e,message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:undefined});return{success:false,message:"Unexpected error occurred while saving bank details. Please try again later."}}}function f(e,t){return{firstName:e?.payorInformation?.firstName,lastName:e?.payorInformation?.lastName,dateofBirth:e?.payorInformation?.dateofBirth,emailAddress:e?.payorInformation?.contactInformation?.emailAddress,phoneNumber:e?.payorInformation?.contactInformation?.phoneNumber,address:{addressLine1:e?.billingAddress?.addressLine1,addressLine2:e?.billingAddress?.addressLine2,city:e?.billingAddress?.city,provinceOrStateCode:e?.billingAddress?.provinceOrStateCode,postalCode:e?.billingAddress?.postalCode,countryCode:e?.billingAddress?.countryCode},inquiryCorrelationId:t?.data?.InquiryCorrelationId}}function b(e,t){return{inquiryCorrelationId:e?.InquiryCorrelationId,mfaStatus:3,trustLevel:e?.TrustLevel,inquiryId:t||e?.MfaInquiryId,isAddressVerified:!e?.IsAddressValidationFailed}}function m(e,t,a){return{firstName:e?.payorInformation?.firstName,lastName:e?.payorInformation?.lastName,dateofBirth:e?.payorInformation?.dateofBirth,validateAddress:e?.payorInformation?.validateAddress,contactInformation:{emailAddress:e?.payorInformation?.contactInformation?.emailAddress,phoneNumber:e?.payorInformation?.contactInformation?.phoneNumber},identityVerificationInformation:b(t,a)}}function g(e){return{addressLine1:e?.billingAddress?.addressLine1,addressLine2:e?.billingAddress?.addressLine2,city:e?.billingAddress?.city,provinceOrStateCode:e?.billingAddress?.provinceOrStateCode,postalCode:e?.billingAddress?.postalCode,countryCode:e?.billingAddress?.countryCode}}function y(e,t,a){const n=t?.data;return{payorInformation:m(e,n,a),accountReferenceId:e?.accountReferenceId,billingAddress:g(e),cardNumber:e?.cardNumber,expirationMonth:e?.expirationMonth,expirationYear:e?.expirationYear}}function x(e,t,a){const n=t?.data;return{payorInformation:m(e,n,a),accountReferenceId:e?.accountReferenceId,billingAddress:g(e),accountNumber:e?.accountNumber,routingNumber:e?.routingNumber,bankAccountType:e?.bankAccountType}}const k='.action-modal .modal-footer .button-box .primary-btn,.action-modal .modal-footer .button-box .secondarybtn{background-image:none;border-radius:12px;box-shadow:none;box-sizing:border-box;font-family:"Inter", sans-serif;font-size:14px;font-weight:700;height:48px;line-height:14px;padding:16px;text-align:center;text-shadow:none;cursor:pointer}.popup{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0, 0, 0, 0.5);display:flex;justify-content:center;align-items:center;z-index:999}.action-modal{position:absolute;top:80px;border-radius:12px;background:white;display:flex;flex-direction:column;gap:24px;opacity:1;padding:40px}.action-modal .modal-container{display:flex;flex-direction:column;gap:24px;width:237px;margin:0 auto}.action-modal .modal-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:14px;border-bottom:1px solid #e9eaeb}.action-modal .modal-header h3{font-family:"p22-mackinac-pro";font-weight:800;font-size:24px;margin:0;line-height:27px;color:#282829}.action-modal .modal-body{padding:0}.action-modal .modal-body .dialogContentText{font-family:"Inter", sans-serif;font-weight:400;font-size:14px;color:#282829;line-height:21px}.action-modal .modal-body .highlight{font-weight:700;font-style:normal}.action-modal .modal-body .time-highlight{font-weight:700;color:#d01a1f}.action-modal .modal-footer{background-color:transparent;box-shadow:none;padding-top:4px;display:flex;flex-direction:column;align-items:stretch}.action-modal .modal-footer .button-box{display:flex;flex-direction:column;gap:14px;width:100%}.action-modal .modal-footer .button-box .secondarybtn{background-color:#FFFFFF;border:1.5px solid #e9eaeb;color:#282829;width:100%}.action-modal .modal-footer .button-box .primary-btn{background-color:#282829;border:1px solid #282829;color:#FFFFFF;width:100%}.action-modal .modal-footer .button-box .primary-btn[disabled]{background-color:#e9eaeb;border-color:#e9eaeb;color:#9ba3a7;cursor:default}@media (min-width: 545px){.action-modal{padding:40px}.action-modal .modal-container{width:440px;margin:0 auto;gap:24px}.action-modal .modal-footer{align-items:center}.action-modal .modal-footer .button-box{display:flex;flex-direction:row;justify-content:flex-end;gap:8px;width:100%}.action-modal .modal-footer .button-box .secondarybtn,.action-modal .modal-footer .button-box .primary-btn{width:fit-content}}';const w=class{constructor(a){e(this,a);this.successEvent=t(this,"successEvent")}operationsToken;userScopedAccessToken;environment;onClose;mfaResponse=null;addRequestPayload;initialMfaResponse;requestType;time=60;isRunning=true;currentInquiryId="";timer;countdownIntervalId;pollingIntervalId;errorHandler;accountSubmissionSuccess=null;noOfAttempts=2;timeoutId;successEvent;handleIsRunningTrue(e){if(e===true){this.handleStart()}}handleIsRunningFalse(e){if(e===false){this.handleStop()}}handleStart(){this.startCountdownTimer();this.scheduleMfaStatusPolling()}handleStop(){this.stopCountdownTimer();this.clearPollingTimers()}componentWillLoad(){this.currentInquiryId=this.initialMfaResponse?.data?.MfaInquiryId||""}componentDidLoad(){if(this.isRunning){this.startCountdownTimer();this.scheduleMfaStatusPolling()}}scheduleMfaStatusPolling(){const e=()=>{this.pollingIntervalId=setInterval((async()=>{const e=await l(this.operationsToken,this.userScopedAccessToken,this.currentInquiryId,this.environment);if(e.success){this.mfaResponse=e.data}else{const t=e.message??"Unexpected error. Please refresh or try again later.";if(this.errorHandler){this.errorHandler([t])}this.handleCancel()}}),this.recurringInterval*1e3)};this.timeoutId=setTimeout((()=>{e()}),this.startInterval*1e3)}async handleMfaResponseChanged(e){if(!e)return;if(e.mfaStatus===i.Pass){this.clearPollingTimers();let e;let t;if(this.requestType==="card"){e=y(this.addRequestPayload,this.initialMfaResponse,this.currentInquiryId);t=await u(this.operationsToken,this.userScopedAccessToken,e,this.environment)}else if(this.requestType==="bank"){e=x(this.addRequestPayload,this.initialMfaResponse,this.currentInquiryId);t=await p(this.operationsToken,this.userScopedAccessToken,e,this.environment)}if(t.success){this.accountSubmissionSuccess=t.data}else{const e=t.message??"Unexpected error while saving card.";if(this.errorHandler){this.errorHandler([e])}this.handleCancel()}}else if(e.mfaStatus===i.Failed){this.clearPollingTimers();const e="Your MFA verification has failed. Please try again or use a different payment method.";if(this.errorHandler){this.errorHandler([e])}this.handleCancel()}}handleAccountSubmissionSuccessChanged(e){if(!e)return;if(e?.resultMessage==="Success"&&e?.paymentInstrument){this.successEvent.emit({data:e});this.handleCancel()}}clearPollingTimers(){if(this.pollingIntervalId){clearInterval(this.pollingIntervalId)}if(this.timeoutId){clearTimeout(this.timeoutId)}}startCountdownTimer(){this.countdownIntervalId=setInterval((()=>{if(this.time>0){this.time=this.time-1}else{this.isRunning=false;if(this.noOfAttempts===0){const e="You have reached the maximum number of MFA attempts. Please use a different payment method.";if(this.errorHandler){this.errorHandler([e])}this.handleCancel()}clearInterval(this.countdownIntervalId)}}),1e3)}stopCountdownTimer(){clearInterval(this.countdownIntervalId)}disconnectedCallback(){this.stopCountdownTimer();this.clearPollingTimers()}handleResendLinkClick=async()=>{if(this.noOfAttempts>0){this.noOfAttempts=this.noOfAttempts-1;const e=f(this.addRequestPayload,this.initialMfaResponse);const t=await h(this.operationsToken,this.userScopedAccessToken,e,this.environment);if(t.success){this.currentInquiryId=t.data?.inquiryId||"";this.time=60;this.isRunning=true}else{const e=t.message??"Unexpected error. Please refresh or try again later.";if(this.errorHandler){this.errorHandler([e])}this.handleCancel()}}};handleCancel=()=>{if(this.pollingIntervalId){clearInterval(this.pollingIntervalId);this.pollingIntervalId=null}if(this.timeoutId){clearTimeout(this.timeoutId);this.timeoutId=null}if(this.countdownIntervalId){clearInterval(this.countdownIntervalId);this.countdownIntervalId=null}this.onClose()};get mfaPoolSettings(){return this.initialMfaResponse?.data?.MfaPoolSettings||"20-5"}get mobileNumberLastFourDigits(){const e=this.addRequestPayload?.payorInformation?.contactInformation?.phoneNumber||"";return e.length>=4?e.slice(-4):e}get startInterval(){const[e]=this.mfaPoolSettings?.split("-")||[];return Number(e)}get recurringInterval(){const[,e]=this.mfaPoolSettings?.split("-")||[];return Number(e)}formatTime(e){const t=Math.floor(e/60);const a=e%60;return`${String(t).padStart(2,"0")}:${String(a).padStart(2,"0")}`}getAttemptLabel(){return this.noOfAttempts===1||this.noOfAttempts===0?"attempt":"attempts"}render(){return n("div",{key:"99b67a4581209c03d851e806708c7fbee9d848c1",class:"popup"},n("div",{key:"f13dc340882b8470552743293b3f37749e0fc9ac",class:"action-modal"},n("div",{key:"909bfc464c8c77ddb49bb7e8eba55cdbd1e985cb",class:"modal-container"},n("div",{key:"2fbecc9bb4dde59ea03f1bea97e33193fb6b178d",class:"modal-header"},n("h3",{key:"ceaf8b7cfdcb72111e423e68517ef9628245e051"},"Verification Link Sent")),n("div",{key:"08c561497d0c7a2e0702d484dc95293b51c58145",class:"modal-body"},n("p",{key:"84d598d58b1d64fcbbf055f0001a142e0f226a23",class:"dialogContentText"},"A verification link has been sent to your ",n("span",{key:"340334ddf55fc35d85ee72014bde817e19362877",class:"highlight"},"mobile number ending in ",this.mobileNumberLastFourDigits,"."),n("br",{key:"7203af5aadd78e1321e844844964d3d0776bc691"}),"Please tap the link and follow the instructions to confirm your identity.",n("br",{key:"6ab199555f63b4f70456c3550cd68e54676837e1"}),n("br",{key:"40ca01651d94f13c9ddc0563111eee1f240521c8"}),"The link will expire in ",n("span",{key:"7c63e10bbda96eccc9753437c5e4f290e9032fb4",class:"time-highlight"},this.formatTime(this.time)),".",n("br",{key:"e3ac0fa3273b210383a1380f61f0422f1c3f2532"}),"You have ",this.noOfAttempts," remaining ",this.getAttemptLabel()," to resend the link if needed."),n("div",{key:"a55fb6461683c2e0a482dc98526b10323a05040f",class:"modal-footer"},n("div",{key:"fc581813eda24caefb65bfbbdc5bf1994d79e114",class:"button-box"},n("button",{key:"7c173102311058875f36e2f5d46dd834476bb3ab",class:"secondarybtn",onClick:this.handleCancel},"Cancel"),n("button",{key:"19c2278a298bc21a9eb02f43b9a285938aa8c26c",class:"primary-btn",disabled:this.isRunning,onClick:this.handleResendLinkClick},"Resend Link")))))))}static get watchers(){return{isRunning:["handleIsRunningTrue","handleIsRunningFalse"],mfaResponse:["handleMfaResponseChanged"],accountSubmissionSuccess:["handleAccountSubmissionSuccessChanged"]}}};w.style=k;export{c as date_picker,w as mfa_model_popup};
//# sourceMappingURL=p-f7459c81.entry.js.map