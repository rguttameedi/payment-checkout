{"version":3,"names":["datePickerCss","DatePicker","value","placeholder","inputId","minAge","dateChange","inputValue","isDatePickerOpen","selectedDate","isYearPickerOpen","isSelectingMonth","isSelectingYear","yearRangeStart","_isOpeningYearPicker","_isOpeningMonthSelect","valueChanged","newValue","this","length","parts","split","month","parseInt","day","year","date","Date","getMonth","getDate","getFullYear","componentDidLoad","setTimeout","document","addEventListener","handleClickOutside","disconnectedCallback","removeEventListener","event","target","datePickerWrapper","el","querySelector","contains","classList","closest","tagName","handleManualInput","input","digits","replace","formatted","formatDateInput","emit","parsedDate","parseAndValidateDate","slice","toggleDatePicker","preventDefault","stopPropagation","datePickerDropdown","rect","getBoundingClientRect","viewportHeight","window","innerHeight","bottom","availableHeight","top","style","maxHeight","overflowY","handleDateSelect","String","padStart","formattedDate","toggleYearPicker","currentYear","Math","floor","handleYearRangeChange","direction","newStart","max","min","handleYearSelect","currentMonth","newDate","renderDatePicker","today","monthNames","daysInMonth","firstDayOfMonth","getDay","handleMonthChange","newMonth","handleMonthFocus","handleMonthBlur","renderCalendarDays","days","i","push","h","isSelected","isToday","type","class","onClick","e","weeks","week","forEach","index","years","startYear","endYear","yearCount","isPrevDisabled","isNextDisabled","disabled","map","onInput","onFocus","onBlur","selected","render","key","id","maxLength","autocomplete","xmlns","width","height","viewBox","fill","stroke","x","y","rx","ry","x1","y1","x2","y2","devLog","environment","message","args","Environment","LOCALDEVELOPMENT","STAGING","console","log","async","getMfaStatus","operationsToken","userScopedAccessToken","mfainquiryId","PRODUCTION","apiConfig","getApiConfig","url","BASE_URL","RELATIVE_URLS","GET_MFA_STATUS","encodeURIComponent","method","headers","Authorization","substring","response","fetch","status","statusText","responseData","json","success","ok","error","data","Error","stack","undefined","resendMfaLink","requestBody","RESEND_MFA_LINK","body","JSON","stringify","saveCardOnMfaSuccess","SAVE_CARD_ON_MFA_SUCCESS","saveBankOnMfaSuccess","SAVE_BANK_ON_MFA_SUCCESS","buildResendMfaLinkPayload","addRequestPayload","initialMfaResponse","firstName","payorInformation","lastName","dateofBirth","emailAddress","contactInformation","phoneNumber","address","addressLine1","billingAddress","addressLine2","city","provinceOrStateCode","postalCode","countryCode","inquiryCorrelationId","InquiryCorrelationId","buildIdentityVerificationInformation","mfaData","newInquiryId","mfaStatus","trustLevel","TrustLevel","inquiryId","MfaInquiryId","isAddressVerified","IsAddressValidationFailed","buildPayorInformation","requestPayload","validateAddress","identityVerificationInformation","buildBillingAddress","buildSaveCardOnMfaSuccessPayload","addCardRequestPayload","accountReferenceId","cardNumber","expirationMonth","expirationYear","buildSaveBankOnMfaSuccessPayload","addBankRequestPayload","accountNumber","routingNumber","bankAccountType","mfaModelPopUpModuleCss","MfaModelPopUP","onClose","mfaResponse","requestType","time","isRunning","currentInquiryId","timer","countdownIntervalId","pollingIntervalId","errorHandler","accountSubmissionSuccess","noOfAttempts","timeoutId","successEvent","handleIsRunningTrue","handleStart","handleIsRunningFalse","handleStop","startCountdownTimer","scheduleMfaStatusPolling","stopCountdownTimer","clearPollingTimers","componentWillLoad","getMfaStatusAndSetInterval","setInterval","msg","handleCancel","recurringInterval","startInterval","handleMfaResponseChanged","MFAStatusEnum","Pass","payload","Failed","handleAccountSubmissionSuccessChanged","resultMessage","paymentInstrument","clearInterval","clearTimeout","handleResendLinkClick","mfaPoolSettings","MfaPoolSettings","mobileNumberLastFourDigits","mobile","start","Number","recurring","formatTime","seconds","minutes","remainingSeconds","getAttemptLabel"],"sources":["src/components/datePicker/date-picker.css?tag=date-picker","src/components/datePicker/date-picker.tsx","src/utils/mfaService.ts","src/components/mfaModelPopUp/mfaPayloadBuilder.ts","src/components/mfaModelPopUp/mfaModelPopUp.module.scss?tag=mfa-model-popup&encapsulation=shadow","src/components/mfaModelPopUp/mfaModelPopUp.tsx"],"sourcesContent":["/* Date Picker Wrapper */\r\n.date-picker-wrapper {\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.date-picker-wrapper input {\r\n  width: 100%;\r\n  padding-right: 40px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* Calendar Icon Button */\r\n.date-picker-icon {\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  background: none !important;\r\n  border: none;\r\n  cursor: pointer;\r\n  padding: 5px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #666;\r\n  width: auto !important;\r\n  height: auto !important;\r\n  min-width: auto !important;\r\n}\r\n\r\n.date-picker-icon:hover {\r\n  color: #333;\r\n  background: none !important;\r\n  transform: translateY(-50%);\r\n}\r\n\r\n.date-picker-icon:focus {\r\n  outline: none;\r\n  background: none !important;\r\n}\r\n\r\n.date-picker-icon:active {\r\n  background: none !important;\r\n  transform: translateY(-50%);\r\n}\r\n\r\n/* Date Picker Dropdown */\r\n.date-picker-dropdown {\r\n  position: absolute;\r\n  bottom: 100%;\r\n  left: 0;\r\n  margin-bottom: 4px;\r\n  background: white;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.1);\r\n  z-index: 1000;\r\n  width: 320px !important;\r\n  min-width: 320px !important;\r\n  max-width: 320px !important;\r\n  max-height: 400px;\r\n  overflow: hidden;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* Date Picker Header */\r\n.date-picker-header {\r\n  padding: 12px;\r\n  border-bottom: 1px solid #eee;\r\n  background-color: #f8f9fa;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.date-picker-selectors {\r\n  display: flex;\r\n  gap: 8px;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.date-picker-month-select {\r\n  flex: 1;\r\n  min-width: 120px;\r\n  max-width: 180px;\r\n  padding: 6px 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  background-color: white;\r\n  cursor: pointer;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.date-picker-month-select:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.date-picker-month-select:focus {\r\n  outline: 2px solid #007bff;\r\n  outline-offset: 2px;\r\n}\r\n\r\n.date-picker-year-button {\r\n  padding: 6px 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  background-color: white;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  white-space: nowrap;\r\n}\r\n\r\n.date-picker-year-button:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.date-picker-year-button:focus {\r\n  outline: 2px solid #007bff;\r\n  outline-offset: 2px;\r\n}\r\n\r\n/* Year Picker Navigation */\r\n.year-picker-navigation {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 8px;\r\n  width: 100%;\r\n}\r\n\r\n.year-nav-button {\r\n  width: 40px;\r\n  height: 40px;\r\n  flex-shrink: 0;\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  background-color: white;\r\n  cursor: pointer;\r\n  font-size: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.year-nav-button:hover:not(:disabled) {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.year-nav-button:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.year-nav-button:active:not(:disabled) {\r\n  background-color: #e9ecef;\r\n}\r\n\r\n.year-nav-button:focus {\r\n  outline: 2px solid #007bff;\r\n  outline-offset: 2px;\r\n}\r\n\r\n.year-range-button {\r\n  flex: 1;\r\n  height: 40px;\r\n  padding: 8px 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  background-color: white;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.year-range-button:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.year-range-button:active {\r\n  background-color: #e9ecef;\r\n}\r\n\r\n/* Calendar Wrapper */\r\n.date-picker-calendar-wrapper {\r\n  max-height: 280px;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* Calendar Table */\r\n.date-picker-calendar {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  table-layout: fixed;\r\n}\r\n\r\n.date-picker-calendar thead th {\r\n  padding: 8px;\r\n  text-align: center;\r\n  font-weight: 600;\r\n  color: #666;\r\n  font-size: 12px;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.date-picker-calendar tbody td {\r\n  padding: 2px;\r\n  text-align: center;\r\n}\r\n\r\n.date-picker-day {\r\n  width: 100%;\r\n  padding: 8px;\r\n  border: none;\r\n  background: none;\r\n  cursor: pointer;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.date-picker-day:hover {\r\n  background-color: #e9ecef;\r\n}\r\n\r\n.date-picker-day.selected {\r\n  background-color: #007bff;\r\n  color: white;\r\n}\r\n\r\n.date-picker-day.selected:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.date-picker-day.today {\r\n  border: 2px solid #007bff;\r\n  font-weight: bold;\r\n}\r\n\r\n/* Year Picker Grid */\r\n.year-picker-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 8px;\r\n  padding: 12px;\r\n  max-height: 320px;\r\n  overflow-y: auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.year-picker-item {\r\n  padding: 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  background-color: white;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.year-picker-item:hover {\r\n  background-color: #e9ecef;\r\n}\r\n\r\n.year-picker-item.selected {\r\n  background-color: #007bff;\r\n  color: white;\r\n  border-color: #007bff;\r\n}\r\n\r\n.year-picker-item.selected:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.year-picker-item.today {\r\n  border: 2px solid #007bff;\r\n  font-weight: bold;\r\n}\r\n","import { Component, h, Prop, State, Element, Event, EventEmitter, Watch } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'date-picker',\r\n  styleUrl: 'date-picker.css',\r\n  shadow: false,\r\n})\r\nexport class DatePicker {\r\n  @Element() el: HTMLElement;\r\n\r\n  @Prop() value: string = '';\r\n  @Prop() placeholder: string = 'MM/DD/YYYY';\r\n  @Prop() inputId: string = 'date-input';\r\n  @Prop() minAge?: number; // Optional: minimum age requirement (e.g., 18)\r\n\r\n  @Event({ eventName: 'dateChange', bubbles: true, composed: true })\r\n  dateChange: EventEmitter<string>;\r\n\r\n  @State() inputValue: string = '';\r\n  @State() isDatePickerOpen: boolean = false;\r\n  @State() selectedDate: Date | null = null;\r\n  @State() isYearPickerOpen: boolean = false;\r\n  @State() isSelectingMonth: boolean = false;\r\n  @State() isSelectingYear: boolean = false;\r\n  @State() yearRangeStart: number = 1900;\r\n\r\n  private _isOpeningYearPicker: boolean = false;\r\n  private _isOpeningMonthSelect: boolean = false;\r\n\r\n  @Watch('value')\r\n  valueChanged(newValue: string) {\r\n    this.inputValue = newValue;\r\n    \r\n    // Update selectedDate when value prop changes\r\n    if (newValue && newValue.length === 10) {\r\n      const parts = newValue.split('/');\r\n      if (parts.length === 3) {\r\n        const month = parseInt(parts[0], 10) - 1;\r\n        const day = parseInt(parts[1], 10);\r\n        const year = parseInt(parts[2], 10);\r\n        \r\n        if (year >= 1900 && year <= 2099) {\r\n          const date = new Date(year, month, day);\r\n          if (date.getMonth() === month && date.getDate() === day && date.getFullYear() === year) {\r\n            this.selectedDate = date;\r\n          }\r\n        }\r\n      }\r\n    } else if (!newValue) {\r\n      this.selectedDate = null;\r\n    }\r\n  }\r\n\r\n  componentDidLoad() {\r\n    // Initialize inputValue with value prop\r\n    this.inputValue = this.value;\r\n    \r\n    setTimeout(() => {\r\n      document.addEventListener('click', this.handleClickOutside, false);\r\n    }, 300);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    document.removeEventListener('click', this.handleClickOutside, false);\r\n  }\r\n\r\n  private readonly handleClickOutside = (event: MouseEvent) => {\r\n    if (!this.isDatePickerOpen) return;\r\n    \r\n    if (this._isOpeningYearPicker || this._isOpeningMonthSelect) {\r\n      return;\r\n    }\r\n    \r\n    if (this.isSelectingMonth || this.isSelectingYear) {\r\n      return;\r\n    }\r\n    \r\n    const target = event.target as HTMLElement;\r\n    const datePickerWrapper = this.el.querySelector('.date-picker-wrapper');\r\n    \r\n    if (!datePickerWrapper) return;\r\n    \r\n    if (datePickerWrapper.contains(target)) {\r\n      return;\r\n    }\r\n    \r\n    if (target.classList.contains('year-picker-item') ||\r\n        target.classList.contains('year-range-button') ||\r\n        target.classList.contains('date-picker-year-button') ||\r\n        target.closest('.year-picker-grid') ||\r\n        target.closest('.year-range-button') ||\r\n        target.closest('.date-picker-year-button')) {\r\n      return;\r\n    }\r\n    \r\n    if (target.tagName === 'SELECT' || \r\n        target.tagName === 'OPTION' ||\r\n        target.closest('select')) {\r\n      return;\r\n    }\r\n    \r\n    this.isDatePickerOpen = false;\r\n    this.isYearPickerOpen = false;\r\n  };\r\n\r\n  private readonly handleManualInput = (event: Event) => {\r\n    const input = event.target as HTMLInputElement;\r\n    let value = input.value;\r\n\r\n    // Remove all non-digit characters\r\n    let digits = value.replace(/\\D/g, '');\r\n\r\n    // Auto-format as MM/DD/YYYY\r\n    let formatted = this.formatDateInput(digits);\r\n\r\n    // Update input value with formatted date\r\n    input.value = formatted;\r\n    this.inputValue = formatted;\r\n\r\n    // Emit the formatted value\r\n    this.dateChange.emit(formatted);\r\n\r\n    // Try to parse and update selectedDate if complete and valid\r\n    if (formatted.length === 10) {\r\n      const parsedDate = this.parseAndValidateDate(formatted);\r\n      if (parsedDate) {\r\n        this.selectedDate = parsedDate;\r\n      }\r\n    }\r\n  };\r\n\r\n  private formatDateInput(digits: string): string {\r\n    let formatted = '';\r\n    if (digits.length > 0) {\r\n      // Add month (first 2 digits)\r\n      formatted = digits.slice(0, 2);\r\n\r\n      if (digits.length >= 3) {\r\n        // Add slash after month and day (next 2 digits)\r\n        formatted += '/' + digits.slice(2, 4);\r\n      }\r\n\r\n      if (digits.length >= 5) {\r\n        // Add slash after day and year (last 4 digits)\r\n        formatted += '/' + digits.slice(4, 8);\r\n      }\r\n    }\r\n    return formatted;\r\n  }\r\n\r\n  private parseAndValidateDate(formatted: string): Date | null {\r\n    const parts = formatted.split('/');\r\n    if (parts.length !== 3) return null;\r\n    const month = parseInt(parts[0], 10) - 1;\r\n    const day = parseInt(parts[1], 10);\r\n    const year = parseInt(parts[2], 10);\r\n\r\n    // Basic validation before creating date\r\n    if (month < 0 || month > 11 || day < 1 || day > 31 || year < 1900 || year > 2099) {\r\n      return null;\r\n    }\r\n    const date = new Date(year, month, day);\r\n    // Verify the date is valid (handles invalid dates like 02/30/2020)\r\n    if (date.getMonth() === month && date.getDate() === day && date.getFullYear() === year) {\r\n      return date;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  toggleDatePicker = (event?: Event) => {\r\n    if (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n    \r\n    this.isDatePickerOpen = !this.isDatePickerOpen;\r\n    \r\n    if (this.isDatePickerOpen) {\r\n      setTimeout(() => {\r\n        const datePickerDropdown = this.el.querySelector('.date-picker-dropdown');\r\n        if (datePickerDropdown) {\r\n          const rect = datePickerDropdown.getBoundingClientRect();\r\n          const viewportHeight = window.innerHeight;\r\n          \r\n          if (rect.bottom > viewportHeight) {\r\n            const availableHeight = viewportHeight - rect.top - 20;\r\n            (datePickerDropdown as HTMLElement).style.maxHeight = `${availableHeight}px`;\r\n            (datePickerDropdown as HTMLElement).style.overflowY = 'auto';\r\n          }\r\n        }\r\n      }, 50);\r\n    }\r\n  };\r\n\r\n  handleDateSelect = (date: Date, event?: Event) => {\r\n    if (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n    this.selectedDate = date;\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const year = date.getFullYear();\r\n    const formattedDate = `${month}/${day}/${year}`;\r\n    \r\n    this.dateChange.emit(formattedDate);\r\n    this.isDatePickerOpen = false;\r\n    this.isYearPickerOpen = false;\r\n  };\r\n\r\n  toggleYearPicker = (event?: Event) => {\r\n    if (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n    \r\n    this._isOpeningYearPicker = true;\r\n    this.isSelectingYear = true;\r\n    this.isYearPickerOpen = !this.isYearPickerOpen;\r\n    \r\n    if (this.isYearPickerOpen) {\r\n      const currentYear = this.selectedDate \r\n        ? this.selectedDate.getFullYear() \r\n        : new Date().getFullYear() - (this.minAge || 18);\r\n      this.yearRangeStart = Math.floor((currentYear - 1900) / 18) * 18 + 1900;\r\n    }\r\n    \r\n    if (!this.isYearPickerOpen) {\r\n      setTimeout(() => {\r\n        this.isSelectingYear = false;\r\n        this._isOpeningYearPicker = false;\r\n      }, 300);\r\n    } else {\r\n      setTimeout(() => {\r\n        this._isOpeningYearPicker = false;\r\n      }, 500);\r\n    }\r\n  };\r\n\r\n  handleYearRangeChange = (direction: 'prev' | 'next', event?: Event) => {\r\n    if (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n    \r\n    if (direction === 'prev') {\r\n      const newStart = this.yearRangeStart - 18;\r\n      this.yearRangeStart = Math.max(1900, newStart);\r\n    } else {\r\n      const newStart = this.yearRangeStart + 18;\r\n      this.yearRangeStart = Math.min(2082, newStart);\r\n    }\r\n  };\r\n\r\n  handleYearSelect = (year: number, event?: Event) => {\r\n    if (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n    const currentMonth = this.selectedDate ? this.selectedDate.getMonth() : new Date().getMonth();\r\n    const newDate = new Date(year, currentMonth, 1);\r\n    this.selectedDate = newDate;\r\n    this.isYearPickerOpen = false;\r\n    \r\n    setTimeout(() => {\r\n      this.isSelectingYear = false;\r\n      this._isOpeningYearPicker = false;\r\n    }, 300);\r\n  };\r\n\r\n  renderDatePicker() {\r\n    if (!this.isDatePickerOpen) return null;\r\n\r\n    const today = new Date();\r\n    const currentMonth = this.selectedDate ? this.selectedDate.getMonth() : today.getMonth();\r\n    const currentYear = this.selectedDate ? this.selectedDate.getFullYear() : today.getFullYear() - (this.minAge || 18);\r\n    \r\n    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();\r\n    const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();\r\n\r\n    const handleMonthChange = (event: Event) => {\r\n      const target = event.target as HTMLSelectElement;\r\n      const newMonth = parseInt(target.value, 10);\r\n      const newDate = new Date(currentYear, newMonth, 1);\r\n      this.selectedDate = newDate;\r\n      setTimeout(() => {\r\n        this.isSelectingMonth = false;\r\n        this._isOpeningMonthSelect = false;\r\n      }, 100);\r\n    };\r\n\r\n    const handleMonthFocus = () => {\r\n      this._isOpeningMonthSelect = true;\r\n      this.isSelectingMonth = true;\r\n    };\r\n\r\n    const handleMonthBlur = () => {\r\n      setTimeout(() => {\r\n        this.isSelectingMonth = false;\r\n        this._isOpeningMonthSelect = false;\r\n      }, 200);\r\n    };\r\n\r\n    const renderCalendarDays = () => {\r\n      const days = [];\r\n      \r\n      for (let i = 0; i < firstDayOfMonth; i++) {\r\n        days.push(<td></td>);\r\n      }\r\n      \r\n      for (let day = 1; day <= daysInMonth; day++) {\r\n        const date = new Date(currentYear, currentMonth, day);\r\n        const isSelected = this.selectedDate && \r\n          this.selectedDate.getDate() === day && \r\n          this.selectedDate.getMonth() === currentMonth && \r\n          this.selectedDate.getFullYear() === currentYear;\r\n        \r\n        const isToday = today.getDate() === day && \r\n          today.getMonth() === currentMonth && \r\n          today.getFullYear() === currentYear;\r\n        \r\n        days.push(\r\n          <td>\r\n            <button\r\n              type=\"button\"\r\n              class={`date-picker-day ${isSelected ? 'selected' : ''} ${isToday ? 'today' : ''}`}\r\n              onClick={(e) => this.handleDateSelect(date, e)}\r\n            >\r\n              {day}\r\n            </button>\r\n          </td>\r\n        );\r\n      }\r\n      \r\n      const weeks = [];\r\n      let week = [];\r\n      days.forEach((day, index) => {\r\n        week.push(day);\r\n        if ((index + 1) % 7 === 0 || index === days.length - 1) {\r\n          while (week.length < 7) {\r\n            week.push(<td></td>);\r\n          }\r\n          weeks.push(<tr>{week}</tr>);\r\n          week = [];\r\n        }\r\n      });\r\n      \r\n      return weeks;\r\n    };\r\n\r\n    if (this.isYearPickerOpen) {\r\n      const years = [];\r\n      const startYear = this.yearRangeStart;\r\n      const endYear = Math.min(startYear + 17, 2099);\r\n      const yearCount = endYear - startYear + 1;\r\n\r\n      for (let i = 0; i < yearCount; i++) {\r\n        const year = startYear + i;\r\n        if (year <= 2099) {\r\n          years.push(year);\r\n        }\r\n      }\r\n\r\n      const isPrevDisabled = this.yearRangeStart <= 1900;\r\n      const isNextDisabled = this.yearRangeStart >= 2082;\r\n\r\n      return (\r\n        <div class=\"date-picker-dropdown\">\r\n          <div class=\"date-picker-header\">\r\n            <div class=\"year-picker-navigation\">\r\n              <button \r\n                type=\"button\" \r\n                class=\"year-nav-button\" \r\n                onClick={(e) => this.handleYearRangeChange('prev', e)}\r\n                disabled={isPrevDisabled}\r\n              >\r\n                ‹\r\n              </button>\r\n              <button type=\"button\" class=\"year-range-button\" onClick={(e) => this.toggleYearPicker(e)}>\r\n                {startYear} - {Math.min(startYear + 17, 2099)}\r\n              </button>\r\n              <button \r\n                type=\"button\" \r\n                class=\"year-nav-button\" \r\n                onClick={(e) => this.handleYearRangeChange('next', e)}\r\n                disabled={isNextDisabled}\r\n              >\r\n                ›\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class=\"year-picker-grid\">\r\n            {years.map(year => (\r\n              <button\r\n                type=\"button\"\r\n                class={`year-picker-item ${year === currentYear ? 'selected' : ''} ${year === today.getFullYear() ? 'today' : ''}`}\r\n                onClick={(e) => this.handleYearSelect(year, e)}\r\n              >\r\n                {year}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div class=\"date-picker-dropdown\">\r\n        <div class=\"date-picker-header\">\r\n          <div class=\"date-picker-selectors\">\r\n            <select \r\n              class=\"date-picker-month-select\" \r\n              onInput={handleMonthChange}\r\n              onFocus={handleMonthFocus}\r\n              onBlur={handleMonthBlur}\r\n            >\r\n              {monthNames.map((month, index) => (\r\n                <option value={index} selected={index === currentMonth}>{month}</option>\r\n              ))}\r\n            </select>\r\n            <button type=\"button\" class=\"date-picker-year-button\" onClick={(e) => this.toggleYearPicker(e)}>\r\n              {currentYear}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class=\"date-picker-calendar-wrapper\">\r\n          <table class=\"date-picker-calendar\">\r\n            <thead>\r\n              <tr>\r\n                <th>S</th>\r\n                <th>M</th>\r\n                <th>T</th>\r\n                <th>W</th>\r\n                <th>T</th>\r\n                <th>F</th>\r\n                <th>S</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {renderCalendarDays()}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"date-picker-wrapper\">\r\n        <input\r\n          type=\"text\"\r\n          id={this.inputId}\r\n          placeholder={this.placeholder}\r\n          value={this.inputValue}\r\n          onInput={(e) => this.handleManualInput(e)}\r\n          maxLength={10}\r\n          autocomplete=\"off\"\r\n        />\r\n        <button type=\"button\" class=\"date-picker-icon\" onClick={(e) => this.toggleDatePicker(e)}>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n            <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\r\n            <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line>\r\n            <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line>\r\n            <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line>\r\n          </svg>\r\n        </button>\r\n        {this.renderDatePicker()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { ResendMfaLinkRequest, SaveBankOnMfaSuccessRequest, SaveCardOnMfaSuccessRequest } from \"../components/mfaModelPopUp/mfaPayloadBuilder\";\r\nimport { Environment, getApiConfig } from \"../config\";\r\n\r\n\r\n// Helper function to conditionally log only in development\r\nconst devLog = (environment: Environment, message: string, ...args: any[]) => {\r\n  if (environment === Environment.LOCALDEVELOPMENT || environment === Environment.STAGING) {\r\n    console.log(message, ...args);\r\n  }\r\n};\r\n\r\n\r\nexport async function getMfaStatus(\r\n  operationsToken: string,\r\n  userScopedAccessToken: string,\r\n  mfainquiryId: string,\r\n  environment: Environment = Environment.PRODUCTION\r\n): Promise<any> {\r\n  const apiConfig = getApiConfig(environment);\r\n  const url = `${apiConfig.BASE_URL}${apiConfig.RELATIVE_URLS.GET_MFA_STATUS}?mfaInquiryId=${encodeURIComponent(mfainquiryId)}`;\r\n\r\n\r\n  devLog(environment, 'Get MFA Status Request Details:', {\r\n    url,\r\n    method: 'GET',\r\n    headers: {\r\n      'Authorization': `Bearer ${operationsToken.substring(0, 5)}...${operationsToken.substring(operationsToken.length - 5)}`,\r\n      'X-SW-API-KEY': `${userScopedAccessToken.substring(0, 5)}...${userScopedAccessToken.substring(userScopedAccessToken.length - 5)}`,\r\n    },\r\n  });\r\n\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${operationsToken}`,\r\n        'X-SW-API-KEY': userScopedAccessToken,\r\n      },\r\n\r\n    });\r\n\r\n    devLog(environment, 'Get MFA Status Response Status:', response.status, response.statusText);\r\n\r\n    const responseData = await response.json();\r\n    devLog(environment, 'Get MFA Status Response Data:', responseData);\r\n\r\n    if (responseData.status === 400) {\r\n      devLog(environment, 'Validation Error Response:', responseData);\r\n      return { success: false, message: \"We couldn't process your request at the moment. Please try again later or use a different payment method.\" };\r\n    }\r\n\r\n    if (!response.ok) {\r\n      console.error('API Error Response:', {\r\n        status: response.status,\r\n        statusText: response.statusText,\r\n        data: responseData\r\n      });\r\n      return { success: false, message: 'We are unable to retrieve your MFA status at the moment. Please try again later' };\r\n    }\r\n\r\n    devLog(environment, 'MFA status fetched successfully:', responseData);\r\n    return { success: true, data: responseData };\r\n  } catch (error) {\r\n    console.error('Error fetching MFA status:', {\r\n      error,\r\n      message: error instanceof Error ? error.message : 'Unknown error',\r\n      stack: error instanceof Error ? error.stack : undefined\r\n    });\r\n    return { success: false, message: 'Unexpected error. Please refresh or try again later.' };\r\n  }\r\n}\r\n\r\nexport async function resendMfaLink(\r\n  operationsToken: string,\r\n  userScopedAccessToken: string,\r\n  requestBody: ResendMfaLinkRequest,\r\n  environment: Environment = Environment.PRODUCTION\r\n): Promise<any> {\r\n  const apiConfig = getApiConfig(environment);\r\n  const url = `${apiConfig.BASE_URL}${apiConfig.RELATIVE_URLS.RESEND_MFA_LINK}`;\r\n\r\n  devLog(environment, 'Resend MFA Link Request Details:', {\r\n    url,\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${operationsToken.substring(0, 5)}...${operationsToken.substring(operationsToken.length - 5)}`,\r\n      'X-SW-API-KEY': `${userScopedAccessToken.substring(0, 5)}...${userScopedAccessToken.substring(userScopedAccessToken.length - 5)}`,\r\n    },\r\n    body: JSON.stringify(requestBody)\r\n  });\r\n\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${operationsToken}`,\r\n        'X-SW-API-KEY': userScopedAccessToken,\r\n      },\r\n      body: JSON.stringify(requestBody),\r\n    });\r\n\r\n    devLog(environment, 'Resend MFA Link Response Status:', response.status, response.statusText);\r\n\r\n    const responseData = await response.json();\r\n    devLog(environment, 'Resend MFA Link Response Data:', responseData);\r\n\r\n    if (responseData.status === 400) {\r\n      devLog(environment, 'Validation Error Response:', responseData);\r\n      return { success: false, message: \"Unable to resend MFA link at the moment. Please try again later\" };\r\n    }\r\n\r\n    if (!response.ok) {\r\n      console.error('API Error Response:', {\r\n        status: response.status,\r\n        statusText: response.statusText,\r\n        data: responseData\r\n      });\r\n      return { success: false, message: 'Failed to resend MFA link. Please refresh and try again' };\r\n    }\r\n    devLog(environment, 'The MFA link has been resent successfully:', responseData);\r\n    return { success: true, data: responseData };\r\n  } catch (error) {\r\n    console.error('Error resending MFA link:', {\r\n      error,\r\n      message: error instanceof Error ? error.message : 'Unknown error',\r\n      stack: error instanceof Error ? error.stack : undefined\r\n    });\r\n    return { success: false, message: 'Unexpected error occurred while resending MFA link. Please try again later.' };\r\n  }\r\n}\r\n\r\nexport async function saveCardOnMfaSuccess(\r\n  operationsToken: string,\r\n  userScopedAccessToken: string,\r\n  requestBody: SaveCardOnMfaSuccessRequest,\r\n  environment: Environment = Environment.PRODUCTION\r\n): Promise<any> {\r\n  const apiConfig = getApiConfig(environment);\r\n  const url = `${apiConfig.BASE_URL}${apiConfig.RELATIVE_URLS.SAVE_CARD_ON_MFA_SUCCESS}`;\r\n\r\n  devLog(environment, \"Save Card On MFA Success Request Details:\", {\r\n    url,\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\": `Bearer ${operationsToken.substring(0, 5)}...${operationsToken.substring(operationsToken.length - 5)}`,\r\n      \"X-SW-API-KEY\": `${userScopedAccessToken.substring(0, 5)}...${userScopedAccessToken.substring(userScopedAccessToken.length - 5)}`\r\n    },\r\n    body: JSON.stringify(requestBody)\r\n  });\r\n\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${operationsToken}`,\r\n        \"X-SW-API-KEY\": userScopedAccessToken\r\n      },\r\n      body: JSON.stringify(requestBody)\r\n    });\r\n\r\n    devLog(environment, \"Save Card On MFA Success Response Status:\", response.status, response.statusText);\r\n\r\n    const responseData = await response.json();\r\n    devLog(environment, \"Save Card On MFA Success Response Data:\", responseData);\r\n\r\n    if (responseData.status === 400) {\r\n      devLog(environment, \"Validation Error Response:\", responseData);\r\n      return {\r\n        success: false,\r\n        message: \"We couldn't save your card details at the moment. Please try again later.\"\r\n      };\r\n    }\r\n\r\n    if (!response.ok) {\r\n      console.error(\"API Error Response:\", {\r\n        status: response.status,\r\n        statusText: response.statusText,\r\n        data: responseData\r\n      });\r\n      return { success: false, message: \"Failed to save card details. Please refresh and try again.\" };\r\n    }\r\n    devLog(environment, 'Save Card on MFA success executed successfully:', responseData);\r\n    return { success: true, data: responseData };\r\n  } catch (error) {\r\n    console.error(\"Error saving card on MFA success:\", {\r\n      error,\r\n      message: error instanceof Error ? error.message : \"Unknown error\",\r\n      stack: error instanceof Error ? error.stack : undefined\r\n    });\r\n    return { success: false, message: \"Unexpected error occurred while saving card details. Please try again later.\" };\r\n  }\r\n}\r\n\r\nexport async function saveBankOnMfaSuccess(\r\n  operationsToken: string,\r\n  userScopedAccessToken: string,\r\n  requestBody: SaveBankOnMfaSuccessRequest,\r\n  environment: Environment = Environment.PRODUCTION\r\n): Promise<any> {\r\n  const apiConfig = getApiConfig(environment);\r\n  const url = `${apiConfig.BASE_URL}${apiConfig.RELATIVE_URLS.SAVE_BANK_ON_MFA_SUCCESS}`;\r\n\r\n  devLog(environment, \"Save Bank On MFA Success Request Details:\", {\r\n    url,\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\": `Bearer ${operationsToken.substring(0, 5)}...${operationsToken.substring(operationsToken.length - 5)}`,\r\n      \"X-SW-API-KEY\": `${userScopedAccessToken.substring(0, 5)}...${userScopedAccessToken.substring(userScopedAccessToken.length - 5)}`\r\n    },\r\n    body: JSON.stringify(requestBody)\r\n  });\r\n\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${operationsToken}`,\r\n        \"X-SW-API-KEY\": userScopedAccessToken\r\n      },\r\n      body: JSON.stringify(requestBody)\r\n    });\r\n\r\n    devLog(environment, \"Save Bank On MFA Success Response Status:\", response.status, response.statusText);\r\n\r\n    const responseData = await response.json();\r\n    devLog(environment, \"Save Bank On MFA Success Response Data:\", responseData);\r\n\r\n    if (responseData.status === 400) {\r\n      devLog(environment, \"Validation Error Response:\", responseData);\r\n      return {\r\n        success: false,\r\n        message: \"We couldn't save your bank details at the moment. Please try again later.\"\r\n      };\r\n    }\r\n\r\n    if (!response.ok) {\r\n      console.error(\"API Error Response:\", {\r\n        status: response.status,\r\n        statusText: response.statusText,\r\n        data: responseData\r\n      });\r\n      return { success: false, message: \"Failed to save bank details. Please refresh and try again.\" };\r\n    }\r\n    devLog(environment, 'Save Bank on MFA success executed successfully:', responseData);\r\n    return { success: true, data: responseData };\r\n  } catch (error) {\r\n    console.error(\"Error saving bank on MFA success:\", {\r\n      error,\r\n      message: error instanceof Error ? error.message : \"Unknown error\",\r\n      stack: error instanceof Error ? error.stack : undefined\r\n    });\r\n    return { success: false, message: \"Unexpected error occurred while saving bank details. Please try again later.\" };\r\n  }\r\n}","/* -------------------------------------------------------------------------- */\r\n/* ------------------------- Resend MFA Link Payload ------------------------ */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nexport interface Address {\r\n    addressLine1: string;\r\n    addressLine2?: string;\r\n    city: string;\r\n    provinceOrStateCode: string;\r\n    postalCode: string;\r\n    countryCode: string;\r\n}\r\n\r\nexport interface ResendMfaLinkRequest {\r\n    firstName: string;\r\n    lastName: string;\r\n    dateofBirth: string;\r\n    emailAddress: string;\r\n    phoneNumber: string;\r\n    address: Address;\r\n    inquiryCorrelationId: string;\r\n}\r\n\r\nexport function buildResendMfaLinkPayload(\r\n    addRequestPayload: any,       // can be card or bank payload\r\n    initialMfaResponse: any\r\n): ResendMfaLinkRequest {\r\n    return {\r\n        firstName: addRequestPayload?.payorInformation?.firstName,\r\n        lastName: addRequestPayload?.payorInformation?.lastName,\r\n        dateofBirth: addRequestPayload?.payorInformation?.dateofBirth,\r\n        emailAddress: addRequestPayload?.payorInformation?.contactInformation?.emailAddress,\r\n        phoneNumber: addRequestPayload?.payorInformation?.contactInformation?.phoneNumber,\r\n        address: {\r\n            addressLine1: addRequestPayload?.billingAddress?.addressLine1,\r\n            addressLine2: addRequestPayload?.billingAddress?.addressLine2,\r\n            city: addRequestPayload?.billingAddress?.city,\r\n            provinceOrStateCode: addRequestPayload?.billingAddress?.provinceOrStateCode,\r\n            postalCode: addRequestPayload?.billingAddress?.postalCode,\r\n            countryCode: addRequestPayload?.billingAddress?.countryCode,\r\n        },\r\n        inquiryCorrelationId: initialMfaResponse?.data?.InquiryCorrelationId,\r\n    };\r\n}\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/* ------------------- Save Card On MFA Success Payload --------------------- */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nexport interface IdentityVerificationInformation {\r\n    inquiryCorrelationId: string;\r\n    mfaStatus: number;\r\n    trustLevel: number;\r\n    inquiryId: string;\r\n    isAddressVerified: boolean;\r\n}\r\n\r\nexport interface ContactInformation {\r\n    emailAddress: string;\r\n    phoneNumber: string;\r\n}\r\nexport interface PayorInformation {\r\n    firstName: string;\r\n    lastName: string;\r\n    dateofBirth: string;\r\n    validateAddress: boolean;\r\n    contactInformation: ContactInformation;\r\n    identityVerificationInformation: IdentityVerificationInformation;\r\n}\r\nexport interface BillingAddress {\r\n    addressLine1: string;\r\n    addressLine2?: string;\r\n    city: string;\r\n    provinceOrStateCode: string;\r\n    postalCode: string;\r\n    countryCode: string;\r\n}\r\nexport interface SaveCardOnMfaSuccessRequest {\r\n    payorInformation: PayorInformation;\r\n    accountReferenceId: string;\r\n    billingAddress: BillingAddress;\r\n    cardNumber: string;\r\n    expirationMonth: string;\r\n    expirationYear: string;\r\n}\r\n\r\nfunction buildIdentityVerificationInformation(mfaData: any, newInquiryId?: string): IdentityVerificationInformation {\r\n  return {\r\n    inquiryCorrelationId: mfaData?.InquiryCorrelationId,\r\n    mfaStatus: 3,\r\n    trustLevel: mfaData?.TrustLevel,\r\n    inquiryId: newInquiryId || mfaData?.MfaInquiryId,\r\n    isAddressVerified: !mfaData?.IsAddressValidationFailed,\r\n  };\r\n}\r\n \r\nfunction buildPayorInformation(requestPayload: any, mfaData: any, newInquiryId?: string): PayorInformation {\r\n  return {\r\n    firstName: requestPayload?.payorInformation?.firstName,\r\n    lastName: requestPayload?.payorInformation?.lastName,\r\n    dateofBirth: requestPayload?.payorInformation?.dateofBirth,\r\n    validateAddress: requestPayload?.payorInformation?.validateAddress,\r\n    contactInformation: {\r\n      emailAddress: requestPayload?.payorInformation?.contactInformation?.emailAddress,\r\n      phoneNumber: requestPayload?.payorInformation?.contactInformation?.phoneNumber,\r\n    },\r\n    identityVerificationInformation: buildIdentityVerificationInformation(mfaData, newInquiryId),\r\n  };\r\n}\r\n \r\nfunction buildBillingAddress(requestPayload: any): BillingAddress {\r\n  return {\r\n    addressLine1: requestPayload?.billingAddress?.addressLine1,\r\n    addressLine2: requestPayload?.billingAddress?.addressLine2,\r\n    city: requestPayload?.billingAddress?.city,\r\n    provinceOrStateCode: requestPayload?.billingAddress?.provinceOrStateCode,\r\n    postalCode: requestPayload?.billingAddress?.postalCode,\r\n    countryCode: requestPayload?.billingAddress?.countryCode,\r\n  };\r\n}\r\n\r\n// /**\r\n// * Build the SaveCardOnMfaSuccess payload from addCardRequestPayload + initialMfaResponse\r\n// */\r\n\r\nexport function buildSaveCardOnMfaSuccessPayload(\r\n  addCardRequestPayload: any,\r\n  initialMfaResponse: any,\r\n  newInquiryId?: string\r\n): SaveCardOnMfaSuccessRequest {\r\n  const mfaData = initialMfaResponse?.data;\r\n \r\n  return {\r\n    payorInformation: buildPayorInformation(addCardRequestPayload, mfaData, newInquiryId),\r\n    accountReferenceId: addCardRequestPayload?.accountReferenceId,\r\n    billingAddress: buildBillingAddress(addCardRequestPayload),\r\n    cardNumber: addCardRequestPayload?.cardNumber,\r\n    expirationMonth: addCardRequestPayload?.expirationMonth,\r\n    expirationYear: addCardRequestPayload?.expirationYear,\r\n  };\r\n}\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/* ------------------- Save Bank On MFA Success Payload --------------------- */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nexport interface SaveBankOnMfaSuccessRequest {\r\n    payorInformation: PayorInformation;\r\n    accountReferenceId: string;\r\n    billingAddress: BillingAddress;\r\n    accountNumber: string;\r\n    routingNumber: string;\r\n    bankAccountType: string;\r\n}\r\n\r\n// /**\r\n// * Build the SaveBankOnMfaSuccess payload from addBankRequestPayload + initialMfaResponse\r\n// */\r\n \r\nexport function buildSaveBankOnMfaSuccessPayload(\r\n  addBankRequestPayload: any,\r\n  initialMfaResponse: any,\r\n  newInquiryId?: string\r\n): SaveBankOnMfaSuccessRequest {\r\n  const mfaData = initialMfaResponse?.data;\r\n \r\n  return {\r\n    payorInformation: buildPayorInformation(addBankRequestPayload, mfaData, newInquiryId),\r\n    accountReferenceId: addBankRequestPayload?.accountReferenceId,\r\n    billingAddress: buildBillingAddress(addBankRequestPayload),\r\n    accountNumber: addBankRequestPayload?.accountNumber,\r\n    routingNumber: addBankRequestPayload?.routingNumber,\r\n    bankAccountType: addBankRequestPayload?.bankAccountType,\r\n  };\r\n}","$--button-font-family : 'Inter',sans-serif;\r\n$-button-font-size: 14px;\r\n$-button-font-weight: 700;\r\n$-button-line-height: 14px;\r\n$-small-hero-font-family : 'p22-mackinac-pro';\r\n$-small-hero-font-weight : 800;\r\n$-small-hero-font-size : 24px;\r\n$-border-primary : #e9eaeb;\r\n$-font-family :'Inter',sans-serif;\r\n$-text-primary :#282829;\r\n$-danger: #d01a1f;\r\n$-button-secondary : #FFFFFF;\r\n$-button-secondary-text : #282829;\r\n$-button-primary : #282829;\r\n$-button-primary-text :#FFFFFF;\r\n$-button-disabled : #e9eaeb;\r\n$-button-disabled-text : #9ba3a7;\r\n\r\n%btn {\r\n  background-image: none;\r\n  border-radius: 12px;\r\n  box-shadow: none;\r\n  box-sizing: border-box;\r\n  font-family: $--button-font-family;\r\n  font-size: $-button-font-size;\r\n  font-weight: $-button-font-weight ;\r\n  height: 48px;\r\n  line-height: $-button-line-height;\r\n  padding: 16px;\r\n  text-align: center;\r\n  text-shadow: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.popup {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 999;\r\n}\r\n\r\n.action-modal {\r\n  position: absolute;\r\n  top: 80px;\r\n  border-radius: 12px;\r\n  background: white;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n  opacity: 1;\r\n  padding: 40px;\r\n\r\n  .modal-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 24px;\r\n    width: 237px;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  .modal-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding-bottom: 14px;\r\n    border-bottom: 1px solid $-border-primary;\r\n\r\n    h3 {\r\n      font-family: $-small-hero-font-family;\r\n      font-weight: $-small-hero-font-weight;\r\n      font-size: $-small-hero-font-size;\r\n      margin: 0;\r\n      line-height: 27px;\r\n      color: $-text-primary;\r\n    }\r\n\r\n  }\r\n\r\n  .modal-body {\r\n    padding: 0;\r\n\r\n    .dialogContentText {\r\n      font-family: $-font-family;\r\n      font-weight: 400;\r\n      font-size: 14px;\r\n      color: $-text-primary;\r\n      line-height: 21px;\r\n    }\r\n\r\n    .highlight {\r\n      font-weight: 700;\r\n      font-style: normal;\r\n    }\r\n\r\n    .time-highlight {\r\n      font-weight: 700;\r\n      color: $-danger;\r\n    }\r\n  }\r\n\r\n  .modal-footer {\r\n    background-color: transparent;\r\n    box-shadow: none;\r\n    padding-top: 4px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n\r\n    .button-box {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 14px;\r\n      width: 100%;\r\n\r\n      .secondarybtn {\r\n        @extend %btn;\r\n        background-color: $-button-secondary;\r\n        border: 1.5px solid $-border-primary;\r\n        color: $-button-secondary-text ;\r\n        width: 100%;\r\n      }\r\n\r\n      .primary-btn {\r\n        @extend %btn;\r\n        background-color: $-button-primary;\r\n        border: 1px solid $-button-primary;\r\n        color: $-button-primary-text ;\r\n        width: 100%;\r\n\r\n        &[disabled] {\r\n          background-color: $-button-disabled;\r\n          border-color: $-button-disabled;\r\n          color: $-button-disabled-text;\r\n          cursor: default;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  @media (min-width: 545px) {\r\n    padding: 40px;\r\n\r\n    .modal-container {\r\n      width: 440px;\r\n      margin: 0 auto;\r\n      gap: 24px;\r\n    }\r\n\r\n    .modal-footer {\r\n      align-items: center;\r\n\r\n      .button-box {\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: flex-end;\r\n        gap: 8px;\r\n        width: 100%;\r\n\r\n        .secondarybtn,\r\n        .primary-btn {\r\n          width: fit-content;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}","import { Component, Event, EventEmitter, h, Prop, State, Watch } from '@stencil/core';\r\nimport { Environment } from '../../config';\r\nimport { IMFAResponse, MFAStatusEnum } from '../../interfaces/common';\r\nimport { getMfaStatus, resendMfaLink, saveBankOnMfaSuccess, saveCardOnMfaSuccess } from '../../utils/mfaService';\r\nimport { buildResendMfaLinkPayload, buildSaveBankOnMfaSuccessPayload, buildSaveCardOnMfaSuccessPayload } from './mfaPayloadBuilder';\r\n\r\n@Component({\r\n  tag: 'mfa-model-popup',\r\n  styleUrl: 'mfaModelPopUp.module.scss',\r\n  shadow: true,\r\n})\r\nexport class MfaModelPopUP {\r\n  @Prop() operationsToken: string;\r\n  @Prop() userScopedAccessToken: string;\r\n  @Prop() environment: Environment; // Environment parameter with production default\r\n  @Prop() onClose: () => void;\r\n  @State() mfaResponse: IMFAResponse | null = null;\r\n  @Prop() addRequestPayload: any;\r\n  @Prop() initialMfaResponse: any;\r\n  @Prop() requestType: 'card' | 'bank';\r\n  @State() time: number = 60; // 1 minutes in seconds\r\n  @State() isRunning: boolean = true;\r\n  @State() currentInquiryId: string = '';\r\n  timer: any;\r\n  private countdownIntervalId: any;\r\n  private pollingIntervalId: any;\r\n  @Prop() errorHandler?: (messages: string[]) => void;\r\n  @State() accountSubmissionSuccess: any = null;\r\n  @State() noOfAttempts: number = 2;\r\n  private timeoutId: any;\r\n  @Event() successEvent: EventEmitter<any>;\r\n  \r\n\r\n  @Watch('isRunning')\r\n  handleIsRunningTrue(newValue: boolean) {\r\n    if (newValue === true) {\r\n      this.handleStart();\r\n    }\r\n  }\r\n\r\n  @Watch('isRunning')\r\n  handleIsRunningFalse(newValue: boolean) {\r\n    if (newValue === false) {\r\n      this.handleStop();\r\n    }\r\n  }\r\n\r\n  private handleStart() {\r\n    this.startCountdownTimer();\r\n    this.scheduleMfaStatusPolling();\r\n  }\r\n\r\n  private handleStop() {\r\n    this.stopCountdownTimer();\r\n    this.clearPollingTimers();\r\n  }\r\n\r\n  componentWillLoad() {\r\n    this.currentInquiryId = this.initialMfaResponse?.data?.MfaInquiryId || '';\r\n  }\r\n\r\n  componentDidLoad() {\r\n    if (this.isRunning) {\r\n      this.startCountdownTimer();\r\n      this.scheduleMfaStatusPolling();\r\n    }\r\n  }\r\n\r\n  scheduleMfaStatusPolling() {\r\n    const getMfaStatusAndSetInterval = () => {\r\n      this.pollingIntervalId = setInterval(async () => {\r\n        const response = await getMfaStatus(this.operationsToken, this.userScopedAccessToken, this.currentInquiryId, this.environment);\r\n        if (response.success) {\r\n          this.mfaResponse = response.data as IMFAResponse;\r\n        } else {\r\n          const msg = response.message ?? 'Unexpected error. Please refresh or try again later.';\r\n          // send error up to parent\r\n          if (this.errorHandler) {\r\n            this.errorHandler([msg]);\r\n          }\r\n          // stop polling when error occurs\r\n          this.handleCancel();\r\n        }\r\n      }, this.recurringInterval * 1000);\r\n    };\r\n\r\n    this.timeoutId = setTimeout(() => {\r\n      getMfaStatusAndSetInterval();\r\n    }, this.startInterval * 1000);\r\n  }\r\n\r\n  @Watch('mfaResponse')\r\n  async handleMfaResponseChanged(newValue: IMFAResponse | null) {\r\n    if (!newValue) return;\r\n\r\n    if (newValue.mfaStatus === MFAStatusEnum.Pass) {\r\n      this.clearPollingTimers();\r\n\r\n      let payload;\r\n      let response;\r\n\r\n      if (this.requestType === 'card') {\r\n        payload = buildSaveCardOnMfaSuccessPayload(\r\n          this.addRequestPayload,\r\n          this.initialMfaResponse,\r\n          this.currentInquiryId\r\n        );\r\n        response = await saveCardOnMfaSuccess(\r\n          this.operationsToken,\r\n          this.userScopedAccessToken,\r\n          payload,\r\n          this.environment\r\n        );\r\n      }\r\n      else if (this.requestType === 'bank') {\r\n        payload = buildSaveBankOnMfaSuccessPayload(\r\n          this.addRequestPayload,\r\n          this.initialMfaResponse,\r\n          this.currentInquiryId\r\n        );\r\n        response = await saveBankOnMfaSuccess(\r\n          this.operationsToken,\r\n          this.userScopedAccessToken,\r\n          payload,\r\n          this.environment\r\n        );\r\n      }\r\n\r\n      if (response.success) {\r\n        this.accountSubmissionSuccess = response.data;\r\n      } else {\r\n        const msg = response.message ?? 'Unexpected error while saving card.';\r\n        if (this.errorHandler) {\r\n          this.errorHandler([msg]);\r\n        }\r\n        // stop polling when error occurs\r\n        this.handleCancel();\r\n      }\r\n    } else if (newValue.mfaStatus === MFAStatusEnum.Failed) {\r\n      this.clearPollingTimers();\r\n      const msg = 'Your MFA verification has failed. Please try again or use a different payment method.';\r\n      // send error up to parent\r\n      if (this.errorHandler) {\r\n        this.errorHandler([msg]);\r\n      }\r\n      this.handleCancel(); // close popup\r\n    }\r\n  }\r\n\r\n  @Watch('accountSubmissionSuccess')\r\n  handleAccountSubmissionSuccessChanged(newValue: any) {\r\n    if (!newValue) return;\r\n\r\n    if (\r\n      newValue?.resultMessage === 'Success' &&\r\n      newValue?.paymentInstrument\r\n    ) {\r\n      this.successEvent.emit({ data: newValue });\r\n      this.handleCancel();\r\n    }\r\n  }\r\n\r\n  clearPollingTimers() {\r\n    if (this.pollingIntervalId) {\r\n      clearInterval(this.pollingIntervalId);\r\n    }\r\n    if (this.timeoutId) {\r\n      clearTimeout(this.timeoutId);\r\n    }\r\n  }\r\n\r\n  startCountdownTimer() {\r\n    this.countdownIntervalId = setInterval(() => {\r\n      if (this.time > 0) {\r\n        this.time = this.time - 1;\r\n      } else {\r\n        this.isRunning = false;\r\n\r\n        if (this.noOfAttempts === 0) {\r\n          const msg = 'You have reached the maximum number of MFA attempts. Please use a different payment method.';\r\n          if (this.errorHandler) {\r\n            this.errorHandler([msg]);\r\n          }\r\n          this.handleCancel(); // Cancel if no attempts left\r\n        }\r\n\r\n        clearInterval(this.countdownIntervalId);\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  stopCountdownTimer() {\r\n    clearInterval(this.countdownIntervalId);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.stopCountdownTimer();\r\n    this.clearPollingTimers();\r\n  }\r\n\r\n  handleResendLinkClick = async () => {\r\n    if (this.noOfAttempts > 0) {\r\n      this.noOfAttempts = this.noOfAttempts - 1;\r\n\r\n      // build the payload using the builder\r\n      const payload = buildResendMfaLinkPayload(this.addRequestPayload, this.initialMfaResponse);\r\n      // call the service\r\n      const response = await resendMfaLink(\r\n        this.operationsToken,\r\n        this.userScopedAccessToken,\r\n        payload,\r\n        this.environment\r\n      );\r\n\r\n      if (response.success) {\r\n        // update inquiryId with the new one from backend\r\n        this.currentInquiryId = response.data?.inquiryId || '';\r\n        this.time = 60;\r\n        this.isRunning = true;\r\n\r\n      } else {\r\n        const msg = response.message ?? 'Unexpected error. Please refresh or try again later.';\r\n        if (this.errorHandler) {\r\n          this.errorHandler([msg]);\r\n        }\r\n        // stop polling when error occurs\r\n        this.handleCancel();\r\n      }\r\n    }\r\n  };\r\n\r\n  handleCancel = () => {\r\n    if (this.pollingIntervalId) {\r\n      clearInterval(this.pollingIntervalId);\r\n      this.pollingIntervalId = null;\r\n    }\r\n    if (this.timeoutId) {\r\n      clearTimeout(this.timeoutId);\r\n      this.timeoutId = null;\r\n    }\r\n    if (this.countdownIntervalId) {\r\n      clearInterval(this.countdownIntervalId);\r\n      this.countdownIntervalId = null;\r\n    }\r\n    this.onClose();\r\n  };\r\n\r\n\r\n  get mfaPoolSettings(): string {\r\n    return this.initialMfaResponse?.data?.MfaPoolSettings || '20-5'; // fallback if missing\r\n  }\r\n\r\n  get mobileNumberLastFourDigits(): string {\r\n    const mobile = this.addRequestPayload?.payorInformation?.contactInformation?.phoneNumber || '';\r\n    return mobile.length >= 4 ? mobile.slice(-4) : mobile;\r\n  }\r\n\r\n  get startInterval(): number {\r\n    const [start] = this.mfaPoolSettings?.split('-') || [];\r\n    return Number(start);\r\n  }\r\n\r\n  get recurringInterval(): number {\r\n    const [, recurring] = this.mfaPoolSettings?.split('-') || [];\r\n    return Number(recurring);\r\n  }\r\n\r\n  private formatTime(seconds: number): string {\r\n    const minutes = Math.floor(seconds / 60);\r\n    const remainingSeconds = seconds % 60;\r\n    return `${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;\r\n  }\r\n\r\n  private getAttemptLabel(): string {\r\n    return this.noOfAttempts === 1 || this.noOfAttempts === 0 ? 'attempt' : 'attempts';\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"popup\">\r\n        <div class=\"action-modal\">\r\n          <div class=\"modal-container\">\r\n            <div class=\"modal-header\">\r\n              <h3>Verification Link Sent</h3>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n              <p class=\"dialogContentText\">\r\n                A verification link has been sent to your <span class=\"highlight\">mobile number ending in {this.mobileNumberLastFourDigits}.</span>\r\n                <br />\r\n                Please tap the link and follow the instructions to confirm your identity.\r\n                <br />\r\n                <br />\r\n                The link will expire in <span class=\"time-highlight\">{this.formatTime(this.time)}</span>.<br />\r\n                You have {this.noOfAttempts} remaining {this.getAttemptLabel()} to resend the link if needed.\r\n              </p>\r\n              <div class=\"modal-footer\">\r\n                <div class=\"button-box\">\r\n                  <button class=\"secondarybtn\" onClick={this.handleCancel}>\r\n                    Cancel\r\n                  </button>\r\n                  <button class=\"primary-btn\" disabled={this.isRunning} onClick={this.handleResendLinkClick}>\r\n                    Resend Link\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}"],"mappings":"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","ignoreList":[]}