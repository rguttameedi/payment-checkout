import{r as e,c as t,g as r,h as a}from"./p-hYWQIH0y.js";import{E as o,a as i,g as n,C as s,A as d,b as c,B as l}from"./p-B6Hq8G5w.js";class u{static instance;scriptId="oscilar-script";defaultTimeout=5e3;scriptLoadPromise=null;scriptElement=null;debug="production"!=="production";scriptLoadRetryCount=0;maxRetries=1;constructor(){}static getInstance(){if(!u.instance){u.instance=new u}return u.instance}validateOscilarUrl(e){try{const t=new URL(e);const r=["oscilar.com","zqp.oscilar.com","zqp-sand.oscilar.com"];const a=r.some((e=>t.hostname===e||t.hostname.endsWith("."+e)));if(!a){this.log(`Invalid Oscilar URL host: ${t.hostname}`,"error");return false}if(t.protocol!=="https:"){this.log(`Oscilar URL must use HTTPS, got: ${t.protocol}`,"error");return false}return true}catch(t){this.log(`Invalid Oscilar URL format: ${e}`,"error");return false}}loadScript(e,t=this.defaultTimeout){if(!Object.values(o).includes(e)){return Promise.reject(new Error(`Invalid environment: ${e}`))}const r=this.getOscilarScriptUrl(e);if(!this.validateOscilarUrl(r)){return Promise.reject(new Error(`Invalid Oscilar script URL: ${r}. Only HTTPS connections to approved Oscilar domains are allowed.`))}if(this.scriptLoadPromise!==null){this.log("Using existing script load promise");return this.scriptLoadPromise}this.scriptLoadPromise=new Promise(((a,o)=>{if(typeof document==="undefined"){o(new Error("Document is not available"));return}if(document.getElementById(this.scriptId)){this.handleExistingScript(a,o);return}this.scriptElement=document.createElement("script");this.scriptElement.id=this.scriptId;this.scriptElement.defer=true;this.scriptElement.type="text/javascript";this.scriptElement.src=r;const i=setTimeout((()=>{o(new Error("Oscilar script load timeout"))}),t);this.scriptElement.onload=async()=>{this.scriptLoadRetryCount=0;clearTimeout(i);try{const e=await new Promise(((e,t)=>this.initializeOscilar(e,t)));this.commit();a(e)}catch(e){const t=e instanceof Error?e.message:String(e);o(new Error(`Failed to initialize Oscilar: ${t}`))}};this.scriptElement.onerror=()=>{clearTimeout(i);if(this.scriptElement?.parentNode){this.scriptElement.parentNode.removeChild(this.scriptElement)}this.scriptElement=null;if(this.scriptLoadRetryCount<this.maxRetries){this.scriptLoadRetryCount++;this.log("Retrying script load...");setTimeout((()=>{this.scriptLoadPromise=null;this.loadScript(e).then(a).catch(o)}),100);return}this.scriptLoadPromise=null;const t="Failed to load Oscilar script. verify that your Content Security Policy (CSP) allows loading scripts from oscilar.com";this.log(t,"error");o(new Error(t))};document.head.appendChild(this.scriptElement)}));return this.scriptLoadPromise}handleExistingScript(e,t){this.log("Found existing Oscilar script, initializing...");const r=document.getElementById(this.scriptId);if(r&&window["__ojsdk__"]?.getIDs){this.initializeOscilar(e,t)}else{const e="Oscilar script element exists but SDK not initialized";this.log(e,"error");t(new Error(e))}}log(e,t="log"){if(!this.debug)return;const r=(new Date).toISOString();const a=`[OscilarService][${r}] ${e}`;switch(t){case"warn":console.warn(a);break;case"error":console.error(a);break;default:console.log(a)}}initializeOscilar(e,t){this.log("Initializing Oscilar SDK...");try{const r=window["__ojsdk__"]=window["__ojsdk__"]||{};if(r.transactionID&&r.tabID){const t={transactionID:r.transactionID,tabID:r.tabID};if(this.validateOscilarIDs(t)){this.log("Using existing Oscilar IDs","log");e(t);return}else{this.log("Found existing but invalid Oscilar IDs","warn")}}r.getIDs=r.getIDs||[];const a=r=>{if(this.validateOscilarIDs(r)){e(r)}else{const e="Invalid Oscilar IDs received";this.log(e,"error");t(new Error(e))}};r.getIDs.push(a)}catch(e){const r=e instanceof Error?e.message:"Unknown error occurred";const a=`Failed to initialize Oscilar: ${r}`;this.log(a,"error");t(new Error(a))}}validateOscilarIDs(e){return!!(e&&typeof e==="object"&&typeof e.transactionID==="string"&&typeof e.tabID==="string"&&e.transactionID.length>0&&e.tabID.length>0)}getOscilarScriptUrl(e){return i(e)}commit(e,t){try{const r=window;const a=r.__ojsdk__=r.__ojsdk__||{};a.commit=a.commit||[];const o={};if(e)o.userID=e;if(t)o.sessionID=t;a.commit.push(o);this.log(`Data committed to Oscilar - ${Object.keys(o).length?JSON.stringify(o):"empty object"}`)}catch(e){this.log(`Error committing to Oscilar: ${e instanceof Error?e.message:"Unknown error"}`,"error")}}}const h=u.getInstance();var m;(function(e){e["API_CALL_SUCCESS"]="wallet:api:success";e["API_CALL_ERROR"]="wallet:api:error";e["PAYMENT_METHOD_SELECTED"]="wallet:payment:selected";e["PAYMENT_METHOD_CHANGED"]="wallet:payment:changed";e["ADD_PAYMENT_STARTED"]="wallet:add-payment:started";e["ADD_PAYMENT_SUCCESS"]="wallet:add-payment:success";e["ADD_PAYMENT_CANCELLED"]="wallet:add-payment:cancelled";e["ADD_PAYMENT_ERROR"]="wallet:add-payment:error";e["ADD_BANK_STARTED"]="wallet:add-bank:started";e["ADD_BANK_SUCCESS"]="wallet:add-bank:success";e["ADD_BANK_CANCELLED"]="wallet:add-bank:cancelled";e["ADD_BANK_ERROR"]="wallet:add-bank:error";e["FORM_VALIDATION_ERROR"]="wallet:form:validation-error";e["FORM_FIELD_CHANGED"]="wallet:form:field-changed";e["DROPDOWN_OPENED"]="wallet:ui:dropdown-opened";e["DROPDOWN_CLOSED"]="wallet:ui:dropdown-closed";e["COMPONENT_LOADED"]="wallet:ui:component-loaded"})(m||(m={}));const A=(e,t,...r)=>{if(e===o.LOCALDEVELOPMENT||e===o.STAGING){console.log(t,...r)}};class p{static instance;componentName="";environment="production";sessionId="";constructor(){this.sessionId=this.generateSessionId()}static getInstance(){if(!p.instance){p.instance=new p}return p.instance}init(e,t="production"){this.componentName=e;this.environment=t}track(e,t={}){const r={timestamp:(new Date).toISOString(),component:this.componentName,environment:this.environment,sessionId:this.sessionId,...t};this.emitCustomEvent(e,r);A(this.environment,`[WalletEvent] ${e}:`,r)}emitCustomEvent(e,t){const r=new CustomEvent(e,{detail:t,bubbles:true,composed:true});document.dispatchEvent(r)}generateSessionId(){return`wallet_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}trackApiCall(e,t,r,a,o,i){this.track(r?m.API_CALL_SUCCESS:m.API_CALL_ERROR,{endpoint:e,method:t,duration:a,statusCode:o,error:i})}trackPaymentMethodSelected(e,t,r){this.track(m.PAYMENT_METHOD_SELECTED,{paymentMethodId:e,paymentMethodType:t,paymentMethodText:r})}trackFormEvent(e,t,r={}){this.track(e,{formType:t,...r})}trackUIEvent(e,t,r,a){this.track(e,{action:t,elementId:r,elementType:a})}}const S=p.getInstance();const N=[{pattern:/same payment instrument details already existed/i,userMessage:"This card is already saved to your account. Please use a different card or update your existing card details.",category:"duplicate"},{pattern:/payment instrument.*already exists/i,userMessage:"This payment method is already saved to your account.",category:"duplicate"},{pattern:/tokenization request was rejected.*same payment instrument details already existed/i,userMessage:"This card is already saved to your wallet. Please use a different card or update your existing card information.",category:"duplicate"},{pattern:/tokenization request was rejected/i,userMessage:"We couldn't process this card. Please check your card details and try again, or use a different card.",category:"validation"},{pattern:/invalid card number/i,userMessage:"Please enter a valid card number.",category:"validation"},{pattern:/card number.*invalid/i,userMessage:"The card number you entered is not valid. Please check and try again.",category:"validation"},{pattern:/invalid expiration/i,userMessage:"Please enter a valid expiration date.",category:"validation"},{pattern:/expired card/i,userMessage:"This card has expired. Please use a different card.",category:"validation"},{pattern:/invalid cvv/i,userMessage:"Please enter a valid security code (CVV).",category:"validation"},{pattern:/insufficient funds/i,userMessage:"This card has insufficient funds. Please use a different payment method.",category:"validation"},{pattern:/card declined/i,userMessage:"Your card was declined. Please contact your bank or use a different card.",category:"validation"},{pattern:/invalid routing number/i,userMessage:"Please enter a valid routing number.",category:"validation"},{pattern:/invalid account number/i,userMessage:"Please enter a valid account number.",category:"validation"},{pattern:/bank account.*not found/i,userMessage:"We couldn't verify this bank account. Please check your details and try again.",category:"validation"},{pattern:/unauthorized/i,userMessage:"Your session has expired. Please refresh the page and try again.",category:"security"},{pattern:/forbidden/i,userMessage:"You don't have permission to perform this action.",category:"security"},{pattern:/authentication.*failed/i,userMessage:"Authentication failed. Please refresh the page and try again.",category:"security"},{pattern:/network.*error/i,userMessage:"Network connection error. Please check your internet connection and try again.",category:"network"},{pattern:/server.*error/i,userMessage:"We're experiencing technical difficulties. Please try again in a few moments.",category:"network"},{pattern:/timeout/i,userMessage:"The request timed out. Please try again.",category:"network"},{pattern:/required.*missing/i,userMessage:"Please fill in all required fields.",category:"validation"},{pattern:/invalid.*format/i,userMessage:"Please check the format of your information and try again.",category:"validation"},{pattern:/validation.*failed/i,userMessage:"Please check your information and try again.",category:"validation"}];function I(e){if(!e||typeof e!=="string"){return"An unexpected error occurred. Please try again."}for(const t of N){if(typeof t.pattern==="string"){if(e.toLowerCase().includes(t.pattern.toLowerCase())){return t.userMessage}}else{if(t.pattern.test(e)){return t.userMessage}}}return"We encountered an issue processing your request. Please check your information and try again."}function f(e){if(!e||typeof e!=="string"){return"generic"}for(const t of N){if(typeof t.pattern==="string"){if(e.toLowerCase().includes(t.pattern.toLowerCase())){return t.category}}else{if(t.pattern.test(e)){return t.category}}}return"generic"}function b(e,t="general"){const r=I(e);const a=f(e);let o=r;if(t==="card"&&a==="duplicate"){o="This card is already saved to your wallet. You can update your existing card details or add a different card."}else if(t==="bank"&&a==="duplicate"){o="This bank account is already saved to your wallet. You can update your existing account details or add a different account."}return{userMessage:o,category:a,originalMessage:e}}function C(e,t="production"){S.init(e,t);S.trackUIEvent(m.COMPONENT_LOADED,"component-initialized")}async function O(e,t,r){const a=Date.now();try{const o=await r();const i=Date.now()-a;S.trackApiCall(e,t,true,i,200);return o}catch(r){const o=Date.now()-a;const i=r instanceof Error?r.message:"Unknown error";S.trackApiCall(e,t,false,o,500,i);throw r}}function v(e,t,r){S.trackPaymentMethodSelected(e,t,r)}function E(){S.trackFormEvent(m.ADD_PAYMENT_STARTED,"payment")}function D(e){S.trackFormEvent(m.ADD_PAYMENT_SUCCESS,"payment",e)}function P(){S.trackFormEvent(m.ADD_PAYMENT_CANCELLED,"payment")}function y(e){const t=f(e);S.trackFormEvent(m.ADD_PAYMENT_ERROR,"payment",{error:e,errorCategory:t})}function g(){S.trackFormEvent(m.ADD_BANK_STARTED,"bank")}function R(e){S.trackFormEvent(m.ADD_BANK_SUCCESS,"bank",e)}function T(){S.trackFormEvent(m.ADD_BANK_CANCELLED,"bank")}function w(e){const t=f(e);S.trackFormEvent(m.ADD_BANK_ERROR,"bank",{error:e,errorCategory:t})}function k(e,t){S.trackFormEvent(m.FORM_VALIDATION_ERROR,e,{validationErrors:t})}const M=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"DC",name:"District of Columbia"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"},{code:"AS",name:"American Samoa"},{code:"GU",name:"Guam"},{code:"MP",name:"Northern Mariana Islands"},{code:"PR",name:"Puerto Rico"},{code:"UM",name:"United States Minor Outlying Islands"},{code:"VI",name:"Virgin Islands, U.S."}];const L=[{code:"AB",name:"Alberta"},{code:"BC",name:"British Columbia"},{code:"MB",name:"Manitoba"},{code:"NB",name:"New Brunswick"},{code:"NL",name:"Newfoundland and Labrador"},{code:"NT",name:"Northwest Territories"},{code:"NS",name:"Nova Scotia"},{code:"NU",name:"Nunavut"},{code:"ON",name:"Ontario"},{code:"PE",name:"Prince Edward Island"},{code:"QC",name:"Quebec"},{code:"SK",name:"Saskatchewan"},{code:"YT",name:"Yukon"}];const U=e=>{switch(e){case"CA":return L;case"US":default:return M}};const B=[{code:"US",name:"United States of America"},{code:"AX",name:"Aland Islands"},{code:"AL",name:"Albania"},{code:"DZ",name:"Algeria"},{code:"AD",name:"Andorra"},{code:"AO",name:"Angola"},{code:"AI",name:"Anguilla"},{code:"AQ",name:"Antarctica"},{code:"AG",name:"Antigua and Barbuda"},{code:"AR",name:"Argentina"},{code:"AM",name:"Armenia"},{code:"AW",name:"Aruba"},{code:"AU",name:"Australia"},{code:"AT",name:"Austria"},{code:"AZ",name:"Azerbaijan"},{code:"BS",name:"Bahamas"},{code:"BH",name:"Bahrain"},{code:"BD",name:"Bangladesh"},{code:"BB",name:"Barbados"},{code:"BY",name:"Belarus"},{code:"BE",name:"Belgium"},{code:"BZ",name:"Belize"},{code:"BJ",name:"Benin"},{code:"BM",name:"Bermuda"},{code:"BT",name:"Bhutan"},{code:"BO",name:"Bolivia (Plurinational State of)"},{code:"BQ",name:"Bonaire, Sint Eustatius and Saba"},{code:"BW",name:"Botswana"},{code:"BV",name:"Bouvet Island"},{code:"BR",name:"Brazil"},{code:"IO",name:"British Indian Ocean Territory"},{code:"BN",name:"Brunei Darussalam"},{code:"BG",name:"Bulgaria"},{code:"BF",name:"Burkina Faso"},{code:"BI",name:"Burundi"},{code:"CV",name:"Cabo Verde"},{code:"KH",name:"Cambodia"},{code:"CM",name:"Cameroon"},{code:"CA",name:"Canada"},{code:"KY",name:"Cayman Islands"},{code:"CF",name:"Central African Republic"},{code:"TD",name:"Chad"},{code:"CL",name:"Chile"},{code:"CN",name:"China"},{code:"CX",name:"Christmas Island"},{code:"CC",name:"Cocos (Keeling) Islands"},{code:"CO",name:"Colombia"},{code:"KM",name:"Comoros"},{code:"CG",name:"Congo"},{code:"CD",name:"Congo (the Democratic Republic of the)"},{code:"CK",name:"Cook Islands"},{code:"CR",name:"Costa Rica"},{code:"CI",name:"Côte d'Ivoire"},{code:"HR",name:"Croatia"},{code:"CU",name:"Cuba"},{code:"CW",name:"Curaçao"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czechia"},{code:"DK",name:"Denmark"},{code:"DJ",name:"Djibouti"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"EC",name:"Ecuador"},{code:"EG",name:"Egypt"},{code:"SV",name:"El Salvador"},{code:"GQ",name:"Equatorial Guinea"},{code:"ER",name:"Eritrea"},{code:"EE",name:"Estonia"},{code:"FK",name:"Falkland Islands [Malvinas]"},{code:"FO",name:"Faroe Islands"},{code:"FJ",name:"Fiji"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"GF",name:"French Guiana"},{code:"PF",name:"French Polynesia"},{code:"TF",name:"French Southern Territories"},{code:"GA",name:"Gabon"},{code:"GM",name:"Gambia"},{code:"GE",name:"Georgia"},{code:"DE",name:"Germany"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GR",name:"Greece"},{code:"GL",name:"Greenland"},{code:"GD",name:"Grenada"},{code:"GP",name:"Guadeloupe"},{code:"GT",name:"Guatemala"},{code:"GG",name:"Guernsey"},{code:"GN",name:"Guinea"},{code:"GW",name:"Guinea-Bissau"},{code:"GY",name:"Guyana"},{code:"HT",name:"Haiti"},{code:"HM",name:"Heard Island and McDonald Islands"},{code:"VA",name:"Holy See"},{code:"HN",name:"Honduras"},{code:"HK",name:"Hong Kong"},{code:"HU",name:"Hungary"},{code:"IS",name:"Iceland"},{code:"IN",name:"India"},{code:"ID",name:"Indonesia"},{code:"IE",name:"Ireland"},{code:"IM",name:"Isle of Man"},{code:"IL",name:"Israel"},{code:"IT",name:"Italy"},{code:"JM",name:"Jamaica"},{code:"JP",name:"Japan"},{code:"JE",name:"Jersey"},{code:"JO",name:"Jordan"},{code:"KZ",name:"Kazakhstan"},{code:"KE",name:"Kenya"},{code:"KI",name:"Kiribati"},{code:"KW",name:"Kuwait"},{code:"KG",name:"Kyrgyzstan"},{code:"LV",name:"Latvia"},{code:"LB",name:"Lebanon"},{code:"LS",name:"Lesotho"},{code:"LR",name:"Liberia"},{code:"LY",name:"Libya"},{code:"LI",name:"Liechtenstein"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"MO",name:"Macao"},{code:"MK",name:"Macedonia (the former Yugoslav Republic of)"},{code:"MG",name:"Madagascar"},{code:"MW",name:"Malawi"},{code:"MY",name:"Malaysia"},{code:"MV",name:"Maldives"},{code:"ML",name:"Mali"},{code:"MT",name:"Malta"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MU",name:"Mauritius"},{code:"YT",name:"Mayotte"},{code:"MX",name:"Mexico"},{code:"MD",name:"Moldova (the Republic of)"},{code:"MC",name:"Monaco"},{code:"MN",name:"Mongolia"},{code:"ME",name:"Montenegro"},{code:"MS",name:"Montserrat"},{code:"MA",name:"Morocco"},{code:"MZ",name:"Mozambique"},{code:"MM",name:"Myanmar"},{code:"NA",name:"Namibia"},{code:"NR",name:"Nauru"},{code:"NP",name:"Nepal"},{code:"NL",name:"Netherlands"},{code:"NC",name:"New Caledonia"},{code:"NZ",name:"New Zealand"},{code:"NI",name:"Nicaragua"},{code:"NE",name:"Niger"},{code:"NG",name:"Nigeria"},{code:"NU",name:"Niue"},{code:"NF",name:"Norfolk Island"},{code:"NO",name:"Norway"},{code:"OM",name:"Oman"},{code:"PK",name:"Pakistan"},{code:"PS",name:"Palestine, State of"},{code:"PA",name:"Panama"},{code:"PG",name:"Papua New Guinea"},{code:"PY",name:"Paraguay"},{code:"PE",name:"Peru"},{code:"PH",name:"Philippines"},{code:"PN",name:"Pitcairn"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"QA",name:"Qatar"},{code:"RE",name:"Réunion"},{code:"RO",name:"Romania"},{code:"RU",name:"Russian Federation"},{code:"RW",name:"Rwanda"},{code:"BL",name:"Saint Barthélemy"},{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha"},{code:"KN",name:"Saint Kitts and Nevis"},{code:"LC",name:"Saint Lucia"},{code:"MF",name:"Saint Martin (French part)"},{code:"PM",name:"Saint Pierre and Miquelon"},{code:"VC",name:"Saint Vincent and the Grenadines"},{code:"WS",name:"Samoa"},{code:"SM",name:"San Marino"},{code:"ST",name:"Sao Tome and Principe"},{code:"SA",name:"Saudi Arabia"},{code:"SN",name:"Senegal"},{code:"RS",name:"Serbia"},{code:"SC",name:"Seychelles"},{code:"SL",name:"Sierra Leone"},{code:"SG",name:"Singapore"},{code:"SX",name:"Sint Maarten (Dutch part)"},{code:"SK",name:"Slovakia"},{code:"SI",name:"Slovenia"},{code:"SB",name:"Solomon Islands"},{code:"SO",name:"Somalia"},{code:"ZA",name:"South Africa"},{code:"GS",name:"South Georgia and the South Sandwich Islands"},{code:"KR",name:"South Korea"},{code:"ES",name:"Spain"},{code:"LK",name:"Sri Lanka"},{code:"SD",name:"Sudan (the)"},{code:"SR",name:"Suriname"},{code:"SJ",name:"Svalbard and Jan Mayen"},{code:"SZ",name:"Swaziland"},{code:"SE",name:"Sweden"},{code:"CH",name:"Switzerland"},{code:"TW",name:"Taiwan (Province of China)"},{code:"TJ",name:"Tajikistan"},{code:"TZ",name:"Tanzania, United Republic of"},{code:"TH",name:"Thailand"},{code:"TL",name:"Timor-Leste"},{code:"TG",name:"Togo"},{code:"TK",name:"Tokelau"},{code:"TO",name:"Tonga"},{code:"TT",name:"Trinidad and Tobago"},{code:"TN",name:"Tunisia"},{code:"TR",name:"Turkey"},{code:"TM",name:"Turkmenistan"},{code:"TC",name:"Turks and Caicos Islands"},{code:"TV",name:"Tuvalu"},{code:"UA",name:"Ukraine"},{code:"AE",name:"United Arab Emirates"},{code:"GB",name:"United Kingdom of Great Britain and Northern Ireland"},{code:"UM",name:"United States Minor Outlying Islands"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VE",name:"Venezuela (Bolivarian Republic of)"},{code:"VN",name:"Vietnam"},{code:"VG",name:"Virgin Islands (British)"},{code:"WF",name:"Wallis and Futuna"},{code:"EH",name:"Western Sahara*"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"}];const x=[{Id:"US",PhoneCode:"1 ",States:null,Name:"UNITED STATES",Description:"UNITED STATES",SortOrder:0,Active:true},{Id:"AF",PhoneCode:" 93",States:null,Name:"AFGHANISTAN",Description:"AFGHANISTAN",SortOrder:1,Active:true},{Id:"AX",PhoneCode:"358 ",States:null,Name:"ALAND ISLANDS",Description:"ALAND ISLANDS",SortOrder:1,Active:true},{Id:"AL",PhoneCode:"355 ",States:null,Name:"ALBANIA",Description:"ALBANIA",SortOrder:1,Active:true},{Id:"DZ",PhoneCode:"213 ",States:null,Name:"ALGERIA",Description:"ALGERIA",SortOrder:1,Active:true},{Id:"AS",PhoneCode:"1684 ",States:null,Name:"AMERICAN SAMOA",Description:"AMERICAN SAMOA",SortOrder:1,Active:true},{Id:"AD",PhoneCode:"376 ",States:null,Name:"ANDORRA",Description:"ANDORRA",SortOrder:1,Active:true},{Id:"AO",PhoneCode:"244 ",States:null,Name:"ANGOLA",Description:"ANGOLA",SortOrder:1,Active:true},{Id:"AI",PhoneCode:"1264 ",States:null,Name:"ANGUILLA",Description:"ANGUILLA",SortOrder:1,Active:true},{Id:"AG",PhoneCode:"1268 ",States:null,Name:"ANTIGUA AND BARBUDA",Description:"ANTIGUA AND BARBUDA",SortOrder:1,Active:true},{Id:"AR",PhoneCode:"54 ",States:null,Name:"ARGENTINA",Description:"ARGENTINA",SortOrder:1,Active:true},{Id:"AM",PhoneCode:"374 ",States:null,Name:"ARMENIA",Description:"ARMENIA",SortOrder:1,Active:true},{Id:"AW",PhoneCode:" 297",States:null,Name:"ARUBA",Description:"ARUBA",SortOrder:1,Active:true},{Id:"AU",PhoneCode:"61 ",States:null,Name:"AUSTRALIA",Description:"AUSTRALIA",SortOrder:1,Active:true},{Id:"AT",PhoneCode:"43 ",States:null,Name:"AUSTRIA",Description:"AUSTRIA",SortOrder:1,Active:true},{Id:"AZ",PhoneCode:" 994",States:null,Name:"AZERBAIJAN REPUBLIC",Description:"AZERBAIJAN REPUBLIC",SortOrder:1,Active:true},{Id:"BS",PhoneCode:" 1242",States:null,Name:"BAHAMAS",Description:"BAHAMAS",SortOrder:1,Active:true},{Id:"BH",PhoneCode:" 973",States:null,Name:"BAHRAIN",Description:"BAHRAIN",SortOrder:1,Active:true},{Id:"BD",PhoneCode:" 880",States:null,Name:"BANGLADESH",Description:"BANGLADESH",SortOrder:1,Active:true},{Id:"BB",PhoneCode:" 1246",States:null,Name:"BARBADOS",Description:"BARBADOS",SortOrder:1,Active:true},{Id:"BY",PhoneCode:"375 ",States:null,Name:"BELARUS",Description:"BELARUS",SortOrder:1,Active:true},{Id:"BE",PhoneCode:"32 ",States:null,Name:"BELGIUM",Description:"BELGIUM",SortOrder:1,Active:true},{Id:"BZ",PhoneCode:"501 ",States:null,Name:"BELIZE",Description:"BELIZE",SortOrder:1,Active:true},{Id:"BJ",PhoneCode:" 229",States:null,Name:"BENIN",Description:"BENIN",SortOrder:1,Active:true},{Id:"BM",PhoneCode:"1441 ",States:null,Name:"BERMUDA",Description:"BERMUDA",SortOrder:1,Active:true},{Id:"BT",PhoneCode:"975 ",States:null,Name:"BHUTAN",Description:"BHUTAN",SortOrder:1,Active:true},{Id:"BO",PhoneCode:"591 ",States:null,Name:"BOLIVIA",Description:"BOLIVIA",SortOrder:1,Active:true},{Id:"BQ",PhoneCode:"599 ",States:null,Name:"BONAIRE, SINT EUSTATIUS AND SABA",Description:"BONAIRE, SINT EUSTATIUS AND SABA",SortOrder:1,Active:true},{Id:"BA",PhoneCode:"387 ",States:null,Name:"BOSNIA AND HERZEGOVINA",Description:"BOSNIA AND HERZEGOVINA",SortOrder:1,Active:true},{Id:"BW",PhoneCode:"267 ",States:null,Name:"BOTSWANA",Description:"BOTSWANA",SortOrder:1,Active:true},{Id:"BR",PhoneCode:"55 ",States:null,Name:"BRAZIL",Description:"BRAZIL",SortOrder:1,Active:true},{Id:"IO",PhoneCode:"246 ",States:null,Name:"BRITISH INDIAN OCEAN TERRITORY",Description:"BRITISH INDIAN OCEAN TERRITORY",SortOrder:1,Active:true},{Id:"BN",PhoneCode:"673 ",States:null,Name:"BRUNEI DARUSSALAM",Description:"BRUNEI DARUSSALAM",SortOrder:1,Active:true},{Id:"BG",PhoneCode:"359 ",States:null,Name:"BULGARIA",Description:"BULGARIA",SortOrder:1,Active:true},{Id:"BF",PhoneCode:"226 ",States:null,Name:"BURKINA FASO",Description:"BURKINA FASO",SortOrder:1,Active:true},{Id:"BI",PhoneCode:"257 ",States:null,Name:"BURUNDI",Description:"BURUNDI",SortOrder:1,Active:true},{Id:"KH",PhoneCode:" 855",States:null,Name:"CAMBODIA",Description:"CAMBODIA",SortOrder:1,Active:true},{Id:"CM",PhoneCode:" 237",States:null,Name:"CAMEROON",Description:"CAMEROON",SortOrder:1,Active:true},{Id:"CA",PhoneCode:" 1",States:null,Name:"CANADA",Description:"CANADA",SortOrder:1,Active:true},{Id:"CV",PhoneCode:" 238",States:null,Name:"CAPE VERDE",Description:"CAPE VERDE",SortOrder:1,Active:true},{Id:"KY",PhoneCode:"1345 ",States:null,Name:"CAYMAN ISLANDS",Description:"CAYMAN ISLANDS",SortOrder:1,Active:true},{Id:"CF",PhoneCode:"236 ",States:null,Name:"CENTRAL AFRICAN REPUBLIC",Description:"CENTRAL AFRICAN REPUBLIC",SortOrder:1,Active:true},{Id:"TD",PhoneCode:"235 ",States:null,Name:"CHAD",Description:"CHAD",SortOrder:1,Active:true},{Id:"CL",PhoneCode:"56 ",States:null,Name:"CHILE",Description:"CHILE",SortOrder:1,Active:true},{Id:"CN",PhoneCode:"86 ",States:null,Name:"CHINA",Description:"CHINA",SortOrder:1,Active:true},{Id:"CX",PhoneCode:"61 ",States:null,Name:"CHRISTMAS ISLAND",Description:"CHRISTMAS ISLAND",SortOrder:1,Active:true},{Id:"CC",PhoneCode:"61 ",States:null,Name:"COCOS (KEELING) ISLANDS",Description:"COCOS (KEELING) ISLANDS",SortOrder:1,Active:true},{Id:"CO",PhoneCode:" 57",States:null,Name:"COLOMBIA",Description:"COLOMBIA",SortOrder:1,Active:true},{Id:"KM",PhoneCode:"269 ",States:null,Name:"COMOROS",Description:"COMOROS",SortOrder:1,Active:true},{Id:"CG",PhoneCode:"242 ",States:null,Name:"CONGO",Description:"CONGO",SortOrder:1,Active:true},{Id:"CD",PhoneCode:" 243",States:null,Name:"CONGO, THE DEMOCRATIC REPUBLIC OF THE",Description:"CONGO, THE DEMOCRATIC REPUBLIC OF THE",SortOrder:1,Active:true},{Id:"CK",PhoneCode:"682 ",States:null,Name:"COOK ISLANDS",Description:"COOK ISLANDS",SortOrder:1,Active:true},{Id:"CR",PhoneCode:"506 ",States:null,Name:"COSTA RICA",Description:"COSTA RICA",SortOrder:1,Active:true},{Id:"CI",PhoneCode:"225 ",States:null,Name:"COTE D'IVOIRE",Description:"COTE D'IVOIRE",SortOrder:1,Active:true},{Id:"HR",PhoneCode:"385 ",States:null,Name:"CROATIA",Description:"CROATIA",SortOrder:1,Active:true},{Id:"CU",PhoneCode:"53 ",States:null,Name:"CUBA",Description:"CUBA",SortOrder:1,Active:true},{Id:"CUW",PhoneCode:"599 ",States:null,Name:"CURACAO",Description:"CURACAO",SortOrder:1,Active:true},{Id:"CY",PhoneCode:" 357",States:null,Name:"CYPRUS",Description:"CYPRUS",SortOrder:1,Active:true},{Id:"CZ",PhoneCode:" 420",States:null,Name:"CZECH REPUBLIC",Description:"CZECH REPUBLIC",SortOrder:1,Active:true},{Id:"DK",PhoneCode:" 45",States:null,Name:"DENMARK",Description:"DENMARK",SortOrder:1,Active:true},{Id:"DJ",PhoneCode:"253 ",States:null,Name:"DJIBOUTI",Description:"DJIBOUTI",SortOrder:1,Active:true},{Id:"DM",PhoneCode:" 1767",States:null,Name:"DOMINICA",Description:"DOMINICA",SortOrder:1,Active:true},{Id:"DO",PhoneCode:"1809 ",States:null,Name:"DOMINICAN REPUBLIC",Description:"DOMINICAN REPUBLIC",SortOrder:1,Active:true},{Id:"EC",PhoneCode:"593 ",States:null,Name:"ECUADOR",Description:"ECUADOR",SortOrder:1,Active:true},{Id:"EG",PhoneCode:"20 ",States:null,Name:"EGYPT",Description:"EGYPT",SortOrder:1,Active:true},{Id:"SV",PhoneCode:"503 ",States:null,Name:"EL SALVADOR",Description:"EL SALVADOR",SortOrder:1,Active:true},{Id:"GQ",PhoneCode:"240 ",States:null,Name:"EQUATORIAL GUINEA",Description:"EQUATORIAL GUINEA",SortOrder:1,Active:true},{Id:"ER",PhoneCode:"291 ",States:null,Name:"ERITREA",Description:"ERITREA",SortOrder:1,Active:true},{Id:"EE",PhoneCode:"372 ",States:null,Name:"ESTONIA",Description:"ESTONIA",SortOrder:1,Active:true},{Id:"ET",PhoneCode:"251 ",States:null,Name:"ETHIOPIA",Description:"ETHIOPIA",SortOrder:1,Active:true},{Id:"FK",PhoneCode:"500 ",States:null,Name:"FALKLAND ISLANDS",Description:"FALKLAND ISLANDS",SortOrder:1,Active:true},{Id:"FO",PhoneCode:"298 ",States:null,Name:"FAROE ISLANDS",Description:"FAROE ISLANDS",SortOrder:1,Active:true},{Id:"FM",PhoneCode:"691 ",States:null,Name:"FEDERATED STATES OF MICRONESIA",Description:"FEDERATED STATES OF MICRONESIA",SortOrder:1,Active:true},{Id:"FJ",PhoneCode:"679 ",States:null,Name:"FIJI",Description:"FIJI",SortOrder:1,Active:true},{Id:"FI",PhoneCode:"358 ",States:null,Name:"FINLAND",Description:"FINLAND",SortOrder:1,Active:true},{Id:"FR",PhoneCode:"33 ",States:null,Name:"FRANCE",Description:"FRANCE",SortOrder:1,Active:true},{Id:"GF",PhoneCode:"594 ",States:null,Name:"FRENCH GUIANA",Description:"FRENCH GUIANA",SortOrder:1,Active:true},{Id:"PF",PhoneCode:" 689",States:null,Name:"FRENCH POLYNESIA",Description:"FRENCH POLYNESIA",SortOrder:1,Active:true},{Id:"GA",PhoneCode:"241 ",States:null,Name:"GABON REPUBLIC",Description:"GABON REPUBLIC",SortOrder:1,Active:true},{Id:"GM",PhoneCode:"220 ",States:null,Name:"GAMBIA",Description:"GAMBIA",SortOrder:1,Active:true},{Id:"GE",PhoneCode:"995 ",States:null,Name:"GEORGIA",Description:"GEORGIA",SortOrder:1,Active:true},{Id:"DE",PhoneCode:"995 ",States:null,Name:"GERMANY",Description:"GERMANY",SortOrder:1,Active:true},{Id:"GH",PhoneCode:" 233",States:null,Name:"GHANA",Description:"GHANA",SortOrder:1,Active:true},{Id:"GI",PhoneCode:"350 ",States:null,Name:"GIBRALTAR",Description:"GIBRALTAR",SortOrder:1,Active:true},{Id:"GR",PhoneCode:"30 ",States:null,Name:"GREECE",Description:"GREECE",SortOrder:1,Active:true},{Id:"GL",PhoneCode:"299 ",States:null,Name:"GREENLAND",Description:"GREENLAND",SortOrder:1,Active:true},{Id:"GD",PhoneCode:"1473 ",States:null,Name:"GRENADA",Description:"GRENADA",SortOrder:1,Active:true},{Id:"GP",PhoneCode:"590 ",States:null,Name:"GUADELOUPE",Description:"GUADELOUPE",SortOrder:1,Active:true},{Id:"GU",PhoneCode:"1671 ",States:null,Name:"GUAM",Description:"GUAM",SortOrder:1,Active:true},{Id:"GT",PhoneCode:"502 ",States:null,Name:"GUATEMALA",Description:"GUATEMALA",SortOrder:1,Active:true},{Id:"GG",PhoneCode:"441481 ",States:null,Name:"GUERNSEY",Description:"GUERNSEY",SortOrder:1,Active:true},{Id:"GN",PhoneCode:"224 ",States:null,Name:"GUINEA",Description:"GUINEA",SortOrder:1,Active:true},{Id:"GW",PhoneCode:"245 ",States:null,Name:"GUINEA-BISSAU",Description:"GUINEA-BISSAU",SortOrder:1,Active:true},{Id:"GY",PhoneCode:"592 ",States:null,Name:"GUYANA",Description:"GUYANA",SortOrder:1,Active:true},{Id:"HT",PhoneCode:"509 ",States:null,Name:"HAITI",Description:"HAITI",SortOrder:1,Active:true},{Id:"VA",PhoneCode:"379 ",States:null,Name:"HOLY SEE (VATICAN CITY STATE)",Description:"HOLY SEE (VATICAN CITY STATE)",SortOrder:1,Active:true},{Id:"HN",PhoneCode:" 504",States:null,Name:"HONDURAS",Description:"HONDURAS",SortOrder:1,Active:true},{Id:"HK",PhoneCode:"852 ",States:null,Name:"HONG KONG",Description:"HONG KONG",SortOrder:1,Active:true},{Id:"HU",PhoneCode:" 36",States:null,Name:"HUNGARY",Description:"HUNGARY",SortOrder:1,Active:true},{Id:"IS",PhoneCode:"354 ",States:null,Name:"ICELAND",Description:"ICELAND",SortOrder:1,Active:true},{Id:"IN",PhoneCode:" 91",States:null,Name:"INDIA",Description:"INDIA",SortOrder:1,Active:true},{Id:"ID",PhoneCode:"62 ",States:null,Name:"INDONESIA",Description:"INDONESIA",SortOrder:1,Active:true},{Id:"IR",PhoneCode:"98 ",States:null,Name:"IRAN, ISLAMIC REPUBLIC OF",Description:"IRAN, ISLAMIC REPUBLIC OF",SortOrder:1,Active:true},{Id:"IQ",PhoneCode:"964 ",States:null,Name:"IRAQ",Description:"IRAQ",SortOrder:1,Active:true},{Id:"IE",PhoneCode:" 353",States:null,Name:"IRELAND",Description:"IRELAND",SortOrder:1,Active:true},{Id:"IM",PhoneCode:"44 ",States:null,Name:"ISLE OF MAN",Description:"ISLE OF MAN",SortOrder:1,Active:true},{Id:"IL",PhoneCode:" 972",States:null,Name:"ISRAEL",Description:"ISRAEL",SortOrder:1,Active:true},{Id:"IT",PhoneCode:"39 ",States:null,Name:"ITALY",Description:"ITALY",SortOrder:1,Active:true},{Id:"JM",PhoneCode:"1876 ",States:null,Name:"JAMAICA",Description:"JAMAICA",SortOrder:1,Active:true},{Id:"JP",PhoneCode:" 81",States:null,Name:"JAPAN",Description:"JAPAN",SortOrder:1,Active:true},{Id:"JE",PhoneCode:"441534 ",States:null,Name:"JERSEY",Description:"JERSEY",SortOrder:1,Active:true},{Id:"JO",PhoneCode:"962 ",States:null,Name:"JORDAN",Description:"JORDAN",SortOrder:1,Active:true},{Id:"KZ",PhoneCode:" 7",States:null,Name:"KAZAKHSTAN",Description:"KAZAKHSTAN",SortOrder:1,Active:true},{Id:"KE",PhoneCode:"254 ",States:null,Name:"KENYA",Description:"KENYA",SortOrder:1,Active:true},{Id:"KI",PhoneCode:"686 ",States:null,Name:"KIRIBATI",Description:"KIRIBATI",SortOrder:1,Active:true},{Id:"KP",PhoneCode:"850 ",States:null,Name:"KOREA, DEMOCRATIC PEOPLE'S REPUBLIC OF",Description:"KOREA, DEMOCRATIC PEOPLE'S REPUBLIC OF",SortOrder:1,Active:true},{Id:"KR",PhoneCode:"82 ",States:null,Name:"KOREA, REPUBLIC OF",Description:"KOREA, REPUBLIC OF",SortOrder:1,Active:true},{Id:"KW",PhoneCode:"965 ",States:null,Name:"KUWAIT",Description:"KUWAIT",SortOrder:1,Active:true},{Id:"KG",PhoneCode:"996 ",States:null,Name:"KYRGYZSTAN",Description:"KYRGYZSTAN",SortOrder:1,Active:true},{Id:"LA",PhoneCode:"856 ",States:null,Name:"LAOS",Description:"LAOS",SortOrder:1,Active:true},{Id:"LV",PhoneCode:"371 ",States:null,Name:"LATVIA",Description:"LATVIA",SortOrder:1,Active:true},{Id:"LB",PhoneCode:"961 ",States:null,Name:"LEBANON",Description:"LEBANON",SortOrder:1,Active:true},{Id:"LS",PhoneCode:"266 ",States:null,Name:"LESOTHO",Description:"LESOTHO",SortOrder:1,Active:true},{Id:"LR",PhoneCode:"231 ",States:null,Name:"LIBERIA",Description:"LIBERIA",SortOrder:1,Active:true},{Id:"LY",PhoneCode:" 218",States:null,Name:"LIBYAN ARAB JAMAHIRIYA",Description:"LIBYAN ARAB JAMAHIRIYA",SortOrder:1,Active:true},{Id:"LI",PhoneCode:"423 ",States:null,Name:"LIECHTENSTEIN",Description:"LIECHTENSTEIN",SortOrder:1,Active:true},{Id:"LT",PhoneCode:"370 ",States:null,Name:"LITHUANIA",Description:"LITHUANIA",SortOrder:1,Active:true},{Id:"LU",PhoneCode:"352 ",States:null,Name:"LUXEMBOURG",Description:"LUXEMBOURG",SortOrder:1,Active:true},{Id:"MO",PhoneCode:"853 ",States:null,Name:"MACAO",Description:"MACAO",SortOrder:1,Active:true},{Id:"MK",PhoneCode:"389 ",States:null,Name:"MACEDONIA",Description:"MACEDONIA",SortOrder:1,Active:true},{Id:"MG",PhoneCode:" 261",States:null,Name:"MADAGASCAR",Description:"MADAGASCAR",SortOrder:1,Active:true},{Id:"MW",PhoneCode:"265 ",States:null,Name:"MALAWI",Description:"MALAWI",SortOrder:1,Active:true},{Id:"MY",PhoneCode:"60 ",States:null,Name:"MALAYSIA",Description:"MALAYSIA",SortOrder:1,Active:true},{Id:"MV",PhoneCode:"960 ",States:null,Name:"MALDIVES",Description:"MALDIVES",SortOrder:1,Active:true},{Id:"ML",PhoneCode:"223 ",States:null,Name:"MALI",Description:"MALI",SortOrder:1,Active:true},{Id:"MT",PhoneCode:"356 ",States:null,Name:"MALTA",Description:"MALTA",SortOrder:1,Active:true},{Id:"MH",PhoneCode:"692 ",States:null,Name:"MARSHALL ISLANDS",Description:"MARSHALL ISLANDS",SortOrder:1,Active:true},{Id:"MQ",PhoneCode:"596 ",States:null,Name:"MARTINIQUE",Description:"MARTINIQUE",SortOrder:1,Active:true},{Id:"MR",PhoneCode:"222 ",States:null,Name:"MAURITANIA",Description:"MAURITANIA",SortOrder:1,Active:true},{Id:"MU",PhoneCode:"230 ",States:null,Name:"MAURITIUS",Description:"MAURITIUS",SortOrder:1,Active:true},{Id:"YT",PhoneCode:"269 ",States:null,Name:"MAYOTTE",Description:"MAYOTTE",SortOrder:1,Active:true},{Id:"MX",PhoneCode:"52 ",States:null,Name:"MEXICO",Description:"MEXICO",SortOrder:1,Active:true},{Id:"FM",PhoneCode:"691 ",States:null,Name:"MICRONESIA, FEDERATED STATES OF",Description:"MICRONESIA, FEDERATED STATES OF",SortOrder:1,Active:true},{Id:"MD",PhoneCode:"373533 ",States:null,Name:"MOLDOVA",Description:"MOLDOVA",SortOrder:1,Active:true},{Id:"MC",PhoneCode:"377 ",States:null,Name:"MONACO",Description:"MONACO",SortOrder:1,Active:true},{Id:"MN",PhoneCode:"976 ",States:null,Name:"MONGOLIA",Description:"MONGOLIA",SortOrder:1,Active:true},{Id:"ME",PhoneCode:"382 ",States:null,Name:"MONTENEGRO",Description:"MONTENEGRO",SortOrder:1,Active:true},{Id:"MS",PhoneCode:" 1664",States:null,Name:"MONTSERRAT",Description:"MONTSERRAT",SortOrder:1,Active:true},{Id:"MA",PhoneCode:" 212",States:null,Name:"MOROCCO",Description:"MOROCCO",SortOrder:1,Active:true},{Id:"MZ",PhoneCode:"258 ",States:null,Name:"MOZAMBIQUE",Description:"MOZAMBIQUE",SortOrder:1,Active:true},{Id:"MM",PhoneCode:"95 ",States:null,Name:"MYANMAR",Description:"MYANMAR",SortOrder:1,Active:true},{Id:"NA",PhoneCode:"264 ",States:null,Name:"NAMIBIA",Description:"NAMIBIA",SortOrder:1,Active:true},{Id:"NR",PhoneCode:"674 ",States:null,Name:"NAURU",Description:"NAURU",SortOrder:1,Active:true},{Id:"NP",PhoneCode:"977 ",States:null,Name:"NEPAL",Description:"NEPAL",SortOrder:1,Active:true},{Id:"NL",PhoneCode:"31 ",States:null,Name:"NETHERLANDS",Description:"NETHERLANDS",SortOrder:1,Active:true},{Id:"AN",PhoneCode:"599 ",States:null,Name:"NETHERLANDS ANTILLES",Description:"NETHERLANDS ANTILLES",SortOrder:1,Active:true},{Id:"NC",PhoneCode:"687 ",States:null,Name:"NEW CALEDONIA",Description:"NEW CALEDONIA",SortOrder:1,Active:true},{Id:"NZ",PhoneCode:"64 ",States:null,Name:"NEW ZEALAND",Description:"NEW ZEALAND",SortOrder:1,Active:true},{Id:"NI",PhoneCode:"505 ",States:null,Name:"NICARAGUA",Description:"NICARAGUA",SortOrder:1,Active:true},{Id:"NE",PhoneCode:" 227",States:null,Name:"NIGER",Description:"NIGER",SortOrder:1,Active:true},{Id:"NG",PhoneCode:"234 ",States:null,Name:"NIGERIA",Description:"NIGERIA",SortOrder:1,Active:true},{Id:"NU",PhoneCode:"683 ",States:null,Name:"NIUE",Description:"NIUE",SortOrder:1,Active:true},{Id:"NF",PhoneCode:"672 ",States:null,Name:"NORFOLK ISLAND",Description:"NORFOLK ISLAND",SortOrder:1,Active:true},{Id:"MP",PhoneCode:"1670 ",States:null,Name:"NORTHERN MARIANA ISLANDS",Description:"NORTHERN MARIANA ISLANDS",SortOrder:1,Active:true},{Id:"NO",PhoneCode:"47 ",States:null,Name:"NORWAY",Description:"NORWAY",SortOrder:1,Active:true},{Id:"OM",PhoneCode:"968 ",States:null,Name:"OMAN",Description:"OMAN",SortOrder:1,Active:true},{Id:"PK",PhoneCode:" 92",States:null,Name:"PAKISTAN",Description:"PAKISTAN",SortOrder:1,Active:true},{Id:"PW",PhoneCode:"680 ",States:null,Name:"PALAU",Description:"PALAU",SortOrder:1,Active:true},{Id:"PS",PhoneCode:"970 ",States:null,Name:"PALESTINIAN TERRITORY, OCCUPIED",Description:"PALESTINIAN TERRITORY, OCCUPIED",SortOrder:1,Active:true},{Id:"PA",PhoneCode:" 507",States:null,Name:"PANAMA",Description:"PANAMA",SortOrder:1,Active:true},{Id:"PG",PhoneCode:"675 ",States:null,Name:"PAPUA NEW GUINEA",Description:"PAPUA NEW GUINEA",SortOrder:1,Active:true},{Id:"PY",PhoneCode:"595 ",States:null,Name:"PARAGUAY",Description:"PARAGUAY",SortOrder:1,Active:true},{Id:"PE",PhoneCode:"51 ",States:null,Name:"PERU",Description:"PERU",SortOrder:1,Active:true},{Id:"PH",PhoneCode:"63 ",States:null,Name:"PHILIPPINES",Description:"PHILIPPINES",SortOrder:1,Active:true},{Id:"PL",PhoneCode:"48 ",States:null,Name:"POLAND",Description:"POLAND",SortOrder:1,Active:true},{Id:"PT",PhoneCode:"351 ",States:null,Name:"PORTUGAL",Description:"PORTUGAL",SortOrder:1,Active:true},{Id:"PR",PhoneCode:" 1787",States:null,Name:"PUERTO RICO",Description:"PUERTO RICO",SortOrder:1,Active:true},{Id:"QA",PhoneCode:" 974",States:null,Name:"QATAR",Description:"QATAR",SortOrder:1,Active:true},{Id:"RE",PhoneCode:"262 ",States:null,Name:"REUNION",Description:"REUNION",SortOrder:1,Active:true},{Id:"RO",PhoneCode:"40 ",States:null,Name:"ROMANIA",Description:"ROMANIA",SortOrder:1,Active:true},{Id:"RU",PhoneCode:"7 ",States:null,Name:"RUSSIA",Description:"RUSSIA",SortOrder:1,Active:true},{Id:"RW",PhoneCode:"250 ",States:null,Name:"RWANDA",Description:"RWANDA",SortOrder:1,Active:true},{Id:"BLM",PhoneCode:"590",States:null,Name:"SAINT BARTHELEMY",Description:"SAINT BARTHELEMY",SortOrder:1,Active:true},{Id:"SH",PhoneCode:"290 ",States:null,Name:"SAINT HELENA",Description:"SAINT HELENA",SortOrder:1,Active:true},{Id:"KN",PhoneCode:"1869 ",States:null,Name:"SAINT KITTS AND NEVIS",Description:"SAINT KITTS AND NEVIS",SortOrder:1,Active:true},{Id:"LC",PhoneCode:"1758 ",States:null,Name:"SAINT LUCIA",Description:"SAINT LUCIA",SortOrder:1,Active:true},{Id:"MF",PhoneCode:" 590",States:null,Name:"SAINT MARTIN (FRENCH PART)",Description:"SAINT MARTIN (FRENCH PART)",SortOrder:1,Active:true},{Id:"PM",PhoneCode:"508 ",States:null,Name:"SAINT PIERRE AND MIQUELON",Description:"SAINT PIERRE AND MIQUELON",SortOrder:1,Active:true},{Id:"VC",PhoneCode:"1784 ",States:null,Name:"SAINT VINCENT AND THE GRENADINES",Description:"SAINT VINCENT AND THE GRENADINES",SortOrder:1,Active:true},{Id:"WS",PhoneCode:"685 ",States:null,Name:"SAMOA",Description:"SAMOA",SortOrder:1,Active:true},{Id:"SM",PhoneCode:"378 ",States:null,Name:"SAN MARINO",Description:"SAN MARINO",SortOrder:1,Active:true},{Id:"ST",PhoneCode:"239 ",States:null,Name:"SAO TOME AND PRINCIPE",Description:"SAO TOME AND PRINCIPE",SortOrder:1,Active:true},{Id:"SA",PhoneCode:" 966",States:null,Name:"SAUDI ARABIA",Description:"SAUDI ARABIA",SortOrder:1,Active:true},{Id:"SN",PhoneCode:"221 ",States:null,Name:"SENEGAL",Description:"SENEGAL",SortOrder:1,Active:true},{Id:"RS",PhoneCode:" 381",States:null,Name:"SERBIA",Description:"SERBIA",SortOrder:1,Active:true},{Id:"SC",PhoneCode:"248 ",States:null,Name:"SEYCHELLES",Description:"SEYCHELLES",SortOrder:1,Active:true},{Id:"SL",PhoneCode:"232 ",States:null,Name:"SIERRA LEONE",Description:"SIERRA LEONE",SortOrder:1,Active:true},{Id:"SG",PhoneCode:"65 ",States:null,Name:"SINGAPORE",Description:"SINGAPORE",SortOrder:1,Active:true},{Id:"SX",PhoneCode:"1 ",States:null,Name:"SINT MAARTEN (DUTCH PART)",Description:"SINT MAARTEN (DUTCH PART)",SortOrder:1,Active:true},{Id:"SK",PhoneCode:"421 ",States:null,Name:"SLOVAKIA",Description:"SLOVAKIA",SortOrder:1,Active:true},{Id:"SI",PhoneCode:"386 ",States:null,Name:"SLOVENIA",Description:"SLOVENIA",SortOrder:1,Active:true},{Id:"SB",PhoneCode:"677 ",States:null,Name:"SOLOMON ISLANDS",Description:"SOLOMON ISLANDS",SortOrder:1,Active:true},{Id:"SO",PhoneCode:"252 ",States:null,Name:"SOMALIA",Description:"SOMALIA",SortOrder:1,Active:true},{Id:"ZA",PhoneCode:"27 ",States:null,Name:"SOUTH AFRICA",Description:"SOUTH AFRICA",SortOrder:1,Active:true},{Id:"GS",PhoneCode:"500",States:null,Name:"SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS",Description:"SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS",SortOrder:1,Active:true},{Id:"KR",PhoneCode:"82 ",States:null,Name:"SOUTH KOREA",Description:"SOUTH KOREA",SortOrder:1,Active:true},{Id:"SS",PhoneCode:"211",States:null,Name:"SOUTH SUDAN",Description:"SOUTH SUDAN",SortOrder:1,Active:true},{Id:"ES",PhoneCode:"34 ",States:null,Name:"SPAIN",Description:"SPAIN",SortOrder:1,Active:true},{Id:"LK",PhoneCode:"94 ",States:null,Name:"SRI LANKA",Description:"SRI LANKA",SortOrder:1,Active:true},{Id:"SD",PhoneCode:" 249",States:null,Name:"SUDAN",Description:"SUDAN",SortOrder:1,Active:true},{Id:"SR",PhoneCode:"597 ",States:null,Name:"SURINAME",Description:"SURINAME",SortOrder:1,Active:true},{Id:"SJ",PhoneCode:"47 ",States:null,Name:"SVALBARD AND JAN MAYEN",Description:"SVALBARD AND JAN MAYEN",SortOrder:1,Active:true},{Id:"SZ",PhoneCode:"268 ",States:null,Name:"SWAZILAND",Description:"SWAZILAND",SortOrder:1,Active:true},{Id:"SE",PhoneCode:"46 ",States:null,Name:"SWEDEN",Description:"SWEDEN",SortOrder:1,Active:true},{Id:"CH",PhoneCode:"41 ",States:null,Name:"SWITZERLAND",Description:"SWITZERLAND",SortOrder:1,Active:true},{Id:"SY",PhoneCode:"963 ",States:null,Name:"SYRIAN ARAB REPUBLIC",Description:"SYRIAN ARAB REPUBLIC",SortOrder:1,Active:true},{Id:"TW",PhoneCode:"886 ",States:null,Name:"TAIWAN",Description:"TAIWAN",SortOrder:1,Active:true},{Id:"TJ",PhoneCode:" 992",States:null,Name:"TAJIKISTAN",Description:"TAJIKISTAN",SortOrder:1,Active:true},{Id:"TZ",PhoneCode:"255 ",States:null,Name:"TANZANIA",Description:"TANZANIA",SortOrder:1,Active:true},{Id:"TH",PhoneCode:"66 ",States:null,Name:"THAILAND",Description:"THAILAND",SortOrder:1,Active:true},{Id:"TL",PhoneCode:"670 ",States:null,Name:"TIMOR-LESTE",Description:"TIMOR-LESTE",SortOrder:1,Active:true},{Id:"TG",PhoneCode:"228 ",States:null,Name:"TOGO",Description:"TOGO",SortOrder:1,Active:true},{Id:"TK",PhoneCode:"690 ",States:null,Name:"TOKELAU",Description:"TOKELAU",SortOrder:1,Active:true},{Id:"TO",PhoneCode:"676 ",States:null,Name:"TONGA",Description:"TONGA",SortOrder:1,Active:true},{Id:"TT",PhoneCode:"1868 ",States:null,Name:"TRINIDAD AND TOBAGO",Description:"TRINIDAD AND TOBAGO",SortOrder:1,Active:true},{Id:"TN",PhoneCode:"216 ",States:null,Name:"TUNISIA",Description:"TUNISIA",SortOrder:1,Active:true},{Id:"TR",PhoneCode:"90 ",States:null,Name:"TURKEY",Description:"TURKEY",SortOrder:1,Active:true},{Id:"TM",PhoneCode:"993 ",States:null,Name:"TURKMENISTAN",Description:"TURKMENISTAN",SortOrder:1,Active:true},{Id:"TC",PhoneCode:"1649 ",States:null,Name:"TURKS AND CAICOS",Description:"TURKS AND CAICOS",SortOrder:1,Active:true},{Id:"TV",PhoneCode:"688 ",States:null,Name:"TUVALU",Description:"TUVALU",SortOrder:1,Active:true},{Id:"UG",PhoneCode:"256 ",States:null,Name:"UGANDA",Description:"UGANDA",SortOrder:1,Active:true},{Id:"UA",PhoneCode:"380 ",States:null,Name:"UKRAINE",Description:"UKRAINE",SortOrder:1,Active:true},{Id:"AE",PhoneCode:"971 ",States:null,Name:"UNITED ARAB EMIRATES",Description:"UNITED ARAB EMIRATES",SortOrder:1,Active:true},{Id:"GB",PhoneCode:"44 ",States:null,Name:"UNITED KINGDOM",Description:"UNITED KINGDOM",SortOrder:1,Active:true},{Id:"UY",PhoneCode:"598 ",States:null,Name:"URUGUAY",Description:"URUGUAY",SortOrder:1,Active:true},{Id:"UZ",PhoneCode:"998 ",States:null,Name:"UZBEKISTAN",Description:"UZBEKISTAN",SortOrder:1,Active:true},{Id:"VU",PhoneCode:"678 ",States:null,Name:"VANUATU",Description:"VANUATU",SortOrder:1,Active:true},{Id:"VA",PhoneCode:"379 ",States:null,Name:"VATICAN CITY",Description:"VATICAN CITY",SortOrder:1,Active:true},{Id:"VE",PhoneCode:"58 ",States:null,Name:"VENEZUELA",Description:"VENEZUELA",SortOrder:1,Active:true},{Id:"VN",PhoneCode:"84 ",States:null,Name:"VIETNAM",Description:"VIETNAM",SortOrder:1,Active:true},{Id:"VG",PhoneCode:"1284 ",States:null,Name:"VIRGIN ISLANDS, BRITISH",Description:"VIRGIN ISLANDS, BRITISH",SortOrder:1,Active:true},{Id:"VI",PhoneCode:"1340 ",States:null,Name:"VIRGIN ISLANDS, U.S.",Description:"VIRGIN ISLANDS, U.S.",SortOrder:1,Active:true},{Id:"WF",PhoneCode:"681 ",States:null,Name:"WALLIS AND FUTUNA",Description:"WALLIS AND FUTUNA",SortOrder:1,Active:true},{Id:"EH",PhoneCode:"212 ",States:null,Name:"WESTERN SAHARA",Description:"WESTERN SAHARA",SortOrder:1,Active:true},{Id:"YE",PhoneCode:"967 ",States:null,Name:"YEMEN",Description:"YEMEN",SortOrder:1,Active:true},{Id:"ZM",PhoneCode:"260 ",States:null,Name:"ZAMBIA",Description:"ZAMBIA",SortOrder:1,Active:true},{Id:"ZW",PhoneCode:"263 ",States:null,Name:"ZIMBABWE",Description:"ZIMBABWE",SortOrder:1,Active:true}];const G=(e,t,...r)=>{if(e===o.LOCALDEVELOPMENT||e===o.STAGING){console.log(t,...r)}};async function F(e,t,r,a=o.PRODUCTION){const i=n(a);const s=`${i.BASE_URL}${i.RELATIVE_URLS.ADD_CARD}`;G(a,"Add Card Request Details:",{url:s,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.substring(0,5)}...${e.substring(e.length-5)}`,"X-SW-API-KEY":`${t.substring(0,5)}...${t.substring(t.length-5)}`},body:JSON.stringify(r)});try{const o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,"X-SW-API-KEY":t},body:JSON.stringify(r)});G(a,"Add Card Response Status:",o.status,o.statusText);const i=await o.json();G(a,"Add Card Response Data:",i);if(i.status===400){G(a,"Validation Error Response:",i);return{success:false,errors:H(i,a)}}if(!o.ok){console.error("API Error Response:",{status:o.status,statusText:o.statusText,data:i});return{success:false,message:"An error occurred while adding the card."}}G(a,"Card added successfully:",i);return{success:true,data:i}}catch(e){console.error("Error adding card:",{error:e,message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:undefined});return{success:false,message:"An unexpected error occurred."}}}function H(e,t){let r=[];if(e.errors){for(const a in e.errors){if(e.errors[a]&&Array.isArray(e.errors[a])){const o=e.errors[a];for(const e of o){if(V(a)){G(t,`Field-specific error (${a}): showing as-is:`,e);r.push(e)}else{const a=I(e);G(t,`Non-field error: "${e}" → "${a}"`);r.push(a)}}}}}else if(e.detail){const t=I(e.detail);r=[t]}else{r=["An unknown error occurred. Please try again."]}const a=[...new Set(r)];G(t,"Final processed messages (duplicates removed):",a);return a}function V(e){const t=[/^ExpirationYear$/i,/^ExpirationMonth$/i,/^CardNumber$/i,/^CardHolder$/i,/^BillingAddress\./i,/^PayorInformation\./i,/^WalletOwnerIdentifiers\./i,/^AccountNumber$/i,/^RoutingNumber$/i,/^BankAccountType$/i];return t.some((t=>t.test(e)))}const Y=e=>{const t=/^\s*(?:p[\W_]*[o0]?|post(?:al)?)\s*(?:(?:[\W_]*[o0]ffice)?[\W_]*(?:b[o0]x|bin)|[\W_]*[o0]ffice)\s*(?:\d+)?\s*$/im;return t.test(e)};const K='@import url(\'https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap\'); .add-new-payment{margin-top:20px;padding:20px}.add-new-payment h3{margin-top:0;margin-bottom:20px;font-weight:700;}.add-new-payment select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:white;border:1px solid #ccc;border-radius:4px;padding:8px 12px;font-size:14px;color:#333;cursor:pointer;background-image:url(\'data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 5"><path fill="%23666" d="M2 0L0 2h4zm0 5L0 3h4z"/></svg>\');background-repeat:no-repeat;background-position:right 8px center;background-size:12px;padding-right:30px}.add-new-payment select:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px rgba(0, 123, 255, 0.25)}.add-new-payment select option{padding:8px;background-color:white;color:#333}.add-new-payment select option:hover{background-color:#f0f0f0}.dropdown-wrapper{position:relative;width:100%;margin-bottom:0px}.dropdown-header{all:unset;display:block;width:90%;padding:8px;border:1px solid #e9eaeb;border-radius:12px;font-weight:500;font-size:14px;cursor:pointer;background-color:white;margin-bottom:0px;transition:border 0.2s ease}.dropdown-header:focus{outline:none;border:1px solid #282829}.dropdown-list{position:absolute;width:100%;top:100%;left:0;z-index:10;background-color:white;border:1px solid #e9eaeb;border-radius:12px;opacity:1;transform:none;transform-origin:100px 0px;transition:opacity 263ms cubic-bezier(0.4, 0, 0.2, 1),\r\n              transform 175ms cubic-bezier(0.4, 0, 0.2, 1);max-height:150px;list-style-type:none;padding-left:0px;margin:0px;overflow-y:auto;scrollbar-width:none;scroll-behavior:smooth;min-width:250px}.dropdown-item{padding:8px 10px;font-size:14px !important;font-weight:400 !important;color:#282829 !important;cursor:pointer}.dropdown-item:hover{background-color:#e9eaeb}.dropdown-content{display:flex;justify-content:space-between;width:100%;margin-bottom:0px}.dropdown-button{all:unset;width:100%;display:block;cursor:pointer}.addressVerification-message-warning-info,.addressVerification-message-error-info{padding:0px 16px;border-radius:8px;box-shadow:0 1px 3px rgba(0, 0, 0, 0.05);margin:0px 0px 16px 0px;width:100%;display:flex;flex-direction:row;gap:2px;overflow:visible !important;max-height:none;align-items:flex-start;min-width:297px;min-height:103px}.addressVerification-message-warning-info{background-color:#E3F2FC;border-left:13px solid #0076CC}.addressVerification-message-error-info{background-color:#FFEBEE;border-left:13px solid #D01A1F}.addressVerification-message-notice-body{white-space:pre-wrap;word-break:break-word;margin-top:26px}.addressVerification-message-warning-content{white-space:pre-line;margin:0px;word-break:break-word;font-weight:400}.addressVerification-close-btn{background:none;border:none;font-size:24px;font-weight:bold;color:#6B7280;cursor:pointer;margin-top:22px}.addressVerification-close-btn:hover{color:#374151}.required-asterisk{color:red}.add-new-payment date-picker .date-picker-wrapper{margin-bottom:0px !important}.error::before,.error::after{display:none !important}';const $=class{constructor(r){e(this,r);this.goToPaymentSelector=t(this,"goToPaymentSelector");this.addressValidation=t(this,"addressValidation");this.cardAdded=t(this,"cardAdded")}goToPaymentSelector;addressValidation;errorBannerRef=null;devLog=(e,...t)=>{if(this.environment===o.LOCALDEVELOPMENT||this.environment===o.STAGING){console.log(e,...t)}};formattedMobileNumber;showAddNewPayment=false;showPaymentSelector=true;operationsToken;userScopedAccessToken;environment=o.PRODUCTION;availableCreditCards;cardAdded;nameOnCard="";cardNumber="";expiryDate="";cvv="";cardType="";address2="";dateofBirth="";paymentAccountNickname="";firstName="";lastName="";address1="";city="";state="";country="";zipCode="";mobilePhoneNumber="";selectedPhoneCode="";isPhoneCodeDropdownOpen=false;emailAddress="";apiErrors={};isLoading=false;mfaPopUp=false;addCardRequestPayload;mfaResponsePayload;isAddressSuggestion=false;brokenRules=[];errors={nameOnCard:"",cardNumber:"",expiryDate:"",cvv:"",firstName:"",lastName:"",address1:"",city:"",state:"",country:"",zipCode:"",address2:"",dateofBirth:"",paymentAccountNickname:"",mobilePhoneNumber:"",emailAddress:"",selectedPhoneCode:""};isAddressResubmission=false;get el(){return r(this)}dropdownWrapper;componentWillLoad(){C("AddNewPayment",this.environment)}detectCardType(e){if(/^4/.test(e))return s.VISA;if(/^5[1-5]/.test(e)||/^2(22[1-9]|2[3-9]\d|[3-6]\d{2}|7[0-1]\d|720)/.test(e))return s.MASTERCARD;if(/^3[47]/.test(e))return s.AMEX;if(/^6011/.test(e)||/^65\d{2}/.test(e)||/^64[4-9]\d/.test(e)||/^622(12[6-9]|1[3-9]\d|[2-8]\d{2}|9[0-1]\d|92[0-5])/.test(e))return s.DISCOVER;if(/^3(0[0-5]|[68]|9)/.test(e))return s.DINERS;if(/^35(2[89]|[3-8]\d)/.test(e))return s.JCB;if(/^62[013-9]/.test(e)||/^628[0-8]/.test(e)||/^81[0-7]/.test(e))return s.UNIONPAY;return""}formatCardNumber(e){const t=e.replace(/\D/g,"");let r=t;if(this.cardType===s.AMEX){r=t.replace(/(\d{4})(\d{6})?(\d{5})?/,((e,t,r,a)=>[t,r,a].filter(Boolean).join(" ")))}else if(this.cardType===s.DINERS&&r.length<=14){r=t.replace(/(\d{4})(\d{6})?(\d{4})?/,((e,t,r,a)=>[t,r,a].filter(Boolean).join(" ")))}else{r=t.replace(/(\d{4})(\d{4})?(\d{4})?(\d{4})?/,((e,t,r,a,o)=>[t,r,a,o].filter(Boolean).join(" ")))}return r}mapCardTypeToAvailableCC(e){const t={[s.VISA]:"Visa",[s.MASTERCARD]:"Mastercard",[s.AMEX]:"American_Express",[s.DISCOVER]:"Discover",[s.DINERS]:"Diners_Club",[s.JCB]:"JCB"};return t[e]||e}validateCardTypeSupported(){const e={};if(!this.availableCreditCards||!this.cardType){return e}if(this.availableCreditCards.length===0){e.cardNumber=`${this.cardType} cards are not allowed.`;return e}const t=this.mapCardTypeToAvailableCC(this.cardType);const r=this.availableCreditCards.some((e=>e.name===t));if(!r){e.cardNumber=`${this.cardType} cards are not allowed.`}return e}getExpectedCardLength(){const e={[s.VISA]:[13,16,19],[s.MASTERCARD]:16,[s.AMEX]:15,[s.DISCOVER]:16,[s.DINERS]:[14,16],[s.JCB]:[16,17,18,19],[s.UNIONPAY]:[16,17,18,19]};return e[this.cardType]||16}isValidCardLength(e){const t=this.getExpectedCardLength();if(Array.isArray(t)){return t.includes(e)}return e===t}handleCardNumberChange(e){const t=e.replace(/\D/g,"");this.cardNumber=this.formatCardNumber(e);this.cardType=this.detectCardType(t);if(this.errors.cardNumber){this.errors={...this.errors,cardNumber:""}}}handleInputChange(e,t){this[e]=t;if(this.errors[e]){this.errors={...this.errors,[e]:""}}}handleMobileNumberChange(e){const t=e.target;let r="";if(this.country==="US"){r=t.value.replace(/\D/g,"").slice(0,10)}else{r=t.value.replace(/\D/g,"")}let a="";if(this.country==="US"){if(r.length>6){a=`(${r.slice(0,3)}) ${r.slice(3,6)}-${r.slice(6)}`}else if(r.length>3){a=`(${r.slice(0,3)}) ${r.slice(3)}`}else if(r.length>0){a=`(${r}`}}else{a=r}t.value=a;this.mobilePhoneNumber=a;if(this.errors[t.id]){this.errors={...this.errors,[t.id]:""}}}handleExpiryDateKeyDown(e){const t=e.target;const r=t.selectionStart||0;if(e.key==="Backspace"){if(r===3&&t.value.charAt(2)==="/"){e.preventDefault();const r=t.value.slice(0,2);this.expiryDate=r;t.value=r;setTimeout((()=>{t.setSelectionRange(2,2)}),0);return}}}handleBirthDateChange(e){const t=e.replace(/\D/g,"");let r="";if(t.length>0){r+=t.slice(0,2);if(t.length>2){r+="/"+t.slice(2,4);if(t.length>4){r+="/"+t.slice(4,8)}}}this.dateofBirth=r;if(this.errors.dateofBirth){this.errors={...this.errors,dateofBirth:""}}}handleExpiryDateChange(e){const t=e.target;const r=t.value.replace(/\D/g,"");let a="";if(r.length>0){a=r.slice(0,2);if(r.length>=2){a+="/"+r.slice(2)}a=a.slice(0,5)}this.expiryDate=a;t.value=a;if(this.errors.expiryDate){this.errors={...this.errors,expiryDate:""}}}showErrorBanner(e){setTimeout((()=>{if(e?.length>0&&this.errorBannerRef){this.devLog("showErrorBanner");const e=this.errorBannerRef.offsetTop;this.scrollToView(e)}}),300)}scrollToView(e){window.scrollTo({top:e-20,behavior:"smooth"})}handleStateChange(e){const t=e.target;const r=U(this.country).find((e=>e.code===t.value));if(r){this.state=r.code;this.errors={...this.errors,state:""}}else{this.state="";this.errors={...this.errors,state:""}}}isCountryUS(){return this.country==="US"}isCountryUSorCanada(){return this.country==="US"||this.country==="CA"}getDefaultState(){return""}handleCountryChange(e){const t=e.target;const r=B.find((e=>e.code===t.value));if(r){this.country=r.code;this.errors={...this.errors,country:"",selectedPhoneCode:""};this.state="";if(this.country==="US"){this.mobilePhoneNumber="";this.selectedPhoneCode=""}if(this.country!=="US"){const e=new Map(x.map((e=>[e.Id,e.PhoneCode])));this.selectedPhoneCode=e.get(this.country)||"";this.mobilePhoneNumber=""}}else{this.country="";this.selectedPhoneCode="";this.errors={...this.errors,country:"",selectedPhoneCode:""};this.state=""}}handlePhoneCodeChange(e){const t=e.target;if(this.errors[t.id]){this.errors={...this.errors,[t.id]:""}}this.selectedPhoneCode=t.value}isValidCardNumber(e){let t=0;let r=false;for(let a=e.length-1;a>=0;a--){let o=parseInt(e[a],10);if(r){o*=2;if(o>9){o-=9}}t+=o;r=!r}return t%10===0}validateMobilePhoneNumber(){const e={};const t=this.mobilePhoneNumber.trim();if(t.length===0){e.mobilePhoneNumber="Mobile Phone Number is required."}else{let r;if(this.country==="US"){r=/^\([1-9]\d{2}\)\s?\d{3}-\d{4}$/g}else{r=/^\d*$/g}if(!r.test(t)){e.mobilePhoneNumber="Invalid Mobile Phone Number"}}return e}validateEmailAddress(){const e={};if(!this.emailAddress.trim()){e.emailAddress="E-Mail Address is required."}else if(this.emailAddress.trim().length>60){e.emailAddress="E-Mail Address must not exceed 60 characters."}else{const t=/^([\w-.]+@([\w-]+\.)+[\w-]{2,4})$/;if(!t.test(this.emailAddress.trim())){e.emailAddress="Please enter a valid E-Mail Address."}}return e}validateSelectedPhoneCode(){const e={};if(!this.isCountryUS()&&!this.selectedPhoneCode.trim()){e.selectedPhoneCode="Country Code is required"}return e}togglePhoneCodeDropdown=e=>{e.stopPropagation();this.isPhoneCodeDropdownOpen=!this.isPhoneCodeDropdownOpen;this.errors={...this.errors,selectedPhoneCode:""};if(this.isPhoneCodeDropdownOpen){document.addEventListener("click",this.handleOutsideClick);document.addEventListener("keydown",this.handleEscapePress)}else{this.removeDropdownListeners()}};selectPhoneCode=e=>{this.selectedPhoneCode=e;this.isPhoneCodeDropdownOpen=false;this.errors={...this.errors,selectedPhoneCode:""};this.removeDropdownListeners()};handleOutsideClick=e=>{if(this.dropdownWrapper&&!this.dropdownWrapper.contains(e.target)){this.isPhoneCodeDropdownOpen=false;this.removeDropdownListeners()}};handleEscapePress=e=>{if(e.key==="Escape"){this.isPhoneCodeDropdownOpen=false;this.removeDropdownListeners()}};removeDropdownListeners(){document.removeEventListener("click",this.handleOutsideClick);document.removeEventListener("keydown",this.handleEscapePress)}validateCardFields(){const e={};const t=this.cardNumber.replace(/\s/g,"");if(t.length===0){e.cardNumber="Card Number is required.";return e}const r=this.validateCardTypeSupported();if(r.cardNumber){e.cardNumber=r.cardNumber;return e}if(this.cardType&&!this.isValidCardLength(t.length)){e.cardNumber=`Please enter a valid Card Number.`}else if(!this.isValidCardNumber(t)){e.cardNumber="Invalid Card Number."}const a=this.cardType===s.AMEX?/^\d{4}$/:/^\d{3}$/;if(!/^\d+$/.test(this.cvv)){e.cvv="CVV must contain only numbers."}else if(!a.test(this.cvv)){e.cvv=`CVV must be ${this.cardType===s.AMEX?"4":"3"} digits.`}return e}validateExpiryDate(){const e={};const t=/^(0[1-9]|1[0-2])\/\d{2}$/.test(this.expiryDate);if(t){const[t,r]=this.expiryDate.split("/");const a=parseInt(t,10);const o=parseInt("20"+r,10);const i=new Date;const n=i.getMonth()+1;const s=i.getFullYear();if(o<s||o===s&&a<n){e.expiryDate="Card has expired. Please enter a valid Expiry Date."}const d=s+10;if(o>d||o===d&&a>n){e.expiryDate="Card expiry date cannot be more than 10 years from today."}}else{e.expiryDate="Expiry Date must be in MM/YY format."}return e}validatePersonalFields(){const e={};if(!this.nameOnCard.trim())e.nameOnCard="Name on Card is required.";if(!this.firstName.trim())e.firstName="First Name is required.";if(!this.lastName.trim())e.lastName="Last Name is required.";if(!this.paymentAccountNickname.trim())e.paymentAccountNickname="Payment Account Nickname is required.";return e}validateAddressFields(){const e={};if(!this.address1.trim()){e.address1="Address Line 1 is required."}else if(Y(this.address1)){e.address1="PO Boxes are not allowed. Please enter a valid Address Line 1."}if(this.address2.trim().length>0&&Y(this.address2)){e.address2="PO Boxes are not allowed. Please enter a valid Address Line 2."}if(!this.city.trim())e.city="City is required.";if(this.isCountryUSorCanada()&&!this.state.trim())e.state="State is required";if(!this.country.trim())e.country="Country is required.";if(!this.zipCode.trim())e.zipCode="Zip Code is required.";return e}validateDateOfBirth(){const e={};if(!this.dateofBirth.trim()){e.dateofBirth="Date of Birth is required.";return e}const t=/^(0[1-9]|1[012])[- /.](0[1-9]|[12]\d|3[01])[- /.](19|20)\d\d$/g;if(!t.test(this.dateofBirth)){e.dateofBirth="Please enter a valid date in MM/DD/YYYY format.";return e}const r=new Date(this.dateofBirth);const a=new Date;a.setFullYear(a.getFullYear()-18);if(r>a){e.dateofBirth="Must be at least 18 years of age."}return e}handleMfaError(e){if(e?.length>0){this.brokenRules=[e[0]];this.showErrorBanner(e)}}handleClosePopup=()=>{this.mfaPopUp=false};validate(){const e={nameOnCard:"",cardNumber:"",expiryDate:"",cvv:"",firstName:"",lastName:"",address1:"",address2:"",dateofBirth:"",paymentAccountNickname:"",city:"",state:"",country:"",zipCode:"",mobilePhoneNumber:"",emailAddress:"",selectedPhoneCode:"",...this.validateCardFields(),...this.validateExpiryDate(),...this.validatePersonalFields(),...this.validateAddressFields(),...this.validateDateOfBirth(),...this.validateMobilePhoneNumber(),...this.validateEmailAddress(),...this.validateSelectedPhoneCode()};this.scrollToFirstError();this.errors=e;return Object.keys(e).every((t=>!e[t]))}scrollToFirstError(){requestAnimationFrame((()=>{const e=this.el.querySelector(".validation-error");if(e){e.scrollIntoView({behavior:"smooth",block:"start"})}}))}async handleSubmit(e){e.preventDefault();this.isLoading=true;this.apiErrors={};this.brokenRules=[];if(!this.validate()){this.isLoading=false;return}const[t,r]=this.expiryDate.split("/");const a=`20${r}`;this.formattedMobileNumber=this.selectedPhoneCode?"+"+this.selectedPhoneCode.trim()+this.mobilePhoneNumber.trim():this.mobilePhoneNumber;const o={walletOwnerIdentifiers:{customer:{customerInformation:{firstName:this.firstName,lastName:this.lastName}}},accountReferenceId:"cardtoken-"+Date.now(),cardHolder:this.nameOnCard,billingAddress:{addressLine1:this.address1,addressLine2:this.address2,city:this.city,provinceOrStateCode:this.isCountryUSorCanada()?this.state:"",countryCode:this.country||"US",postalCode:this.zipCode,addressType:d.Primary},cardNumber:this.cardNumber.replace(/\s/g,""),payorInformation:{firstName:this.firstName,lastName:this.lastName,paymentAccountNickname:this.paymentAccountNickname,validateAddress:!this.isAddressResubmission,dateofBirth:this.formatDateForAPI(this.dateofBirth),contactInformation:{emailAddress:this.emailAddress,phoneNumber:this.formattedMobileNumber},identityVerificationInformation:null},expirationMonth:t,expirationYear:a,tokenizationType:2};this.addCardRequestPayload=o;h.commit();try{const e=await F(this.operationsToken,this.userScopedAccessToken,o,this.environment);this.devLog("paymentInstrument,data,status:",e?.data?.paymentInstrument?.paymentInstrumentToken,e?.data,e.success);if(e.success&&e?.data?.paymentInstrument?.paymentInstrumentToken){this.handleSuccess(e)}else if(e.success&&e?.data?.AccountStatus){this.handleResponseSuccess(e)}else{this.handleResponseError(e)}}catch(e){console.error("❌ Unexpected error in payment submission:",e);y(e.message||"Unexpected error occurred");this.apiErrors={General:[e.message||"An unexpected error occurred."]}}finally{this.isLoading=false}}handleResponseSuccess(e){this.brokenRules=e?.data?.BrokenRules||[];if(e?.data?.AccountStatus===c.AddressSuggested){this.isAddressSuggestion=true}else{this.isAddressSuggestion=false}if(this.brokenRules.length>0){this.devLog("response.success");this.showErrorBanner(this.brokenRules)}const t=e?.data?.AccountStatus;switch(t){case c.AddressSuggested:this.handleAddressValidation(e);break;case c.MFAPending:this.mfaPopUp=true;this.mfaResponsePayload=e;break;case c.AddressValidationError:case c.AddressValidationUnknownStatus:this.handleValidationError(e);break;case c.Saved:this.handleSuccess(e);break;default:this.handleUnknownError(e);break}}handleResponseError(e){const t=e?.message||"Payment method addition failed";y(t);if(e.errors){k("payment",e.errors);this.apiErrors=e.errors.reduce(((e,t)=>{e.General=e.General||[];e.General.push(t);return e}),{})}else if(e.message){k("payment",[e.message]);this.apiErrors={General:[e.message]}}}handleAddressValidation(e){this.address1=e.data.SuggestedAddresses[0].AddressLine1;this.address2=e.data.SuggestedAddresses[0].AddressLine2;this.city=e.data.SuggestedAddresses[0].City;this.zipCode=e.data.SuggestedAddresses[0].PostalCode;this.applySuggested(e.data.SuggestedAddresses[0].CountryCode,e.data.SuggestedAddresses[0].ProvinceOrStateCode);this.isAddressResubmission=true;const t=e?.data?.BrokenRules?.[0]||"Address updated. Please review and confirm the changes before submitting.";this.addressValidation.emit(t);this.devLog("Address updated event emitted:",{message:t,AddressValidation:c[c.AddressSuggested]})}handleValidationError(e){let t=e?.data?.BrokenRules?.[0];if(e?.data?.AccountStatus===c.AddressValidationError){t=t||"Address provided could not be validated. Please update the provided address and resubmit."}else if(e?.data?.AccountStatus===c.AddressValidationUnknownStatus){t=t||"Address could not be validated. Please update and resubmit."}else{t=t||"Payment method addition failed."}this.isAddressResubmission=true;y("Address validation error: "+t);this.addressValidation.emit(t);this.devLog("addressValidation event emitted:",{message:t,AddressValidation:c[e?.data?.AccountStatus]})}handleUnknownError(e){if(!e?.data?.BrokenRules?.length){e.data={...e.data,BrokenRules:["Payment method addition failed"]}}let t=e.data.BrokenRules[0];this.brokenRules=e.data.BrokenRules;this.showErrorBanner(this.brokenRules);y("Unknown Error: "+t);this.addressValidation.emit(t);this.devLog("Event emitted:",{message:t,UnKnown:c[e?.data?.AccountStatus]})}applySuggested(e,t){const r=B.find((t=>t.code===e));if(r){this.country=r.code;this.errors={...this.errors,country:""};this.state=""}else{this.country="";this.errors={...this.errors,country:""};this.state=""}if(this.isCountryUSorCanada()){const e=U(this.country).some((e=>e.code===t));if(e)this.state=t}this.devLog("Applied suggested address:",{countryCode:e,stateCode:t})}handleSuccess(e){this.devLog("🎉 Payment method added successfully, tracking event...");D({cardType:this.cardType,lastFourDigits:this.cardNumber.slice(-4),expiryDate:this.expiryDate});this.devLog("✅ Success event tracked");const t=e.data.paymentInstrument.paymentInstrumentToken;this.devLog("Emitting payment instrument token:",t);this.devLog("Full response:",e);this.cardAdded.emit(t);this.resetForm()}goToWallet=()=>{P();this.goToPaymentSelector.emit(true)};formatDateForAPI(e){if(!e||e.trim()===""){return""}const t=e.split("/");if(t.length!==3){return e}const r=t[0].padStart(2,"0");const a=t[1].padStart(2,"0");const o=t[2];return`${o}-${r}-${a}`}resetForm(){this.nameOnCard="";this.cardNumber="";this.expiryDate="";this.cvv="";this.cardType="";this.firstName="";this.lastName="";this.address1="";this.city="";this.state="";this.zipCode="";this.country="";this.address2="";this.dateofBirth="";this.paymentAccountNickname="";this.isAddressResubmission=false;this.brokenRules=[];this.mobilePhoneNumber="";this.emailAddress="";this.selectedPhoneCode="";this.errors={nameOnCard:"",cardNumber:"",expiryDate:"",cvv:"",firstName:"",lastName:"",address1:"",city:"",state:"",country:"",zipCode:"",address2:"",dateofBirth:"",paymentAccountNickname:"",mobilePhoneNumber:"",emailAddress:"",selectedPhoneCode:""}}handleCloseBanner=()=>{this.brokenRules=[]};renderErrorBanner(){if(!this.brokenRules.length)return null;return a("div",{ref:e=>this.errorBannerRef=e,class:`${this.isAddressSuggestion?"addressVerification-message-warning-info":"addressVerification-message-error-info"}`},a("div",{class:"addressVerification-message-notice-body"},a("div",{class:"addressVerification-message-warning-content"},this.brokenRules[0])),a("button",{class:"addressVerification-close-btn",type:"button","aria-label":"Close",onClick:this.handleCloseBanner},"×"))}renderApiErrors(){if(!Object.keys(this.apiErrors).length)return null;return a("div",{class:"api-errors"},a("div",{class:"error-content"},a("h5",null,"Error Message"),a("ul",null,Object.entries(this.apiErrors).map((([e,t])=>t.map(((t,r)=>a("li",{key:`${e}-${r}`},a("strong",null,e==="General"?"":`${e}: `),t))))))))}renderCardFields(){return a("div",{class:"wallet-row"},a("div",{class:"wallet-col-lg-3 wallet-col-md-6"},a("label",{htmlFor:"name-on-card",class:this.errors.nameOnCard?"validation-error":""},"Name on Card ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"name-on-card",placeholder:"Enter Name on Card",value:this.nameOnCard,onInput:e=>this.handleInputChange("nameOnCard",e.target.value)}),this.errors.nameOnCard&&a("span",{class:"error"},this.errors.nameOnCard)),a("div",{class:"wallet-col-lg-3 wallet-col-md-6"},a("label",{htmlFor:"card-number",class:this.errors.cardNumber?"validation-error":""},"Card Number ",a("span",{class:"required-asterisk"},"*")," ",this.cardType&&a("span",null,"(",this.cardType,")")),a("input",{type:"text",id:"card-number",placeholder:"Enter Card Number",autoComplete:"cc-number",value:this.cardNumber,onInput:e=>this.handleCardNumberChange(e.target.value)}),this.errors.cardNumber&&a("span",{class:"error"},this.errors.cardNumber)),a("div",{class:"wallet-col-lg-3 wallet-col-md-6"},a("label",{htmlFor:"expiry-date",class:this.errors.expiryDate?"validation-error":""},"Expiry Date ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"expiry-date",autocomplete:"cc-exp",placeholder:"MM/YY",value:this.expiryDate,onInput:e=>this.handleExpiryDateChange(e),onKeyDown:e=>this.handleExpiryDateKeyDown(e)}),this.errors.expiryDate&&a("span",{class:"error"},this.errors.expiryDate)),a("div",{class:"wallet-col-lg-3 wallet-col-md-6"},a("label",{htmlFor:"cvv",class:this.errors.cvv?"validation-error":""},"CVV ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"cvv",inputmode:"numeric",autocomplete:"one-time-code","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true","data-form-type":"other",placeholder:"Enter CVV",value:this.cvv,onInput:e=>this.handleInputChange("cvv",e.target.value)}),this.errors.cvv&&a("span",{class:"error"},this.errors.cvv)))}renderMobilePhoneNumber(){return a("div",{class:"wallet-col-md-6"},a("label",{htmlFor:"MobilePhoneNumber",class:this.errors.mobilePhoneNumber?"validation-error":""}," ","Mobile Phone Number ",a("span",{class:"required-asterisk"},"*")),this.country==="US"?a("div",{class:"field-stack single-field"},a("div",{class:"input-wrapper"},a("input",{type:"text",id:"mobilePhoneNumber",placeholder:"Enter Mobile Phone Number",maxLength:14,value:this.mobilePhoneNumber,onInput:e=>this.handleMobileNumberChange(e)}),this.errors.mobilePhoneNumber&&a("span",{class:"error"},this.errors.mobilePhoneNumber))):a("div",{class:"field-stack dual-field"},a("div",{class:"input-wrapper"},a("div",{class:"dropdown-wrapper",ref:e=>this.dropdownWrapper=e},a("button",{type:"button",class:"dropdown-header",onClick:this.togglePhoneCodeDropdown,"aria-haspopup":"listbox","aria-expanded":this.isPhoneCodeDropdownOpen},"+",this.selectedPhoneCode||" "),this.isPhoneCodeDropdownOpen&&a("ul",{class:"dropdown-list"},x.map((e=>a("li",{class:"dropdown-item"},a("button",{type:"button",class:"dropdown-button",onClick:()=>this.selectPhoneCode(e.PhoneCode)},a("div",{class:"dropdown-content"},a("span",null,e.Description?.toLowerCase()),a("span",null,"+",e.PhoneCode)))))))),this.errors.selectedPhoneCode&&a("span",{class:"error"},this.errors.selectedPhoneCode)),a("div",{class:"input-wrapper"},a("input",{type:"text",id:"mobilePhoneNumber",placeholder:"Enter Mobile Phone Number",maxLength:20,value:this.mobilePhoneNumber,onInput:e=>this.handleMobileNumberChange(e)}),this.errors.mobilePhoneNumber&&a("span",{class:"error"},this.errors.mobilePhoneNumber))))}render(){return a("div",{key:"d22ac7c1d719a516d335fb89a3b5b93ff6fcd2ff",class:"add-new-payment"},a("h3",{key:"4ed1948a5e8ba3b071cf3467b4fd7c1c01a70de5"},"Add New Payment"),this.mfaPopUp&&a("mfa-model-popup",{key:"7c0159415841495c18972f54d24bad1ba1b52597",operationsToken:this.operationsToken,userScopedAccessToken:this.userScopedAccessToken,environment:this.environment,addRequestPayload:this.addCardRequestPayload,initialMfaResponse:this.mfaResponsePayload,requestType:"card",onClose:this.handleClosePopup,errorHandler:e=>this.handleMfaError(e),onSuccessEvent:e=>this.handleSuccess(e.detail)}),a("form",{key:"90b6b32fa2cf8eb14fbfaf6d2489ca357d9e9aa8",onSubmit:e=>this.handleSubmit(e)},this.renderErrorBanner(),this.renderCardFields(),a("h4",{key:"0b2d0b0e35fc924d3d37f114d1e418b6098fce1b"},"Billing Address"),a("div",{key:"2e54bdddcb818302b8c71d16025b490d499951d7",class:"wallet-row"},a("div",{key:"78a0e75100dc45429ac1a54cecfd3ab1c57a7496",class:"wallet-col-md-6"},a("label",{key:"c05f587f433c79418862f38ea49610c3a25195d5",htmlFor:"first-name",class:this.errors.firstName?"validation-error":""},"First Name ",a("span",{key:"d33b8fed704386df0ccb6b1e8fe7d9519a896a87",class:"required-asterisk"},"*")),a("input",{key:"169492f3be59046b47facd5b83b47b656a379092",type:"text",id:"first-name",autoComplete:"cc-given-name",placeholder:"Enter First Name",value:this.firstName,onInput:e=>this.handleInputChange("firstName",e.target.value)}),this.errors.firstName&&a("span",{key:"f03d32272b303050b6f1be6a7dd038a710eb32e1",class:"error"},this.errors.firstName)),a("div",{key:"78460aa79b8007e973be27f3f0fb29a24790748c",class:"wallet-col-md-6"},a("label",{key:"5d11d81af73820a48e1c200f676060ecc7cd005e",htmlFor:"last-name",class:this.errors.lastName?"validation-error":""},"Last Name ",a("span",{key:"39c32a941fc1e2e228ef8c66d64c5c3cf1b0bd22",class:"required-asterisk"},"*")),a("input",{key:"9e5daa79cca73bbdcf6f9597bd872ec5f047e32d",type:"text",id:"last-name",autoComplete:"cc-family-name",placeholder:"Enter Last Name",value:this.lastName,onInput:e=>this.handleInputChange("lastName",e.target.value)}),this.errors.lastName&&a("span",{key:"e8102e5989bc6e12f7a5b37248075fc87a1406d3",class:"error"},this.errors.lastName)),a("div",{key:"d69cf90a01bc29a56542065cbab4518b30364d3a",class:"wallet-col-md-6"},a("label",{key:"e27c2dfb8bbb8498cdf09df3d1db86c7205b0969",htmlFor:"Nick-name",class:this.errors.paymentAccountNickname?"validation-error":""},"Payment Account Nickname ",a("span",{key:"3b7ecd198b9cacaaa526439d87b023c0d1110348",class:"required-asterisk"},"*")),a("input",{key:"3b0383edec8d3bedba414bd16a7a60dd51f9f616",type:"text",id:"Nick-name",autoComplete:"nickname",placeholder:"Enter Payment Account Nickname",value:this.paymentAccountNickname,onInput:e=>this.handleInputChange("paymentAccountNickname",e.target.value)}),this.errors.paymentAccountNickname&&a("span",{key:"43299acb6071eb0323aaea054dcbb6582399a4f8",class:"error"},this.errors.paymentAccountNickname)),a("div",{key:"e15b7abcf2cd6eb161d1b507cd30865256df364c",class:"wallet-col-md-6"},a("label",{key:"e417841be21f61d9b8e2c28d8d766390d3c6b3c9",htmlFor:"address1",class:this.errors.address1?"validation-error":""},"Address Line 1 ",a("span",{key:"2aba91c934025a57273fef0f8cd23373b689f314",class:"required-asterisk"},"*")),a("input",{key:"e4fb73289a0c8c6efb2fd55280b66349900fcccc",type:"text",id:"address1",autoComplete:"address-line1",placeholder:"Enter Address Line 1",value:this.address1,onInput:e=>this.handleInputChange("address1",e.target.value)}),this.errors.address1&&a("span",{key:"00beb3bd7e2f16cc2167c570d874f4d9c00172ce",class:"error"},this.errors.address1)),a("div",{key:"d8702224c109ea11aa4f41f083f1f82c007d4ff2",class:"wallet-col-md-6"},a("label",{key:"b6342f693f6b09b1058a814b87ba5b1292dd2f8f",htmlFor:"address2",class:this.errors.address1?"validation-error":""},"Address Line 2 (Optional)"),a("input",{key:"bd3816de541cd5fb3d3808d4f8d6f30327b0dbba",type:"text",id:"address2",autoComplete:"address-line2",placeholder:"Apt, suite, unit, etc. (optional)",value:this.address2,onInput:e=>this.handleInputChange("address2",e.target.value)}),this.errors.address2&&a("span",{key:"3515314c2659f2e925c146fed274a0c2411e2426",class:"error"},this.errors.address2)),a("div",{key:"ddcd1a9cadf5f74bba237ee5661499971e687ea2",class:"wallet-col-md-6"},a("label",{key:"ed8b78718a7fd0effac6dcc3aefda9f4d424372e",htmlFor:"city",class:this.errors.city?"validation-error":""},"City ",a("span",{key:"5c27e9268919f3e20d94427cde8f6b1daf174e7f",class:"required-asterisk"},"*")),a("input",{key:"b511afa926aac8a60e7d920f1a47eeb61090bc1f",type:"text",id:"city",autoComplete:"address-level2",placeholder:"Enter City",value:this.city,onInput:e=>this.handleInputChange("city",e.target.value)}),this.errors.city&&a("span",{key:"3425b99d4a3f19a140e22802e4497990e36fb0b2",class:"error"},this.errors.city)),a("div",{key:"fbb849ce4616453ec4bff40d5daa4560efa5d01c",class:"wallet-col-md-6"},a("label",{key:"da26c3551ec58700c7e39e1c5e1e49467ae32d77",htmlFor:"country",class:this.errors.country?"validation-error":""},"Country ",a("span",{key:"b9c3fe11f6c0fb8dbf821fc9a698ed5a4942a8b3",class:"required-asterisk"},"*")),a("select",{key:"32196cf4329aab240c1c7f544eb54eea1aed375a",id:"country",autoComplete:"country",onInput:e=>this.handleCountryChange(e)},a("option",{key:"54215bd8784a47d5c33c322530f13aa08a2baec9",value:""},"Select Country"),B.map((e=>a("option",{key:e.code,value:e.code,selected:this.country===e.code},e.name)))),this.errors.country&&a("span",{key:"68757851b4556d4ff0e92955712c33772ef5223d",class:"error"},this.errors.country)),(this.country==="US"||this.country==="CA")&&a("div",{key:"fecb2216ba2dc2241de00954d22b2d954f3c1ad5",class:"wallet-col-md-6"},a("label",{key:"ad5e86fb99e7a18d7150ac0e8aa4a8a3c3ec62d9",htmlFor:"state",class:this.errors.state?"validation-error":""},"State/Province ",a("span",{key:"c33dc65e8a9e19d4b716ae33a0e64befd9129ff4",class:"required-asterisk"},"*")),a("select",{key:"6f7bd4ee3040232fd446424e043a5ce1968b822a",id:"state",autoComplete:"address-level1",onInput:e=>this.handleStateChange(e)},a("option",{key:"48dacf82c9c3d895edddc3860833b894535d5cd5",value:""},"Select ",this.country==="US"?"State":"Province"),U(this.country).map((e=>a("option",{key:e.code,value:e.code,selected:this.state===e.code},e.name)))),this.errors.state&&a("span",{key:"9bbddf7d4192c4e7341af58c98dbf92427639e66",class:"error"},this.errors.state)),a("div",{key:"2f3916776eb1e1cabc5cec28b7229ea4800ca280",class:"wallet-col-md-6"},a("label",{key:"34e0cd61482767340e32648a03282b9e43864d34",htmlFor:"zip-code",class:this.errors.zipCode?"validation-error":""},"Zip Code ",a("span",{key:"ba03a96f8b25b431050f57e71a67981da7afda7f",class:"required-asterisk"},"*")),a("input",{key:"9714ab2f6bc2e4d226feac66bd1da26e01221189",type:"text",id:"zip-code",autocomplete:"postal-code",placeholder:"Enter ZIP Code",value:this.zipCode,onInput:e=>this.handleInputChange("zipCode",e.target.value)}),this.errors.zipCode&&a("span",{key:"644bb053b1acb3d09856d15ba9280bb415f1fbf7",class:"error"},this.errors.zipCode)),a("div",{key:"16054e0b3d9171becbf28d48e92e60fdf479b0c2",class:"wallet-col-md-6"},a("label",{key:"bf6f1f6b914e7cc6295c8257528243da0f4fa51d",htmlFor:"EmailAddress",class:this.errors.emailAddress?"validation-error":""},"E-Mail Address ",a("span",{key:"a16cb8f2d0ad73797f7027d80322db516b0d5321",class:"required-asterisk"},"*")),a("input",{key:"0459e450b874634cd3ee068a22cc4ce00e97a539",type:"text",id:"emailAddress",placeholder:"Enter E-Mail Address",value:this.emailAddress,onInput:e=>this.handleInputChange("emailAddress",e.target.value)}),this.errors.emailAddress&&a("span",{key:"69b1ec270e2de11c050cbc481aa9f887dd4a5ba4",class:"error"},this.errors.emailAddress)),this.renderMobilePhoneNumber(),a("div",{key:"f429d64b7822069bf67a1123472f238b4ffd374c",class:"wallet-col-md-6"},a("label",{key:"32a6ef291ecf2238a7a7f4222c5d971d40a74cbd",htmlFor:"Date-of-Birth",class:this.errors.dateofBirth?"validation-error":""},"Date of Birth ",a("span",{key:"e53ca86f168e97aa9d7c028ba5f59ccc3c3970ad",class:"required-asterisk"},"*")),a("date-picker",{key:"0410e8e81e1d2326c4a4c9d24576d18084816e51",value:this.dateofBirth,placeholder:"MM/DD/YYYY",inputId:"Date-of-Birth",minAge:18,onDateChange:e=>this.handleBirthDateChange(e.detail)}),this.errors.dateofBirth&&a("span",{key:"025fce8d4418178bfdd7f75df509acf418789c71",class:"error"},this.errors.dateofBirth))),this.renderApiErrors(),a("div",{key:"3d3388cb2e08efe4deefadb5ca3c374e06cc95e8",class:"wallet-col-12 footer"},a("md-filled-button",{key:"b5019317f2a66fd59359790c02061385331855f0",class:"button button-secondary",onClick:this.goToWallet},"Cancel"),this.isLoading?a("md-filled-button",{class:"button button-primary",type:"button"},"Adding Account"," ",a("span",{class:"dot-flashing"})):a("md-filled-button",{class:"button button-primary"},"Add Account"))))}};$.style=K;const W=(e,t,...r)=>{if(e===o.LOCALDEVELOPMENT||e===o.STAGING){console.log(t,...r)}};async function q(e,t,r,a=o.PRODUCTION){const i=n(a);const s=`${i.BASE_URL}${i.RELATIVE_URLS.ADD_BANK_ACCOUNT}`;W(a,"Add Bank Account Request Details:",{url:s,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.substring(0,5)}...${e.substring(e.length-5)}`,"X-SW-API-KEY":`${t.substring(0,5)}...${t.substring(t.length-5)}`},body:JSON.stringify(r)});try{const o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,"X-SW-API-KEY":t},body:JSON.stringify(r)});W(a,"Add Bank Account Response Status:",o.status,o.statusText);const i=await o.json();W(a,"Add Bank Account Response Data:",i);if(i.status===400){W(a,"Validation Error Response:",i);return{success:false,errors:z(i,a)}}if(!o.ok){console.error("API Error Response:",{status:o.status,statusText:o.statusText,data:i});return{success:false,message:"An error occurred while adding the bank account."}}W(a,"Bank account added successfully:",i);return{success:true,data:i}}catch(e){console.error("Error adding bank account:",{error:e,message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:undefined});return{success:false,message:"An unexpected error occurred."}}}function z(e,t){let r=[];if(e.errors){for(const a in e.errors){if(e.errors[a]&&Array.isArray(e.errors[a])){const o=e.errors[a];for(const e of o){if(Z(a)){W(t,`Field-specific error (${a}): showing as-is:`,e);r.push(e)}else{const a=b(e,"bank");W(t,`Non-field error: "${e}" → "${a.userMessage}"`);r.push(a.userMessage)}}}}}else if(e.detail){const t=b(e.detail,"bank");r=[t.userMessage]}else{r=["An unknown error occurred. Please try again."]}const a=[...new Set(r)];W(t,"Final processed messages (duplicates removed):",a);return a}function Z(e){const t=[/^ExpirationYear$/i,/^ExpirationMonth$/i,/^CardNumber$/i,/^CardHolder$/i,/^BillingAddress\./i,/^PayorInformation\./i,/^WalletOwnerIdentifiers\./i,/^AccountNumber$/i,/^RoutingNumber$/i,/^BankAccountType$/i];return t.some((t=>t.test(e)))}const J='@import url(\'https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap\'); .add-bank-account{margin-top:20px;padding:20px}.add-bank-account h3{margin-top:0;margin-bottom:20px;font-weight:700}.add-bank-account form{display:flex;flex-direction:column;gap:15px}.add-bank-account select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:white;border:1px solid #ccc;border-radius:4px;padding:8px 12px;font-size:14px;color:#333;cursor:pointer;background-image:url(\'data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 5"><path fill="%23666" d="M2 0L0 2h4zm0 5L0 3h4z"/></svg>\');background-repeat:no-repeat;background-position:right 8px center;background-size:12px;padding-right:30px}.add-bank-account select:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px rgba(0, 123, 255, 0.25)}.add-bank-account select option{padding:8px;background-color:white;color:#333}.add-bank-account select option:hover{background-color:#f0f0f0}.add-bank-account form button:not(date-picker button){width:100%;padding:12px;background-color:#007bff;color:white;border:none;border-radius:4px;font-size:1.1rem;font-weight:500;cursor:pointer;transition:background-color 0.3s ease, transform 0.2s ease}.add-bank-account form button:not(date-picker button):hover{background-color:#0056b3;transform:translateY(-2px)}.add-bank-account form button:active{background-color:#004085;transform:translateY(0)}.add-bank-account form button:disabled{background-color:#94c3f0;cursor:not-allowed;transform:none;position:relative;overflow:hidden}.add-bank-account form button:disabled::after{content:\'\';position:absolute;width:20px;height:20px;top:50%;left:50%;margin:-10px 0 0 -10px;border:2px solid #fff;border-top-color:transparent;border-radius:50%;animation:spin 0.8s linear infinite;opacity:0;transition:opacity 0.3s ease}.add-bank-account form button:disabled[data-loading="true"]{color:transparent}.add-bank-account form button:disabled[data-loading="true"]::after{opacity:1}@keyframes spin{to{transform:rotate(360deg)}}.add-bank-account form button:disabled{background-color:#94c3f0;cursor:not-allowed;transform:none;position:relative;overflow:hidden}.add-bank-account form button:disabled::after{content:\'\';position:absolute;width:20px;height:20px;top:50%;left:50%;margin:-10px 0 0 -10px;border:2px solid #fff;border-top-color:transparent;border-radius:50%;animation:spin 0.8s linear infinite;opacity:0;transition:opacity 0.3s ease}.add-bank-account form button:disabled[data-loading="true"]{color:transparent}.add-bank-account form button:disabled[data-loading="true"]::after{opacity:1}@keyframes spin{to{transform:rotate(360deg)}}.add-bank-account form input::placeholder{color:#aaa;font-style:italic}.bank-account-type{display:flex;flex-direction:row;gap:20px;align-items:center;margin-bottom:0;height:38px}.bank-account-type label{display:flex;align-items:center;gap:5px;cursor:pointer}.bank-account-type input[type="radio"]{width:auto;margin:0}.custom-radio{font-size:16px;font-weight:500}.dropdown-wrapper{position:relative;width:100%;margin-bottom:0px}.dropdown-wrapper button.dropdown-header{all:unset;display:block;width:90%;padding:8px;border:1px solid #e9eaeb;border-radius:12px;font-weight:500;font-size:14px;cursor:pointer;background-color:white;margin-bottom:0px;transition:border 0.2s ease}.dropdown-wrapper button.dropdown-header:focus{outline:none;border:1px solid #282829;background-color:transparent;transform:none}.dropdown-wrapper button.dropdown-header:hover{background-color:transparent;transform:none}.dropdown-list{position:absolute;width:100%;top:100%;left:0;z-index:10;background-color:white;border:1px solid #e9eaeb;border-radius:12px;opacity:1;transform:none;transform-origin:100px 0px;transition:opacity 263ms cubic-bezier(0.4, 0, 0.2, 1),\r\n              transform 175ms cubic-bezier(0.4, 0, 0.2, 1);max-height:150px;list-style-type:none;padding-left:0px;margin:0px;overflow-y:auto;scrollbar-width:none;scroll-behavior:smooth;min-width:250px}.dropdown-item{padding:8px 10px;font-size:14px !important;font-weight:400 !important;color:#282829 !important;cursor:pointer}.dropdown-item:hover{background-color:#e9eaeb}.dropdown-content{display:flex;justify-content:space-between;width:100%;margin-bottom:0px}.dropdown-wrapper button.dropdown-button{all:unset;width:100%;display:block;cursor:pointer}.dropdown-wrapper button.dropdown-button:hover{background-color:transparent;transform:none}.addressVerification-message-warning-info,.addressVerification-message-error-info{padding:0px 16px;border-radius:8px;box-shadow:0 1px 3px rgba(0, 0, 0, 0.05);margin:0px 0px 16px 0px;width:100%;display:flex;flex-direction:row;gap:2px;overflow:visible !important;max-height:none;align-items:flex-start;min-width:297px;min-height:103px}.addressVerification-message-warning-info{background-color:#E3F2FC;border-left:13px solid #0076CC}.addressVerification-message-error-info{background-color:#FFEBEE;border-left:13px solid #D01A1F}.addressVerification-message-notice-body{white-space:pre-wrap;word-break:break-word;margin-top:26px}.addressVerification-message-warning-content{white-space:pre-line;margin:0px;word-break:break-word;font-weight:400}.add-bank-account .addressVerification-close-btn{background:none;border:none;font-size:24px;font-weight:bold;color:#6B7280;cursor:pointer;margin-top:24px;width:auto;padding:0}.add-bank-account .addressVerification-close-btn:hover{color:#374151}.required-asterisk{color:red}date-picker button.date-picker-icon{width:auto !important;height:auto !important;padding:5px !important;background:none !important;border:none !important;color:#666 !important;font-size:14px !important;font-weight:normal !important;transform:none !important;transition:none !important;top:20%}date-picker button.date-picker-icon:hover{background:none !important;color:#333 !important;transform:none !important}date-picker button:not(.date-picker-icon){width:auto !important;background-color:white !important;color:#333 !important;font-size:14px !important;font-weight:normal !important;transform:none !important}date-picker button:not(.date-picker-icon):hover{background-color:#f5f5f5 !important;transform:none !important}date-picker .date-picker-day.selected,date-picker .year-picker-item.selected{background-color:#007bff !important;color:white !important}.add-bank-account date-picker .date-picker-wrapper{margin-bottom:0px !important}.error::before,.error::after{display:none !important}';const j=class{constructor(r){e(this,r);this.goToPaymentSelector=t(this,"goToPaymentSelector");this.addressValidation=t(this,"addressValidation");this.bankAccountAdded=t(this,"bankAccountAdded")}goToPaymentSelector;addressValidation;errorBannerRef=null;devLog=(e,...t)=>{if(this.environment===o.LOCALDEVELOPMENT||this.environment===o.STAGING){console.log(e,...t)}};formattedMobileNumber;operationsToken;userScopedAccessToken;environment=o.PRODUCTION;bankAccountAdded;accountHolderName="";accountNumber="";routingNumber="";bankAccountType=l.Checking;dateofBirth="";paymentAccountNickname="";firstName="";lastName="";address1="";address2="";city="";state="";country="";zipCode="";mobilePhoneNumber="";selectedPhoneCode="";isPhoneCodeDropdownOpen=false;emailAddress="";apiErrors={};isLoading=false;mfaPopUp=false;PaymentAccountRequestPayload;mfaResponsePayload;brokenRules=[];isAddressSuggestion=false;isVerifying=false;errors={accountHolderName:"",accountNumber:"",routingNumber:"",bankAccountType:"",firstName:"",lastName:"",address1:"",city:"",state:"",country:"",zipCode:"",address2:"",dateofBirth:"",paymentAccountNickname:"",mobilePhoneNumber:"",emailAddress:"",selectedPhoneCode:""};isAddressResubmission=false;get el(){return r(this)}dropdownWrapper;componentWillLoad(){C("AddBankAccount",this.environment)}handleInputChange(e,t){this[e]=t;if(this.errors[e]){this.errors={...this.errors,[e]:""}}}handleMobileNumberChange(e){const t=e.target;let r="";if(this.country==="US"){r=t.value.replace(/\D/g,"").slice(0,10)}else{r=t.value.replace(/\D/g,"")}let a="";if(this.country==="US"){if(r.length>6){a=`(${r.slice(0,3)}) ${r.slice(3,6)}-${r.slice(6)}`}else if(r.length>3){a=`(${r.slice(0,3)}) ${r.slice(3)}`}else if(r.length>0){a=`(${r}`}}else{a=r}t.value=a;this.mobilePhoneNumber=a;if(this.errors[t.id]){this.errors={...this.errors,[t.id]:""}}}showErrorBanner(e){setTimeout((()=>{if(e?.length>0&&this.errorBannerRef){this.devLog("showErrorBanner");const e=this.errorBannerRef.offsetTop;this.scrollToView(e)}}),300)}scrollToView(e){window.scrollTo({top:e-20,behavior:"smooth"})}handleStateChange(e){const t=e.target;const r=U(this.country).find((e=>e.code===t.value));if(r){this.state=r.code;this.errors={...this.errors,state:""}}else{this.state="";this.errors={...this.errors,state:""}}}isCountryUS(){return this.country==="US"}isCountryUSorCanada(){return this.country==="US"||this.country==="CA"}getProvinceOrStateCode(){return this.country==="US"||this.country==="CA"?this.state:""}getDefaultState(){return""}handleCountryChange(e){const t=e.target;const r=B.find((e=>e.code===t.value));if(r){this.country=r.code;this.errors={...this.errors,country:"",selectedPhoneCode:""};this.state="";if(this.country==="US"){this.mobilePhoneNumber="";this.selectedPhoneCode=""}if(this.country!=="US"){const e=new Map(x.map((e=>[e.Id,e.PhoneCode])));this.selectedPhoneCode=e.get(this.country)||"";this.mobilePhoneNumber=""}}else{this.country="";this.selectedPhoneCode="";this.errors={...this.errors,country:"",selectedPhoneCode:""};this.state=""}}handlePhoneCodeChange(e){const t=e.target;if(this.errors[t.id]){this.errors={...this.errors,[t.id]:""}}this.selectedPhoneCode=t.value}handleBirthDateChange(e){const t=e.replace(/\D/g,"");let r="";if(t.length>0){r+=t.slice(0,2);if(t.length>2){r+="/"+t.slice(2,4);if(t.length>4){r+="/"+t.slice(4,8)}}}this.dateofBirth=r;if(this.errors.dateofBirth){this.errors={...this.errors,dateofBirth:""}}}validateMobilePhoneNumber(){const e={};const t=this.mobilePhoneNumber.trim();if(t.length===0){e.mobilePhoneNumber="Mobile Phone Number is required."}else{let r;if(this.country==="US"){r=/^\([1-9]\d{2}\)\s?\d{3}-\d{4}$/g}else{r=/^\d*$/g}if(!r.test(t)){e.mobilePhoneNumber="Invalid Mobile Phone Number"}}return e}validateEmailAddress(){const e={};if(!this.emailAddress.trim()){e.emailAddress="E-Mail Address is required."}else if(this.emailAddress.trim().length>60){e.emailAddress="E-Mail Address must not exceed 60 characters."}else{const t=/^([\w-.]+@([\w-]+\.)+[\w-]{2,4})$/;if(!t.test(this.emailAddress.trim())){e.emailAddress="Please enter a valid E-Mail Address."}}return e}validateSelectedPhoneCode(){const e={};if(!this.isCountryUS()&&!this.selectedPhoneCode.trim()){e.selectedPhoneCode="Country Code is required"}return e}togglePhoneCodeDropdown=e=>{e.stopPropagation();this.isPhoneCodeDropdownOpen=!this.isPhoneCodeDropdownOpen;this.errors={...this.errors,selectedPhoneCode:""};if(this.isPhoneCodeDropdownOpen){document.addEventListener("click",this.handleOutsideClick);document.addEventListener("keydown",this.handleEscapePress)}else{this.removeDropdownListeners()}};selectPhoneCode=e=>{this.selectedPhoneCode=e;this.isPhoneCodeDropdownOpen=false;this.errors={...this.errors,selectedPhoneCode:""};this.removeDropdownListeners()};handleOutsideClick=e=>{if(this.dropdownWrapper&&!this.dropdownWrapper.contains(e.target)){this.isPhoneCodeDropdownOpen=false;this.removeDropdownListeners()}};handleEscapePress=e=>{if(e.key==="Escape"){this.isPhoneCodeDropdownOpen=false;this.removeDropdownListeners()}};removeDropdownListeners(){document.removeEventListener("click",this.handleOutsideClick);document.removeEventListener("keydown",this.handleEscapePress)}handleClosePopup=()=>{this.mfaPopUp=false};handleMfaError(e){if(e?.length>0){this.brokenRules=[e[0]];this.showErrorBanner(e)}}validateAccountFields(){const e={};if(!this.accountHolderName.trim()){e.accountHolderName="Account Holder Name is required."}if(!this.accountNumber.trim()){e.accountNumber="Account Number is required."}else if(!/^\d+$/.test(this.accountNumber)){e.accountNumber="Account Number must contain only numbers."}if(!this.routingNumber.trim()){e.routingNumber="Routing Number is required."}else if(!/^\d{9}$/.test(this.routingNumber)){e.routingNumber="Routing Number must be 9 digits."}return e}validatePersonalFields(){const e={};if(!this.firstName.trim()){e.firstName="First Name is required."}if(!this.lastName.trim()){e.lastName="Last Name is required."}if(!this.paymentAccountNickname.trim()){e.paymentAccountNickname="Payment Account Nickname is required."}return e}validateDateOfBirth(){const e={};if(!this.dateofBirth.trim()){e.dateofBirth="Date of Birth is required.";return e}const t=/^(0[1-9]|1[012])[- /.](0[1-9]|[12]\d|3[01])[- /.](19|20)\d\d$/g;if(!t.test(this.dateofBirth)){e.dateofBirth="Please enter a valid date in MM/DD/YYYY format.";return e}const r=new Date(this.dateofBirth);const a=new Date;a.setFullYear(a.getFullYear()-18);if(r>a){e.dateofBirth="Must be at least 18 years of age."}return e}validateAddressFields(){const e={};if(!this.address1.trim()){e.address1="Address Line 1 is required."}else if(Y(this.address1)){e.address1="PO Boxes are not allowed. Please enter a valid Address Line 1."}if(this.address2.trim().length>0&&Y(this.address2)){e.address2="PO Boxes are not allowed. Please enter a valid Address Line 2."}if(!this.city.trim()){e.city="City is required."}if(this.isCountryUSorCanada()&&!this.state.trim()){e.state="State is required."}if(!this.country.trim()){e.country="Country is required."}if(!this.zipCode.trim()){e.zipCode="ZIP/Postal Code is required."}return e}validate(){this.isLoading=true;const e={accountHolderName:"",accountNumber:"",routingNumber:"",bankAccountType:"",firstName:"",lastName:"",address1:"",city:"",state:"",country:"",zipCode:"",address2:"",dateofBirth:"",paymentAccountNickname:"",mobilePhoneNumber:"",emailAddress:"",selectedPhoneCode:"",...this.validateAccountFields(),...this.validatePersonalFields(),...this.validateDateOfBirth(),...this.validateAddressFields(),...this.validateMobilePhoneNumber(),...this.validateEmailAddress(),...this.validateSelectedPhoneCode()};this.errors=e;const t=Object.values(e).filter((e=>e!==""));if(t.length>0){k("bank",t)}this.scrollToFirstError();return!Object.values(e).some((e=>e!==""))}scrollToFirstError(){requestAnimationFrame((()=>{const e=this.el.querySelector(".validation-error");if(e){e.scrollIntoView({behavior:"smooth",block:"start"})}}))}async handleSubmit(e){e.preventDefault();this.apiErrors={};this.brokenRules=[];this.isVerifying=true;this.isLoading=true;if(!this.validate()){this.isLoading=false;this.isVerifying=false;return}this.formattedMobileNumber=this.selectedPhoneCode?"+"+this.selectedPhoneCode.trim()+this.mobilePhoneNumber.trim():this.mobilePhoneNumber;try{const e={walletOwnerIdentifiers:{customer:{customerInformation:{firstName:this.firstName,lastName:this.lastName}}},accountReferenceId:`bank-${Date.now()}`,accountNumber:this.accountNumber,payorInformation:{firstName:this.firstName,lastName:this.lastName,paymentAccountNickname:this.paymentAccountNickname,validateAddress:!this.isAddressResubmission,dateofBirth:this.formatDateForAPI(this.dateofBirth),contactInformation:{emailAddress:this.emailAddress,phoneNumber:this.formattedMobileNumber},identityVerificationInformation:null},billingAddress:{addressLine1:this.address1,addressLine2:this.address2||"",city:this.city,provinceOrStateCode:this.getProvinceOrStateCode(),countryCode:this.country||"US",postalCode:this.zipCode},routingNumber:this.routingNumber,bankAccountType:this.bankAccountType};this.PaymentAccountRequestPayload=e;h.commit();const t=await q(this.operationsToken,this.userScopedAccessToken,e,this.environment);if(t.success&&t?.data?.paymentInstrument?.paymentInstrumentToken){this.handleSuccess(t)}else if(t.success&&t?.data?.AccountStatus){if(t?.data?.AccountStatus===c.AddressSuggested){this.isAddressSuggestion=true}else{this.isAddressSuggestion=false}this.brokenRules=t?.data?.BrokenRules||[];if(this.brokenRules.length>0){this.devLog("response.success");this.showErrorBanner(this.brokenRules)}const e=t?.data?.AccountStatus;switch(e){case c.AddressSuggested:this.handleAddressValidation(t);break;case c.MFAPending:this.mfaPopUp=true;this.mfaResponsePayload=t;break;case c.AddressValidationError:case c.AddressValidationUnknownStatus:this.handleValidationError(t);break;case c.Saved:this.handleSuccess(t);break;default:this.handleUnknownError(t);break}}else{this.handleResponseError(t)}}catch(e){this.isLoading=false;w(e.message||"Unexpected error occurred");console.error("Error in handleSubmit:",e);this.apiErrors={General:[e.message||"An unexpected error occurred. Please try again."]}}finally{this.isVerifying=false;this.isLoading=false}}formatDateForAPI(e){if(!e||e.trim()===""){return""}const t=e.split("/");if(t.length!==3){return e}const r=t[0].padStart(2,"0");const a=t[1].padStart(2,"0");const o=t[2];return`${o}-${r}-${a}`}handleSuccess(e){R({bankAccountType:this.bankAccountType,routingNumber:this.routingNumber.slice(-4),accountNumber:this.accountNumber.slice(-4)});const t=e.data.paymentInstrument?.paymentInstrumentToken;this.devLog("Emitting bank account payment instrument token:",t);this.devLog("Full response:",e);this.bankAccountAdded.emit(t);this.resetForm()}handleResponseError(e){const t=e.message||"Bank Account addition failed";w(t);if(e.errors){k("bank",e.errors);this.apiErrors=e.errors.reduce(((e,t)=>{e.General=e.General||[];e.General.push(t);return e}),{})}else if(e.message){k("bank",[e.message]);this.apiErrors={General:[e.message]}}}applySuggested(e,t){const r=B.find((t=>t.code===e));if(r){this.country=r.code;this.errors={...this.errors,country:""};this.state=""}else{this.country="";this.errors={...this.errors,country:""};this.state=""}if(this.isCountryUSorCanada()){const e=U(this.country).some((e=>e.code===t));if(e)this.state=t}this.devLog("Applied suggested address:",{countryCode:e,stateCode:t})}handleUnknownError(e){if(!e?.data?.BrokenRules?.length){e.data={...e.data,BrokenRules:["Payment Method addition failed"]}}let t=e.data.BrokenRules[0];this.brokenRules=e.data.BrokenRules;this.showErrorBanner(this.brokenRules);w("Unknown Error: "+t);this.addressValidation.emit(t);this.devLog("Event emitted:",{message:t,UnKnown:c[e?.data?.AccountStatus]})}handleAddressValidation(e){this.address1=e.data.SuggestedAddresses[0].AddressLine1;this.address2=e.data.SuggestedAddresses[0].AddressLine2;this.city=e.data.SuggestedAddresses[0].City;this.zipCode=e.data.SuggestedAddresses[0].PostalCode;this.applySuggested(e.data.SuggestedAddresses[0].CountryCode,e.data.SuggestedAddresses[0].ProvinceOrStateCode);this.isAddressResubmission=true;const t=e?.data?.BrokenRules?.[0]||"Address updated. Please review and confirm the changes before submitting.";this.addressValidation.emit(t);this.devLog("Address updated event emitted:",{message:t,AddressValidation:c[c.AddressSuggested]})}handleValidationError(e){let t=e?.data?.BrokenRules?.[0];if(e?.data?.AccountStatus===c.AddressValidationError){t=t||"Address provided could not be validated. Please update the provided address and resubmit."}else if(e?.data?.AccountStatus===c.AddressValidationUnknownStatus){t=t||"Address could not be validated. Please update and resubmit."}else{t=t||"Payment method addition failed."}this.isAddressResubmission=true;w("Address validation error: "+t);this.addressValidation.emit(t);this.devLog("addressValidation event emitted:",{message:t,AddressValidation:c[e?.data?.AccountStatus]})}resetForm(){this.accountHolderName="";this.accountNumber="";this.routingNumber="";this.bankAccountType=l.Checking;this.firstName="";this.lastName="";this.address1="";this.address2="";this.city="";this.state="";this.country="US";this.zipCode="";this.address2="";this.dateofBirth="";this.paymentAccountNickname="";this.mobilePhoneNumber="";this.emailAddress="";this.selectedPhoneCode="";this.errors={accountHolderName:"",accountNumber:"",routingNumber:"",bankAccountType:"",firstName:"",lastName:"",address1:"",city:"",state:"",country:"",zipCode:"",address2:"",dateofBirth:"",paymentAccountNickname:"",mobilePhoneNumber:"",emailAddress:"",selectedPhoneCode:""}}goToWallet=()=>{T();this.goToPaymentSelector.emit(true)};handleCloseBanner=()=>{this.brokenRules=[]};renderErrorBanner(){if(!this.brokenRules.length)return null;return a("div",{ref:e=>this.errorBannerRef=e,class:`${this.isAddressSuggestion?"addressVerification-message-warning-info":"addressVerification-message-error-info"}`},a("div",{class:"addressVerification-message-notice-body"},a("div",{class:"addressVerification-message-warning-content"},this.brokenRules[0])),a("button",{class:"addressVerification-close-btn",type:"button","aria-label":"Close",onClick:this.handleCloseBanner},"×"))}renderAccountFields(){return a("div",{class:"wallet-row"},a("div",{class:"wallet-col-md-6 wallet-col-lg-3"},a("label",{htmlFor:"account-holder-name",class:this.errors.accountHolderName?"validation-error":""},"Account Holder Name ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"account-holder-name",autoComplete:"cc-given-name",placeholder:"Enter Account Holder Name",value:this.accountHolderName,onInput:e=>this.handleInputChange("accountHolderName",e.target.value)}),this.errors.accountHolderName&&a("span",{class:"error"},this.errors.accountHolderName)),a("div",{class:"wallet-col-md-6 wallet-col-lg-3"},a("label",{htmlFor:"account-number",class:this.errors.accountNumber?"validation-error":""},"Account Number ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"account-number",placeholder:"Enter Account Number",value:this.accountNumber,onInput:e=>this.handleInputChange("accountNumber",e.target.value)}),this.errors.accountNumber&&a("span",{class:"error"},this.errors.accountNumber)),a("div",{class:"wallet-col-md-6 wallet-col-lg-3"},a("label",{htmlFor:"routing-number",class:this.errors.routingNumber?"validation-error":""},"Routing Number ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"routing-number",placeholder:"Enter Routing Number",value:this.routingNumber,onInput:e=>this.handleInputChange("routingNumber",e.target.value)}),this.errors.routingNumber&&a("span",{class:"error"},this.errors.routingNumber)),a("div",{class:"wallet-col-md-6 wallet-col-lg-3"},a("label",{htmlFor:"account-type",class:this.errors.bankAccountType?"validation-error":""},"Account Type "),a("div",{class:"bank-account-type",role:"radiogroup","aria-labelledby":"account-type"},a("label",{class:"custom-radio"},a("input",{type:"radio",name:"account-type",checked:this.bankAccountType===l.Checking,onChange:()=>this.handleInputChange("bankAccountType",l.Checking)})," ","Checking"),a("label",{class:"custom-radio"},a("input",{type:"radio",name:"account-type",checked:this.bankAccountType===l.Savings,onChange:()=>this.handleInputChange("bankAccountType",l.Savings)})," ","Savings")),this.errors.bankAccountType&&a("span",{class:"error"},this.errors.bankAccountType)))}renderPersonalInfo(){return a("div",{class:"wallet-row"},a("div",{class:"wallet-col-md-6"},a("label",{htmlFor:"first-name",class:this.errors.firstName?"validation-error":""},"First Name ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"first-name",autoComplete:"cc-given-name",placeholder:"Enter First Name",value:this.firstName,onInput:e=>this.handleInputChange("firstName",e.target.value)}),this.errors.firstName&&a("span",{class:"error"},this.errors.firstName)),a("div",{class:"wallet-col-md-6"},a("label",{htmlFor:"last-name",class:this.errors.lastName?"validation-error":""},"Last Name ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"last-name",autoComplete:"cc-family-name",placeholder:"Enter Last Name",value:this.lastName,onInput:e=>this.handleInputChange("lastName",e.target.value)}),this.errors.lastName&&a("span",{class:"error"},this.errors.lastName)),a("div",{class:"wallet-col-md-6"},a("label",{htmlFor:"Nick-name",class:this.errors.paymentAccountNickname?"validation-error":""},"Payment Account Nickname ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"Nick-name",placeholder:"Enter Payment Account Nickname",value:this.paymentAccountNickname,onInput:e=>this.handleInputChange("paymentAccountNickname",e.target.value)}),this.errors.paymentAccountNickname&&a("span",{class:"error"},this.errors.paymentAccountNickname)))}renderAddressSection(){return a(a.Fragment,null,a("div",{class:"wallet-row"},a("div",{class:"wallet-col-md-6 wallet-col-lg-4"},a("label",{htmlFor:"address1",class:this.errors.address1?"validation-error":""},"Address Line 1 ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"address1",autoComplete:"address-line1",placeholder:"Enter Address Line 1",value:this.address1,onInput:e=>this.handleInputChange("address1",e.target.value)}),this.errors.address1&&a("span",{class:"error"},this.errors.address1)),a("div",{class:"wallet-col-md-6 wallet-col-lg-4"},a("label",{htmlFor:"address2"},"Address Line 2 (Optional)"),a("input",{type:"text",id:"address2",autoComplete:"address-line2",placeholder:"Apt, suite, unit, etc. (optional)",value:this.address2,onInput:e=>this.handleInputChange("address2",e.target.value)}),this.errors.address2&&a("span",{class:"error"},this.errors.address2)),a("div",{class:"wallet-col-md-6 wallet-col-lg-4"},a("label",{htmlFor:"city",class:this.errors.city?"validation-error":""},"City ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"city",autoComplete:"address-level2",placeholder:"Enter City",value:this.city,onInput:e=>this.handleInputChange("city",e.target.value)}),this.errors.city&&a("span",{class:"error"},this.errors.city))),a("div",{class:"wallet-row"},a("div",{class:`wallet-col-md-6 ${this.isCountryUS()?"wallet-col-lg-4":""}`},a("label",{htmlFor:"country",class:this.errors.country?"validation-error":""},"Country ",a("span",{class:"required-asterisk"},"*")),a("select",{id:"country",autoComplete:"country",onInput:e=>this.handleCountryChange(e)},a("option",{value:""},"Select Country"),B.map((e=>a("option",{key:e.code,value:e.code},e.name)))),this.errors.country&&a("span",{class:"error"},this.errors.country)),(this.country==="US"||this.country==="CA")&&a("div",{class:"wallet-col-md-6 wallet-col-lg-4"},a("label",{htmlFor:"state",class:this.errors.state?"validation-error":""},"State/Province ",a("span",{class:"required-asterisk"},"*")),a("select",{id:"state",autoComplete:"address-level1",onInput:e=>this.handleStateChange(e)},a("option",{value:""},"Select ",this.country==="US"?"State":"Province"),U(this.country).map((e=>a("option",{key:e.code,value:e.code},e.name)))),this.errors.state&&a("span",{class:"error"},this.errors.state)),a("div",{class:`wallet-col-md-6 ${this.isCountryUS()?"wallet-col-lg-4":""}`},a("label",{htmlFor:"zip-code",class:this.errors.zipCode?"validation-error":""},"ZIP/Postal Code ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"zip-code",autoComplete:"postal-code",placeholder:"Enter ZIP/Postal Code",value:this.zipCode,onInput:e=>this.handleInputChange("zipCode",e.target.value)}),this.errors.zipCode&&a("span",{class:"error"},this.errors.zipCode)),a("div",{class:"wallet-col-md-6"},a("label",{htmlFor:"emailAddress",class:this.errors.emailAddress?"validation-error":""},"E-Mail Address ",a("span",{class:"required-asterisk"},"*")),a("input",{type:"text",id:"emailAddress",placeholder:"Enter E-Mail Address",value:this.emailAddress,onInput:e=>this.handleInputChange("emailAddress",e.target.value)}),this.errors.emailAddress&&a("span",{class:"error"},this.errors.emailAddress)),a("div",{class:"wallet-col-md-6"},a("label",{htmlFor:"mobilePhoneNumber",class:this.errors.mobilePhoneNumber?"validation-error":""},"Mobile Phone Number ",a("span",{class:"required-asterisk"},"*")),this.country==="US"?a("div",{class:"field-stack single-field"},a("div",{class:"input-wrapper"},a("input",{type:"text",id:"mobilePhoneNumber",placeholder:"Enter Mobile Phone Number",maxLength:14,value:this.mobilePhoneNumber,onInput:e=>this.handleMobileNumberChange(e)}),this.errors.mobilePhoneNumber&&a("span",{class:"error"},this.errors.mobilePhoneNumber))):a("div",{class:"field-stack dual-field"},a("div",{class:"input-wrapper"},a("div",{class:"dropdown-wrapper",ref:e=>this.dropdownWrapper=e},a("button",{type:"button",class:"dropdown-header",onClick:this.togglePhoneCodeDropdown,"aria-haspopup":"listbox","aria-expanded":this.isPhoneCodeDropdownOpen},"+",this.selectedPhoneCode||" "),this.isPhoneCodeDropdownOpen&&a("ul",{class:"dropdown-list"},x.map((e=>a("li",{class:"dropdown-item"},a("button",{type:"button",class:"dropdown-button",onClick:()=>this.selectPhoneCode(e.PhoneCode)},a("div",{class:"dropdown-content"},a("span",null,e.Description?.toLowerCase()),a("span",null,"+",e.PhoneCode)))))))),this.errors.selectedPhoneCode&&a("span",{class:"error"},this.errors.selectedPhoneCode)),a("div",{class:"input-wrapper"},a("input",{type:"text",id:"mobilePhoneNumber",placeholder:"Enter Mobile Phone Number",maxLength:20,value:this.mobilePhoneNumber,onInput:e=>this.handleMobileNumberChange(e)}),this.errors.mobilePhoneNumber&&a("span",{class:"error"},this.errors.mobilePhoneNumber)))),a("div",{class:`wallet-col-md-6 ${this.isCountryUS()?"wallet-col-lg-4":""}`},a("label",{htmlFor:"Date-of-Birth",class:this.errors.dateofBirth?"validation-error":""},"Date of Birth ",a("span",{class:"required-asterisk"},"*")),a("date-picker",{id:"Date-of-Birth",placeholder:"MM/DD/YYYY",minAge:18,value:this.dateofBirth,onDateChange:e=>this.handleBirthDateChange(e.detail)}),this.errors.dateofBirth&&a("span",{class:"error"},this.errors.dateofBirth))))}renderApiErrors(){if(!Object.keys(this.apiErrors).length)return null;return a("div",{class:"api-errors"},a("div",{class:"error-content"},a("h5",null,"Error Message:"),a("ul",null,Object.entries(this.apiErrors).map((([e,t])=>t.map(((t,r)=>a("li",{key:`${e}-${r}`},a("strong",null,e==="General"?"":`${e}: `),t))))))))}renderFormActions(){return a("div",{class:"wallet-col-12 footer"},a("md-filled-button",{class:"button button-secondary",onClick:this.goToWallet},"Cancel"),this.isLoading?a("md-filled-button",{class:"button button-primary",type:"button"},a("span",null,"Adding Account ",a("span",{class:"dot-flashing"}))):a("md-filled-button",{class:"button button-primary",disabled:this.isVerifying,"data-loading":this.isVerifying?"true":"false"},this.isVerifying?"Verifying...":"Add Account"))}render(){return a("div",{key:"92242028698f8c4aa0902a48fe4a8a9b8c61070e",class:"add-bank-account"},a("h3",{key:"f985161a63158d9a77e8bbc427bf3324387bcc14"},"Add Bank Account"),this.mfaPopUp&&a("mfa-model-popup",{key:"21d750b54296c2bd35692141d456ec9210b28a6e",operationsToken:this.operationsToken,userScopedAccessToken:this.userScopedAccessToken,environment:this.environment,addRequestPayload:this.PaymentAccountRequestPayload,requestType:"bank",initialMfaResponse:this.mfaResponsePayload,onClose:this.handleClosePopup,errorHandler:e=>this.handleMfaError(e),onSuccessEvent:e=>this.handleSuccess(e.detail)}),a("form",{key:"128eea96ca703f923945d44e97f3fbb0e6c69ae5",onSubmit:e=>this.handleSubmit(e)},this.renderErrorBanner(),this.renderAccountFields(),a("h4",{key:"8736145dcbda7797e2628cbcfdfc170edef72827"},"Account Holder Information"),this.renderPersonalInfo(),a("h4",{key:"a93241a093c7649eba597606c22e8bc2f9370415"},"Billing Address"),this.renderAddressSection(),this.renderApiErrors(),this.renderFormActions()))}};j.style=J;export{j as A,E as a,g as b,v as c,$ as d,C as i,h as o,O as t};
//# sourceMappingURL=p-DaPk-lbo.js.map